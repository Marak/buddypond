function Commands(bp){this.bp=bp;const commands={};this.commands=commands;for(let command in legacyCommands){let commandObj=legacyCommands[command],commandStr=commandObj.command,evaler=function(context,options){context.params,console.log("Executing legacy command:",command,commandStr,context),"function"==typeof commandStr?commandStr(context,options):eval(commandStr)};commands[command]={fn:evaler,object:commandObj}}return this}let legacyCommands={av:{command:function(o){bp.open("audio-visual")},description:"Use the Microphone Audio to create Cool Visuals",icon:"visuals"},apps:{command:function(o,n){console.log("apps command",o,n),bp.apps.buddylist.showCard({chatWindow:n.chatWindow,cardName:"apps",context:{context:n.contextName,type:n.windowType}})},description:"Lists all Buddy Pond Apps",icon:"merlin"},balance:{command:function(o){console.log("balance command",o),o.length>0?bp.open("portfolio",{context:"#portfolio-balance",type:o[0]}):bp.open("portfolio",{context:"#portfolio-balance"})},description:"View your Buddy Coin Balances",icon:"coin"},cast:{command:function(o){bp.open("spellbook")},description:"Cast Spells with the Buddy Pond Spellbook",icon:"spellbook"},bs:{command:function(o,n){console.log("bs command",o,n),bp.apps.buddylist.showCard({chatWindow:n.chatWindow,cardName:"bs-commands",context:{context:n.contextName,type:n.windowType}})},description:"Lists all BuddyScript Commands",icon:"buddyscript"},chalkboard:{command:function(o,n){bp.open("chalkboard",{context:n.contextName,output:n.windowType})},description:"Chalkboard. Draw and Share with Buddies",icon:"chalkboard"},coin:{command:function(o){console.log("coin command",o),o.length>0?bp.open("coin",{type:o[0]}):bp.open("coin")},description:"View available Buddy Coins",icon:"coin"},files:{command:function(o){console.log("files command",o),o.length>0?bp.open("file-explorer",{context:o[0]}):bp.open("file-explorer")},description:"View and Manage your Files",icon:"folder"},give:{command:function(o){console.log("give command",o),o.length>0?bp.open("portfolio",{context:"#portfolio-transfer",type:o[0]}):bp.open("portfolio",{context:"#portfolio-transfer"})},description:"Give Buddy Pond Coins to Buddies",icon:"coin"},install:{command:function(o,n){if(o.length>0){let e=o[0],i=bp.apps.desktop.appList[e];if(!i)return void console.log(`App ${e} not found in appList`);if(!!(bp?.settings?.apps_installed||{})[e])return console.log(`App ${e} is already installed`),console.log("Opening app with context",n),void bp.open(e,{context:n.contextName,output:n.windowType});bp.apps.desktop.addApp(e,i)}else bp.open("pad")},description:"Install Buddy Pond Apps"},uninstall:{command:function(o){if(o.length>0){let n=o[0],e=bp.apps.desktop.appList[n];if(!e)return console.log(`App ${n} not found in appList`),void bp.open("pad");return!(bp?.settings?.apps_installed||{})[n]?(console.log(`App ${n} is not installed`),void bp.open("pad")):void bp.apps.desktop.removeApp(n,e)}bp.open("pad")},description:"Uninstall Buddy Pond Apps"},leaderboard:{command:function(o){bp.open("coin",{context:"#coin-leaderboard"})},description:"View the Buddy Coins Leaderboards",icon:"coin"},markdown:{command:function(o,n){console.log("markdown command",o,n),bp.apps.buddylist.showCard({chatWindow:n.chatWindow,cardName:"markdown",context:{context:n.contextName,type:n.windowType}})},description:"Lists all Markdown Commands",icon:"markdown"},portfolio:{command:function(o){console.log("portfolio command",o),o.length>0?bp.open("portfolio",{context:o[0]}):bp.open("portfolio")},description:"View your Buddy Coins Portfolio",icon:"portfolio"},logout:{command:function(o){bp.logout()},description:"Logs you out of Buddy Pond Desktop",icon:"login"},fluids:{command:function(o){bp.open("fluid-simulation")},description:"Fluid Simulations ( Trippy )",icon:"fluidsimulation"},games:{command:function(o){bp.apps.desktop.openFolder("Games")},description:"Stay Entertained with Buddy Pond Games",icon:"folder"},pond:{command:function(o){console.log("ponds command",o),o.length>0?bp.open("pond",{context:o[0]}):bp.open("pond")},description:"View or Join a Buddy Pond",icon:"pond"},globe:{command:function(o){bp.open("globe")},description:"3-D Geo Map of World.",icon:"globe"},hex:{command:function(o){bp.open("hex-editor")},description:"Hex Editor. Write and Compile Hex Code",icon:"hex-editor"},hack:{command:function(o){bp.open("hacker-typer")},description:"A.I. Assisted Auto-Hacking Console",icon:"hackertyper"},hacks:{command:function(o){bp.apps.desktop.openFolder("Hacking Tools")},description:"Stay Entertained with Hacking Tools",icon:"hackertyper"},help:{command:function(o,n){console.log("help command",o,n),bp.apps.buddylist.showCard({chatWindow:n.chatWindow,cardName:"help",context:{context:n.contextName,type:n.windowType}})},description:"Buddy Pond Help and Support",icon:"help"},youtube:{command:function(o){bp.open("youtube")},description:"Interdimensional Cable",icon:"interdimensionalcable"},maps:{command:function(o){bp.open("maps")},description:"2-D Geo Maps of world.",icon:"maps"},nes:{command:function(o){bp.open("emulator",{context:"nes"})},description:"Nintendo Entertainment System",icon:"nes"},n64:{command:function(o){bp.open("emulator",{context:"n64"})},description:"Nintendo 64",icon:"n64"},snes:{command:function(o){bp.open("emulator",{context:"snes"})},description:"Super Nintendo Entertainment System",icon:"snes"},sega:{command:function(o){bp.open("emulator",{context:"sega"})},description:"Sega Genesis",icon:"sega"},atari2600:{command:function(o){bp.open("emulator",{context:"atari2600"})},description:"Atari 2600",display:!1,icon:"atari2600"},minesweeper:{command:function(o){bp.open("minesweeper")},description:"Classic Minesweeper Puzzle Game",icon:"minesweeper"},pad:{command:function(o){bp.open("pad")},description:"Create hosted Apps for Buddy Pond",icon:"pad"},sampler:{command:function(o){bp.open("sampler")},description:"Audio Sampler. Create and Remix Audio",icon:"sampler"},solitaire:{command:function(o){bp.open("solitaire")},description:"Classic Solitaire Card Game",icon:"solitaire"},camera:{command:function(o){bp.open("camera")},description:"Camera with Visual Effects",icon:"mirror"},gif:{command:function(o,n){bp.open("image-search",{context:n.contextName,output:n.windowType,provider:"giphy-stickers"})},description:"Search and Create Animated GIFs",icon:"gifstudio"},greed:{command:function(o,n){bp.open("frvr-greed",{context:n.contextName,output:n.windowType})},description:"Greed Game",icon:"frvr-greed"},harp:{command:function(o){bp.open("vision-harp")},description:"Computer Vision Harp Instrument",icon:"vision-harp"},bubblepop:{command:function(o){bp.open("bubblepop")},description:"Bubbles. Pop and Share with Buddies",icon:"bubblepop"},stickman:{command:function(o){bp.open("stickman")},description:"StickMan. Create and Share with Buddies",icon:"stickman"},image:{command:function(o,n){bp.open("image-search",{context:n.contextName,output:n.windowType,provider:"pexels"})},description:"Search and Create Images",icon:"image"},jutsu:{command:function(o,n){bp.open("jutsu-caster",{context:n.contextName,output:n.windowType})},description:"Jutsu. Create and Share with Buddies",icon:"jutsu"},mantra:{command:function(o){bp.open("mantra")},description:"Mantra Gaming Engine Demo",icon:"mantra"},mute:{command:function(o){console.log("mute command",o),bp.apps.desktop.toggleMute()},description:"Mute the Audio",icon:"mute"},paint:{command:function(o,n){bp.open("paint",{context:n.contextName,output:n.windowType})},description:"Paint Editor. Draw cool paintings for Buddies.",icon:"paint"},piano:{command:function(o){bp.open("piano")},description:"Tiny Piano Synth Keyboard for Jamming",icon:"piano"},soundcloud:{command:function(o){bp.open("soundcloud")},description:"Curated Music Playlists and Featured Buddies",icon:"soundcloud"},record:{command:function(o){bp.open("soundrecorder")},description:"Sound Recorder App. Record and Edit Audio",icon:"soundrecorder"},say:{command:function(o){console.log("say params",o),bp.apps.say.speak("params")},description:"Text to Speech. Speak with Buddies",icon:"say"},spellbook:{command:function(o){bp.open("spellbook")},description:"Spellbook. Cast Spells with Buddies",icon:"spellbook"},visuals:{command:function(o){bp.open("audio-visual")},description:"Audio Visualizer. Create Cool Visuals with Music",icon:"visuals"}};class BuddyScript{constructor(o,n={}){this.bp=o,this.commandActions={},this.commands=this.commandActions}init(){let o=new Commands(this.bp);Object.assign(this.commands,o.commands)}isValidBuddyScript(o){return this.commands[o]}parseCommand(o,n={}){if(!o||o.length<2)return!1;let e=o.substr(0,1),i=o.split(" ");if(i[0]=i[0].substr(1),"\\"===e){if(this.isValidBuddyScript(i[0])){let e=this.commands[i[0]];return{command:i.join(" "),type:"show-card",input:o,commandData:e,options:n}}return this.alertInvalidCommand(),{type:"invalid"}}if("/"===e){let e=this.commands[i[0]];return{pipe:n=>this.handlePipes(o,n),command:i.join(" "),type:"execute",input:o,commandData:e,options:n}}return!1}executeCommand(o,n,e={}){return this.commandActions[o]?(n.data=this.commandActions[o],this.commandActions[o].fn?this.commandActions[o].fn.call(this,n,e):this.commandActions[o].call(this,n,e)):(console.log(o,n),!0)}handlePipes(o,n={}){let e=o.split("|"),i=[];for(let o of e){let e=o.trim().split(" "),t=e[0].substr(1),a=e.slice(1);if(!this.isValidBuddyScript(t))return this.alertInvalidCommand(),{type:"invalid"};i.push(this.executeCommand(t,a,n))}return i}alertInvalidCommand(){console.log("Invalid BuddyScript. Will not send.")}addCommand(o,n){console.log("Adding command",o,n),this.commandActions[o]={fn:n}}removeCommand(o){delete this.commands[o]}}export{BuddyScript as default};
//# sourceMappingURL=buddyscript.js.map
