function Commands(bp){this.bp=bp;const commands={};this.commands=commands;for(let command in legacyCommands){let commandObj=legacyCommands[command],commandStr=commandObj.command,evaler=function(context,options){context.params,console.log("Executing legacy command:",command,commandStr,context),"function"==typeof commandStr?commandStr(context,options):eval(commandStr)};commands[command]={fn:evaler,object:commandObj}}return this}let legacyCommands={av:{command:function(o){bp.open("audio-visual")},description:"Use the Microphone Audio to create Cool Visuals",icon:"visuals"},apps:{command:function(o,n){console.log("apps command",o,n),bp.apps.buddylist.showCard({chatWindow:n.chatWindow,cardName:"apps"})},description:"Lists all Buddy Pond Apps",icon:"merlin"},balance:{command:function(o){console.log("balance command",o),o.length>0?bp.open("portfolio",{context:"#portfolio-balance",type:o[0]}):bp.open("portfolio",{context:"#portfolio-balance"})},description:"View your Buddy Coin Balances",icon:"coin"},cast:{command:function(o){bp.open("spellbook")},description:"Cast Spells with the Buddy Pond Spellbook",icon:"spellbook"},bs:{command:function(o,n){console.log("bs command",o,n),bp.apps.buddylist.showCard({chatWindow:n.chatWindow,cardName:"bs-commands"})},description:"Lists all BuddyScript Commands",icon:"buddyscript"},coin:{command:function(o){console.log("coin command",o),o.length>0?bp.open("coin",{type:o[0]}):bp.open("coin")},description:"View available Buddy Coins",icon:"coin"},files:{command:function(o){console.log("files command",o),o.length>0?bp.open("file-explorer",{context:o[0]}):bp.open("file-explorer")},description:"View and Manage your Files",icon:"folder"},give:{command:function(o){console.log("give command",o),o.length>0?bp.open("portfolio",{context:"#portfolio-transfer",type:o[0]}):bp.open("portfolio",{context:"#portfolio-transfer"})},description:"Give Buddy Pond Coins to Buddies",icon:"coin"},leaderboard:{command:function(o){bp.open("coin",{context:"#coin-leaderboard"})},description:"View the Buddy Coins Leaderboards",icon:"coin"},markdown:{command:function(o,n){console.log("markdown command",o,n),bp.apps.buddylist.showCard({chatWindow:n.chatWindow,cardName:"markdown"})},description:"Lists all Markdown Commands",icon:"markdown"},portfolio:{command:function(o){console.log("portfolio command",o),o.length>0?bp.open("portfolio",{context:o[0]}):bp.open("portfolio")},description:"View your Buddy Coins Portfolio",icon:"portfolio"},logout:{command:function(o){bp.logout()},description:"Logs you out of Buddy Pond Desktop",icon:"login"},fluids:{command:function(o){bp.open("fluid-simulation")},description:"Fluid Simulations ( Trippy )",icon:"fluidsimulation"},games:{command:function(o){bp.apps.desktop.openFolder("Games")},description:"Stay Entertained with Buddy Pond Games",icon:"folder"},pond:{command:function(o){console.log("ponds command",o),o.length>0?bp.open("pond",{context:o[0]}):bp.open("pond")},description:"View or Join a Buddy Pond",icon:"pond"},globe:{command:function(o){bp.open("globe")},description:"3-D Geo Map of World.",icon:"globe"},hex:{command:function(o){bp.open("hex-editor")},description:"Hex Editor. Write and Compile Hex Code",icon:"hex-editor"},hack:{command:function(o){bp.open("hacker-typer")},description:"A.I. Assisted Auto-Hacking Console",icon:"hackertyper"},hacks:{command:function(o){bp.apps.desktop.openFolder("Hacking Tools")},description:"Stay Entertained with Hacking Tools",icon:"hackertyper"},help:{command:function(o,n){console.log("help command",o,n),bp.apps.buddylist.showCard({chatWindow:n.chatWindow,cardName:"help"})},description:"Buddy Pond Help and Support",icon:"help"},youtube:{command:function(o){bp.open("youtube")},description:"Interdimensional Cable",icon:"interdimensionalcable"},maps:{command:function(o){bp.open("maps")},description:"2-D Geo Maps of world.",icon:"maps"},nes:{command:function(o){bp.open("emulator",{context:"nes"})},description:"Nintendo Entertainment System",icon:"nes"},n64:{command:function(o){bp.open("emulator",{context:"n64"})},description:"Nintendo 64",icon:"n64"},snes:{command:function(o){bp.open("emulator",{context:"snes"})},description:"Super Nintendo Entertainment System",icon:"snes"},sega:{command:function(o){bp.open("emulator",{context:"sega"})},description:"Sega Genesis",icon:"sega"},atari2600:{command:function(o){bp.open("emulator",{context:"atari2600"})},description:"Atari 2600",display:!1,icon:"atari2600"},minesweeper:{command:function(o){bp.open("minesweeper")},description:"Classic Minesweeper Puzzle Game",icon:"minesweeper"},pad:{command:function(o){bp.open("pad")},description:"Create hosted Apps for Buddy Pond",icon:"pad"},sampler:{command:function(o){bp.open("sampler")},description:"Audio Sampler. Create and Remix Audio",icon:"sampler"},solitaire:{command:function(o){bp.open("solitaire")},description:"Classic Solitaire Card Game",icon:"solitaire"},camera:{command:function(o){bp.open("camera")},description:"Camera with Visual Effects",icon:"mirror"},gif:{command:function(o){bp.open("image-search")},description:"Search and Create Animated GIFs",icon:"gifstudio"},image:{command:function(o){bp.open("image-search")},description:"Search and Create Images",icon:"image"},mantra:{command:function(o){bp.open("mantra")},description:"Mantra Gaming Engine Demo",icon:"mantra"},mute:{command:function(o){console.log("mute command",o),bp.apps.desktop.toggleMute()},description:"Mute the Audio",icon:"mute"},piano:{command:function(o){bp.open("piano")},description:"Tiny Piano Synth Keyboard for Jamming",icon:"piano"},soundcloud:{command:function(o){bp.open("soundcloud")},description:"Curated Music Playlists and Featured Buddies",icon:"soundcloud"},record:{command:function(o){bp.open("soundrecorder")},description:"Sound Recorder App. Record and Edit Audio",icon:"soundrecorder"},say:{command:function(o){console.log("say params",o),bp.apps.say.speak("params")},description:"Text to Speech. Speak with Buddies",icon:"say"},spellbook:{command:function(o){bp.open("spellbook")},description:"Spellbook. Cast Spells with Buddies",icon:"spellbook"},visuals:{command:function(o){bp.open("audio-visual")},description:"Audio Visualizer. Create Cool Visuals with Music",icon:"visuals"}};class BuddyScript{constructor(o,n={}){this.bp=o,this.commandActions={},this.commands=this.commandActions}init(){let o=new Commands(this.bp);Object.assign(this.commands,o.commands)}isValidBuddyScript(o){return this.commands[o]}parseCommand(o,n={}){if(!o||o.length<2)return!1;let i=o.substr(0,1),e=o.split(" ");if(e[0]=e[0].substr(1),"\\"===i){if(this.isValidBuddyScript(e[0])){let i=this.commands[e[0]];return{command:e.join(" "),type:"show-card",input:o,commandData:i,options:n}}return this.alertInvalidCommand(),{type:"invalid"}}if("/"===i){let i=this.commands[e[0]];return{pipe:n=>this.handlePipes(o,n),command:e.join(" "),type:"execute",input:o,commandData:i,options:n}}return!1}executeCommand(o,n,i={}){return this.commandActions[o]?(n.data=this.commandActions[o],this.commandActions[o].fn?this.commandActions[o].fn.call(this,n,i):this.commandActions[o].call(this,n,i)):(console.log(o,n),!0)}handlePipes(o,n={}){let i=o.split("|"),e=[];for(let o of i){let i=o.trim().split(" "),t=i[0].substr(1),c=i.slice(1);if(!this.isValidBuddyScript(t))return this.alertInvalidCommand(),{type:"invalid"};e.push(this.executeCommand(t,c,n))}return e}alertInvalidCommand(){console.log("Invalid BuddyScript. Will not send.")}addCommand(o,n){console.log("Adding command",o,n),this.commandActions[o]={fn:n}}removeCommand(o){delete this.commands[o]}}export{BuddyScript as default};
//# sourceMappingURL=buddyscript.js.map
