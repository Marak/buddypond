class t{constructor(e,t={}){return this.bp=e,this}async init(){return this.bp.log("Hello from Console"),await this.bp.load("/v5/apps/based/console/console.css"),this.html=await this.bp.load("/v5/apps/based/console/console.html"),$(document).on("keydown",(e=>{if(192==event.which&&event.shiftKey)return this.open(),!1})),"loaded Console"}async open(){let t=this.bp.apps.ui.windowManager.createWindow({id:"console",title:"Console",x:50,y:100,width:800,height:400,minWidth:200,minHeight:200,parent:$("#desktop")[0],content:this.html,resizable:!0,minimizable:!0,maximizable:!0,closable:!0,focusable:!0,maximized:!1,minimized:!1,onOpen:()=>{$(".console_message_text",this.content).focus()}});this.consoleWindow=t;let s=Object.keys(this.bp.apps.buddyscript.commands).map((e=>"/"+e));$(".console_message_text",t.content).autocomplete({source:s}),$(".console_send_message_form",t.content).on("submit",(e=>(e.preventDefault(),!1))),$(".consoleMessageSubmit",t.content).on("click",(()=>{let s=$(".console_message_text",t.content).val();return this.bp.apps.buddyscript.parseCommand(s),this.log(s),$(".console_message_text",t.content).val(""),e.preventDefault(),!1})),$(".console_message_text",t.content).on("keypress",(e=>{if(13===e.which){let s=$(".console_message_text",t.content).val();return this.bp.apps.buddyscript.parseCommand(s),$(".console_message_text",t.content).val(""),this.log(s),e.preventDefault(),!1}}))}log(e){$(".console li").length>10&&$(".console li").get(0).remove();let t=e,s=DateFormat.format.date(new Date,"HH:mm:ss");$(".console").append("<li>"+s+": "+t+"</li>")}}export{t as default};
//# sourceMappingURL=console.js.map
