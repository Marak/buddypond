{"version":3,"file":"pad.js","sources":["../../../apps/based/pad/lib/defaultPadFiles.js","../../../apps/based/pad/lib/buildPad.js","../../../apps/based/desktop/lib/appList.js","../../../apps/based/pad/pad.js","../../../apps/based/pad/lib/renderPadRows.js","../../../apps/based/pad/lib/savePad.js","../../../apps/based/pad/lib/renderAppList.js"],"sourcesContent":["// Default index.html content for a new BuddyPad\nconst defaultIndexHtml = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Welcome to Your BuddyPad</title>\n    <link rel=\"stylesheet\" href=\"./style.css\">\n</head>\n<body>\n    <h1>Your BuddyPad</h1>\n    <div class=\"welcome-section\">\n        <p>Welcome to your BuddyPad, a custom page hosted on the BuddyPond CDN!</p>\n        <p><strong>About BuddyPads:</strong></p>\n        <p>BuddyPads are custom routed pages on BuddyPond, allowing you to host any static content. Each BuddyPad is stored as a virtual directory in our CDN, accessible via the <strong>Buddy Files</strong> app in the \"pads\" folder.</p>\n        <p><strong>How to Customize Your BuddyPad:</strong></p>\n        <ul>\n            <li><strong>This Default Pad</strong>: This page includes <code>index.html</code> (structure), <code>style.css</code> (styling), and <code>index.js</code> (interactivity). These are linked using relative paths (e.g., <code>./style.css</code>, <code>./index.js</code>).</li>\n            <li><strong>Upload Any Files</strong>: Use the <strong>Buddy Files</strong> app (navigate to the \"pads\" folder) to upload any static files, such as HTML, CSS, JS, images, or entire projects (e.g., React, Vue, or static sites).</li>\n            <li><strong>Flexible Structure</strong>: You're not limited to these default files. Create multiple files, folders, or complex project structures. The BuddyPond CDN serves your content as configured.</li>\n            <li><strong>Accessing Your Pad</strong>: Your BuddyPad is hosted at a unique URL and served directly from our CDN for fast, reliable delivery.</li>\n        </ul>\n        <p><strong>Try It Out:</strong> Click the button below to toggle the color of the boxes, demonstrating how HTML, CSS, and JS work together.</p>\n        <button id=\"toggleButton\">Toggle Box Colors</button>\n        <div class=\"box-container\">\n            <div class=\"color-box\"></div>\n            <div class=\"color-box\"></div>\n            <div class=\"color-box\"></div>\n        </div>\n    </div>\n    <script src=\"./index.js\"></script>\n</body>\n</html>\n`;\n\n// Default style.css content for a new BuddyPad\nconst defaultStyleCss = `\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    background-color: #f4f4f9;\n    color: #333;\n    margin: 0;\n    padding: 20px;\n    line-height: 1.6;\n}\nh1 {\n    color: #007bff;\n    text-align: center;\n}\n.welcome-section {\n    max-width: 800px;\n    margin: 0 auto;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\nul {\n    padding-left: 20px;\n}\ncode {\n    background: #f0f0f0;\n    padding: 2px 4px;\n    border-radius: 4px;\n}\nbutton {\n    background-color: #007bff;\n    color: white;\n    padding: 10px 20px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    display: block;\n    margin: 20px auto;\n}\nbutton:hover {\n    background-color: #0056b3;\n}\n.box-container {\n    display: flex;\n    gap: 20px;\n    justify-content: center;\n}\n.color-box {\n    width: 100px;\n    height: 100px;\n    background-color: #28a745;\n    border-radius: 10px;\n    transition: background-color 0.3s ease;\n}\n.color-box.toggled {\n    background-color: #dc3545;\n}\n`;\n\n// Default index.js content for a new BuddyPad\nconst defaultJs = `\nconsole.log('Welcome to your BuddyPad!');\n// Example: Using querySelectorAll to add interactivity\nconst boxes = document.querySelectorAll('.color-box');\nconst toggleButton = document.getElementById('toggleButton');\n\ntoggleButton.addEventListener('click', () => {\n    boxes.forEach(box => {\n        box.classList.toggle('toggled');\n    });\n});\n`;\n\nlet defaultFiles = {\n    'index.html': defaultIndexHtml,\n    'style.css': defaultStyleCss,\n    'index.js': defaultJs\n};\n\nexport default defaultFiles;","// similiar to generateDefaultProfile(), but is not intended to be called each logic\n// also will have separate code path for pad templates\nimport defaultPadFiles from './defaultPadFiles.js';\n\nexport default async function buildPad(padName, template = 'default') {\n    const basePath = \"https://files.buddypond.com/\" + this.bp.me;\n\n    for (const [fileName, fileContent] of Object.entries(defaultPadFiles)) {\n        console.log(`Creating ${fileName}`);\n        const blob = new Blob([fileContent], { type: getFileType(fileName) });\n        const file = new File([blob], fileName, {\n            type: blob.type,\n            lastModified: new Date()\n        });\n        file.filePath = 'pads/' +  padName + `/${fileName}`;\n        console.log(`Uploading ${fileName}...`, file);\n        try {\n            // don't wait for the default pad to generate each file\n            // just generate (3) at once and keep going\n            // TODO: we could track progress and show in UI, etc...\n            // await this.bp.apps.client.api.uploadFile(file);\n            this.bp.apps.client.api.uploadFile(file);\n            console.log(`${fileName} uploaded successfully.`);\n        } catch (uploadError) {\n            console.error(`Error uploading ${fileName}: ${uploadError.message}`);\n        }\n    }\n}\n\nfunction getFileType(fileName) {\n    if (fileName.endsWith('.html')) return 'text/html';\n    if (fileName.endsWith('.css')) return 'text/css';\n    if (fileName.endsWith('.js')) return 'application/javascript';\n    return 'text/plain';\n}","export default {\n  \"admin\": {\n    name: 'admin',\n    icon: `desktop/assets/images/icons/icon_profile_64.png`,\n    label: 'Admin',\n    \"onClick\": \"bp.open('admin')\",\n    adminOnly: true,\n  },\n  \"profile\": {\n    \"icon\": \"desktop/assets/images/icons/icon_profile_64.png\",\n    \"label\": \"My Profile\",\n    \"description\": \"Manage your profile and settings\",\n    \"onClick\": \"bp.open('profile')\",\n    \"categories\": [\"social\", \"productivity\"]\n  },\n  \"buddylist\": {\n    \"icon\": \"desktop/assets/images/icons/icon_profile_64.png\",\n    \"label\": \"BuddyList\",\n    \"description\": \"View and manage your contacts\",\n    \"onClick\": \"bp.open('buddylist')\",\n    \"categories\": [\"social\", \"community\"]\n  },\n  \"pad\": {\n    \"icon\": \"desktop/assets/images/icons/icon_pad_64.png\",\n    \"label\": \"Buddy Apps\",\n    \"description\": \"Create hosted Apps for Buddy Pond\",\n    \"onClick\": \"bp.open('pad')\",\n    \"categories\": [\"productivity\", \"creative\", \"community\"]\n  },\n  \"pond\": {\n    \"icon\": \"desktop/assets/images/icons/icon_pond_64.png\",\n    \"label\": \"Ponds\",\n    \"description\": \"Explore shared content or communities\",\n    \"onClick\": \"bp.open('pond')\",\n    \"categories\": [\"community\", \"social\"]\n  },\n  \"file-explorer\": {\n    \"icon\": \"desktop/assets/images/icons/icon_file-explorer_64.png\",\n    \"label\": \"Buddy Files\",\n    \"description\": \"Browse and manage your files\",\n    \"onClick\": \"bp.open('file-explorer')\",\n    \"desktopOnly\": true,\n    \"categories\": [\"files\", \"productivity\"]\n  },\n  \"file-viewer\": {\n    \"icon\": \"desktop/assets/images/icons/icon_file-viewer_64.png\",\n    \"label\": \"File Viewer\",\n    \"description\": \"View files in various formats\",\n    \"onClick\": \"bp.open('file-viewer')\",\n    \"categories\": [\"files\", \"productivity\"]\n  },\n  \"minipaint\": {\n    \"icon\": \"desktop/assets/images/icons/icon_minipaint_64.png\",\n    \"label\": \"miniPaint\",\n    \"author\": \"ViliusL\",\n    \"description\": \"Advanced image editor to create and edit images\",\n    \"onClick\": \"bp.open('minipaint')\",\n    \"categories\": [\"art\", \"creative\"]\n  },\n  \"paint\": {\n    \"icon\": \"desktop/assets/images/icons/icon_paint_64.png\",\n    \"label\": \"Paint\",\n    \"author\": \"Isaiah Odhner\",\n    \"description\": \"A Classic Retro Style Image Editor\",\n    \"onClick\": \"bp.open('paint')\",\n    \"categories\": [\"art\", \"creative\"],\n    \"chatWindowButton\": ['buddy', 'pond'] // adds this app as a button in the chat window, array is types of windows to add it to\n  },\n  \"painterro\": {\n    \"icon\": \"desktop/assets/images/icons/icon_painterro_64.png\",\n    \"label\": \"Painterro\",\n    \"author\": \"Ivan Borshchov\",\n    \"description\": \"Easy to use image editing tool\",\n    \"onClick\": \"bp.open('painterro')\",\n    \"categories\": [\"art\", \"creative\"]\n  },\n  \"patatap\": {\n    \"icon\": \"desktop/assets/images/icons/icon_patatap_64.png\",\n    \"label\": \"Patatap\",\n    \"description\": \"Create music and animations with touch and keyboard input\",\n    \"onClick\": \"bp.open('patatap')\",\n    \"categories\": [\"audio\", \"music\", \"creative\"],\n    \"author\": \"Jono Brandel\"\n  },\n  /*\n  \"sandspiel\": {\n    \"icon\": \"desktop/assets/images/icons/icon_sandspiel_64.png\",\n    \"label\": \"Sandspiel\",\n    \"description\": \"A creative sandbox game with sand and physics\",\n    \"onClick\": \"bp.open('sandspiel')\",\n    \"categories\": [\"games\", \"creative\"]\n  },\n  */\n  \"soundrecorder\": {\n    \"icon\": \"desktop/assets/images/icons/icon_soundrecorder_64.png\",\n    \"label\": \"Sound Recorder\",\n    \"author\": \"Isaiah Odhner\",\n    \"description\": \"Record and save audio clips\",\n    \"onClick\": \"bp.open('soundrecorder')\",\n    \"desktopOnly\": true,\n    \"categories\": [\"audio\", \"creative\"]\n  },\n  \"youtube\": {\n    \"icon\": \"desktop/assets/images/icons/icon_interdimensionalcable_64.png\",\n    \"label\": \"IDC Cable\",\n    \"description\": \"Watch and browse YouTube videos\",\n    \"onClick\": \"bp.open('youtube')\",\n    \"categories\": [\"entertainment\", \"media\"]\n  },\n  \"camera\": {\n    \"icon\": \"desktop/assets/images/icons/icon_camera_64.png\",\n    \"label\": \"Camera\",\n    \"description\": \"Capture photos or videos\",\n    \"onClick\": \"bp.open('camera')\",\n    \"categories\": [\"media\", \"creative\"]\n  },\n  \"piano\": {\n    \"icon\": \"desktop/assets/images/icons/icon_piano_64.png\",\n    \"label\": \"Piano\",\n    \"description\": \"Play a virtual piano keyboard\",\n    \"onClick\": \"bp.open('piano')\",\n    \"desktopOnly\": true,\n    \"categories\": [\"music\", \"creative\"]\n  },\n  \"fluid-simulation\": {\n    \"icon\": \"desktop/assets/images/icons/icon_fluidsimulation_64.png\",\n    \"author\": \"Pavel Dobryakov\",\n    \"label\": \"Fluid Simulation\",\n    \"description\": \"Interact with a fluid dynamics simulation\",\n    \"onClick\": \"bp.open('fluid-simulation')\",\n    \"categories\": [\"creative\", \"entertainment\"]\n  },\n  \"sampler\": {\n    \"icon\": \"desktop/assets/images/icons/icon_midifighter_64.png\",\n    \"label\": \"Sampler\",\n    \"description\": \"Create and mix audio samples\",\n    \"onClick\": \"bp.open('sampler')\",\n    \"categories\": [\"audio\", \"music\", \"creative\"]\n  },\n  \"audio-visual\": {\n    \"icon\": \"desktop/assets/images/icons/icon_visuals_64.png\",\n    \"author\": \"lachlanmaclean\",\n    \"label\": \"Audio Visuals\",\n    \"description\": \"Experience audio-responsive visuals\",\n    \"onClick\": \"bp.open('audio-visual')\",\n    \"categories\": [\"creative\", \"entertainment\", \"audio\"]\n  },\n  \"chalkboard\": {\n    \"icon\": \"desktop/assets/images/icons/icon_chalkboard_64.png\",\n    \"label\": \"Chalkboard\",\n    \"description\": \"Draw and write on a virtual chalkboard\",\n    \"onClick\": \"bp.open('chalkboard')\",\n    \"categories\": [\"art\", \"creative\"],\n    \"chatWindowButton\": ['buddy', 'pond'], // adds this app as a button in the chat window, array is types of windows to add it to\n    \"chatButton\": {\n        text: 'Chalkboard',\n        image: 'desktop/assets/images/icons/icon_chalkboard_64.png',\n        onclick: async (ev) => {\n            let context = ev.target.dataset.context;\n            let type = ev.target.dataset.type;\n            // Open the image search window\n            bp.open('chalkboard', {\n                output: type || 'buddy',\n                context: context,\n            });\n            return false;\n        }\n    }    \n  },\n  \"coin\": {\n    \"icon\": \"desktop/assets/images/icons/icon_coin_64.png\",\n    \"label\": \"Buddy Coins\",\n    \"description\": \"Manage your virtual currency\",\n    \"onClick\": \"bp.open('coin')\",\n    \"categories\": [\"finance\"]\n  },\n  \"portfolio\": {\n    \"icon\": \"desktop/assets/images/icons/icon_portfolio_64.png\",\n    \"label\": \"Portfolio\",\n    \"description\": \"Track your investments and assets\",\n    \"onClick\": \"bp.open('portfolio')\",\n    \"categories\": [\"finance\"]\n  },\n  \"audio-player\": {\n    \"icon\": \"desktop/assets/images/icons/icon_audio-player_64.png\",\n    \"label\": \"Audio Player\",\n    \"description\": \"Play and manage audio files\",\n    \"onClick\": \"bp.open('audio-player')\",\n    \"categories\": [\"media\", \"audio\"]\n  },\n  \"mantra\": {\n    \"icon\": \"desktop/assets/images/icons/icon_mantra_64.png\",\n    \"label\": \"Mantra\",\n    \"description\": \"Play the Mantra game\",\n    \"categories\": [\"games\"]\n  },\n  \"minesweeper\": {\n    \"icon\": \"desktop/assets/images/icons/icon_minesweeper_64.png\",\n    \"label\": \"Minesweeper\",\n    \"description\": \"Classic Minesweeper puzzle game\",\n    \"categories\": [\"games\"]\n  },\n  \"emulator-nes\": {\n    \"icon\": \"desktop/assets/images/icons/icon_nes_64.png\",\n    \"app\": \"emulator\",\n    \"context\": 'nes',\n    \"label\": \"NES\",\n    \"description\": \"Play Nintendo Entertainment System games\",\n    \"options\": { \"context\": \"nes\" },\n    \"categories\": [\"games\", \"emulators\"]\n  },\n  \"emulator-sega\": {\n    \"icon\": \"desktop/assets/images/icons/icon_sega_64.png\",\n    \"app\": \"emulator\",\n    \"context\": 'sega',\n    \"label\": \"Sega\",\n    \"description\": \"Play Sega console games\",\n    \"options\": { \"context\": \"sega\" },\n    \"categories\": [\"games\", \"emulators\"]\n  },\n  \"emulator-snes\": {\n    \"icon\": \"desktop/assets/images/icons/icon_snes_64.png\",\n    \"app\": \"emulator\",\n    \"context\": 'snes',\n    \"label\": \"SNES\",\n    \"description\": \"Play Super Nintendo games\",\n    \"options\": { \"context\": \"snes\" },\n    \"categories\": [\"games\", \"emulators\"]\n  },\n  \"emulator-atari2600\": {\n    \"icon\": \"desktop/assets/images/icons/icon_atari2600_64.png\",\n    \"app\": \"emulator\",\n    \"context\": 'atari2600',\n    \"label\": \"Atari 2600\",\n    \"description\": \"Play Atari 2600 games\",\n    \"options\": { \"context\": \"atari2600\" },\n    \"categories\": [\"games\", \"emulators\"]\n  },\n  \"emulator-n64\": {\n    \"icon\": \"desktop/assets/images/icons/icon_n64_64.png\",\n    \"app\": \"emulator\",\n    \"context\": 'n64',\n    \"label\": \"n64\",\n    \"description\": \"Play Nintendo 64 games\",\n    \"options\": { \"context\": \"n64\" },\n    \"categories\": [\"games\", \"emulators\"]\n  },\n  \"solitaire\": {\n    \"icon\": \"desktop/assets/images/icons/icon_solitaire_64.png\",\n    \"label\": \"Solitaire\",\n    \"description\": \"Classic Solitaire card game\",\n    \"categories\": [\"games\"]\n  },\n  \"globe\": {\n    \"icon\": \"desktop/assets/images/icons/icon_globe_64.png\",\n    \"label\": \"Globe\",\n    \"description\": \"Visualize global network data\",\n    \"categories\": [\"tools\"]\n  },\n  \"hacker-typer\": {\n    \"icon\": \"desktop/assets/images/icons/icon_hacker-typer_64.png\",\n    \"label\": \"Hack Typer\",\n    \"description\": \"Simulate hacking with a typing game\",\n    \"categories\": [\"tools\", \"games\"]\n  },\n  \"hex-editor\": {\n    \"icon\": \"desktop/assets/images/icons/icon_hex-editor_64.png\",\n    \"label\": \"Hex Editor\",\n    \"description\": \"Edit files in hexadecimal format\",\n    \"categories\": [\"tools\", \"productivity\"]\n  },\n  \"maps\": {\n    \"icon\": \"desktop/assets/images/icons/icon_maps_64.png\",\n    \"label\": \"Maps\",\n    \"description\": \"Access mapping and navigation tools\",\n    \"categories\": [\"tools\"]\n  },\n  \"spellbook\": {\n    \"icon\": \"desktop/assets/images/icons/icon_spellbook_64.png\",\n    \"label\": \"Spellbook\",\n    \"description\": \"Manage scripts or commands\",\n    \"categories\": [\"tools\", \"productivity\"]\n  }\n}","/* pad.js - Marak Squires 2024 - BuddyPond Pads */\n// TODO: clean-up this file\nimport renderPadRows from './lib/renderPadRows.js';\nimport savePad from './lib/savePad.js';\nimport buildPad from './lib/buildPad.js';\nimport renderAppList from './lib/renderAppList.js';\n\nexport default class Pad {\n    constructor(bp, options = {}) {\n        this.bp = bp;\n        this.icon = '/desktop/assets/images/icons/icon_pad_64.png';\n        this.data = {};\n        return this;\n    }\n\n    // TODO: move to file\n    async help () {\n        return `Pads are a fun way to create and share content with others.\n\n        You may create pads here and such...etc.\n\n        Enjoy!\n\n        `\n    }\n\n    async init() {\n        this.bp.log('Hello from Pad');\n\n        let html = await this.bp.load('/v5/apps/based/pad/pad.html');\n        let css = await this.bp.load('/v5/apps/based/pad/pad.css');\n\n        let slugify = await this.bp.importModule('/v5/apps/based/pad/vendor/slugify.min.js', {}, false);\n        this.slugify = slugify.slugifyDefault;\n\n        // TODO: put an abort timeout on this so it won't block the app if not available\n        try {\n            this.data.appStats = await this.bp.apps.desktop.client.getAppsStats();\n        } catch (err) {\n            this.data.appStats = {};\n        }\n        if (!this.data.appStats) {\n            this.data.appStats = {};\n        }\n        // console.log('appStats', this.data.appStats);\n\n        this.html = html;\n\n        return 'loaded Pad';\n    }\n\n    // TODO: common function to bind UI\n    // this will *usually* be called inside an open() mutex with window\n    // if app is running headless mode than this is *expected* to be called after init()\n    // TODO: decouple all .bindUI() from .open()...\n    async bindUI () {\n\n    }\n\n    async open() {\n\n        if (!this.padWindow) {\n            this.padWindow = this.bp.apps.ui.windowManager.createWindow({\n                id: 'pad',\n                title: 'Buddy Apps',\n                x: 50,\n                y: 60,\n                width: 1000,\n                height: 600,\n                minWidth: 200,\n                minHeight: 200,\n                icon: this.icon,\n                parent: $('#desktop')[0],\n                content: this.html,\n                resizable: true,\n                minimizable: true,\n                maximizable: true,\n                closable: true,\n                focusable: true,\n                maximized: false,\n                minimized: false,\n                onClose: () => {\n                    this.padWindow = null;\n                }\n            });\n\n            this.tabs = new this.bp.apps.ui.Tabs('.tabs-container', this.padWindow.content);\n\n            this.tabs.onTab(async (tabId) => {\n                // TODO: on tab if tabId = \"pads-home\", \n                // we do need to re-run getPads();....\n                if (tabId === '#pads-home') {\n                    this.myPads = await updateMyPads.call(this);\n                }\n                if (tabId === '#buddy-pads') {\n                    // console.log('appStats', this.data.appStats);\n                    this.renderAppList(this.data.appStats);\n                    $('.bp-pads-search-input', this.padWindow.content).focus();\n                }\n\n            });\n\n            $('.bp-pads-search-input', this.padWindow.content).on('input', (e) => {\n              // TODO: search for apps\n            });\n\n\n        }\n\n        async function updateMyPads() {\n\n            // TODO: refactor this to separate function\n            // will show myPads by default\n            this.myPads = await this.bp.apps.client.api.getPads();\n            console.log('myPadsmyPads', this.myPads)\n            this.renderPadRows(this.myPads.results);\n        }\n\n        // show the first .tab-content\n        //$('.tab-content').show();\n        $('.tab-content:first', this.padWindow.content).show();\n\n        console.log(this.myPads);\n        if (this.bp.me && this.bp.me !== 'Guest') {\n            $('.loggedOut', this.padWindow.content).flexHide();\n            $('.loggedIn', this.padWindow.content).flexShow();\n        } else {\n            $('.loggedOut', this.padWindow.content).flexShow();\n            $('.loggedIn', this.padWindow.content).flexHide();\n        }\n\n        let userFilesCDN = 'https://files.buddypond.com' + '/' + this.bp.me;\n        let userFilesHome = this.bp.config.host + '/' + this.bp.me;\n\n        $('.userFilesHome', this.padWindow.content).html(userFilesHome);\n        $('.userFilesHome', this.padWindow.content).attr('href', userFilesHome);\n\n        $('.userFilesCDN', this.padWindow.content).html(userFilesCDN);\n        $('.userFilesCDN', this.padWindow.content).attr('href', userFilesCDN);\n\n        let that = this;\n        // Function to update slug and URL preview\n        function updateSlug(value) {\n\n            // Remark, TODO: figure out why \"-\" was not working? Would be nice to have \"-\" in urls?\n            const slugOptions = {\n                lower: true,\n                replacement: '-',\n                remove: /[^A-Za-z0-9_\\-]/g,\n                strict: false\n            };\n\n            // First replace spaces with hyphens in your input\n            let preSlug = value.replace(/\\s+/g, '-');\n\n            // Replace any hypens with underscores\n            preSlug = preSlug.replace(/-+/g, '_');\n\n            let slug = that.slugify(preSlug, slugOptions);\n            //let slug = slugify(value);\n\n            $('.padTitle', that.padWindow.content).val(slug);\n            $('.padUrl', that.padWindow.content).val(`${userFilesCDN}/pads/${slug}`);\n        }\n\n        // Debounce function to limit how often a function can fire\n        const debounce = (func, delay) => {\n            let debounceTimer;\n            return function () {\n                const context = this;\n                const args = arguments;\n                clearTimeout(debounceTimer);\n                debounceTimer = setTimeout(() => func.apply(context, args), delay);\n            };\n        };\n\n        // Event listener for title input\n        $('.padTitle', this.padWindow.content).on('input', debounce(function (e) {\n            $(this).removeClass('error');\n\n            console.log('Input changed:', e.target.value);\n            updateSlug(e.target.value);\n        }, 250)); // Adjust debounce time as needed\n\n        // Optional: Display slugification in action (UX feedback)\n        $('.padTitle', this.padWindow.content).on('input', () => {\n            // Optionally, show some kind of indicator that slug is being generated\n            $('.status-indicator', this.padWindow.content).addClass('active').text('Generating URL...');\n        }).on('input', debounce(() => {\n            $('.status-indicator', this.padWindow.content).removeClass('active').text(''); // Clear indicator when done\n            // update url\n            $('.padUrl', this.padWindow.content).val(`${userFilesHome}/pads/${that.slugify($('.padTitle', that.padWindow.content).val())}`);\n        }, 250));\n\n\n        $('.bp-pad-form', this.padWindow.content).on('submit', async (e) => {\n            e.preventDefault();\n            console.log(`Save pad button clicked`);\n\n\n            // check that     let padTitle = $('#padTitle').val() is not empty\n            let padTitle = $('.padTitle', this.padWindow.content).val();\n            if (!padTitle) {\n                $('.padTitle', this.padWindow.content).addClass('error').attr('placeholder', 'Please enter a name...');\n                return;\n            }\n\n            // disable the save-pad-button to prevent double clicks\n            $('.save-pad-button', this.padWindow.content).prop('disabled', true);\n            // add disabled class to button\n            $('.save-pad-button', this.padWindow.content).addClass('disabled');\n\n            let padSaved = false;\n            let padError;\n            let newPad;\n\n            try {\n                newPad = await this.savePad();\n                padSaved = true;\n            } catch (err) {\n                console.error(err);\n                padError = err;\n            }\n\n            if (padSaved) {\n                console.log('the new pad is ', newPad)\n\n                try {\n                    await this.buildPad(newPad.title);\n\n                } catch (err) {\n                    // alert(`Error building pad: ${err.message}`);\n                    console.error('Error building pad', err);\n                    return;\n                }\n\n                // if not success, show the error\n\n                // now that the pad is created we will need to upload files\n                // show the #pads-upload-files div, which will move user to file-explorer\n                $('#pads-upload-files', this.padWindow.content).show();\n                $('#pads-editor', this.padWindow.content).flexHide();\n\n                // Reloads the My Pads list\n                this.myPads = await this.bp.apps.client.api.getPads();\n                this.renderPadRows(this.myPads);\n                // set the .bp-pad-container to visible\n                $('.bp-pad-container', this.padWindow.content).flexShow();\n\n                let padTitle = $('#padTitle').val();\n\n                $('.openPadButton', this.padWindow.content).attr('data-context', `/pads/${padTitle}/index.html`);\n                //alert('set')\n\n\n            } else {\n                console.log('Pad not saved', padError);\n                if (padError.message === 'Pad already exists') {\n                    // highlight the title input\n                    $('.padTitle', this.padWindow.content).addClass('error');\n                    $('.status-indicator', this.padWindow.content).addClass('error').text('Pad already exists');\n                }\n            }\n\n            // re-enable the save-pad-button to prevent double clicks\n            $('.save-pad-button', this.padWindow.content).prop('disabled', false);\n            // remove disabled class to button\n            $('.save-pad-button', this.padWindow.content).removeClass('disabled');\n\n\n            return false;\n\n        });\n\n        $('.create-pad-button', this.padWindow.content).on('click', () => {\n            this.tabs.navigateToTab('#pads-editor');\n        });\n\n        this.tabs.showTab('#buddy-pads');\n        this.padWindow.maximize();\n        return this.padWindow;\n\n    }\n\n    editPad(pad) {\n        $('.tab-content', this.padWindow.content).flexHide();\n        $('.pad-code-editor', this.padWindow.content).flexShow();\n    }\n\n\n}\n\nPad.prototype.renderPadRows = renderPadRows;\nPad.prototype.savePad = savePad;\nPad.prototype.buildPad = buildPad;\nPad.prototype.renderAppList = renderAppList;","export default function renderPadRows(myPads) {\n    if (myPads && myPads.length > 0) {\n        // .bp-pad-table , add the tr rows\n        let table = $('.bp-pad-table', this.padWindow.content);\n\n        // clear the table\n        table.empty();\n\n        myPads.forEach((pad) => {\n            // console.log('pad', pad);\n            let tr = document.createElement('tr');\n\n            // set data-title attribute on tr\n            tr.setAttribute('data-title', pad.title);\n\n            // title\n            let td = document.createElement('td');\n            td.innerHTML = pad.title;\n            td.style.fontWeight = 'bold';\n            td.style.minWidth = '100px';\n            tr.appendChild(td);\n\n            // description\n            td = document.createElement('td');\n\n            let padUrl = '/' + pad.owner + '/pads/' + pad.title;\n            let padLink = `<a href=\"${padUrl}\" target=\"_blank\">${padUrl}</a>`;\n            td.innerHTML = padLink;\n\n            tr.appendChild(td);\n\n            // \n            /* Pad visibility is disabled until we implement role logic to bp-files-proxy\n            // The previous API utilized database for fetching pad content, now pad content is proxied through bp-files-proxy to CDN\n            td = document.createElement('td');\n            // create a drop-down select\n            let select = document.createElement('select');\n            select.name = 'visibility';\n            // add options\n            let options = ['Public', 'Private', 'Unlisted'];\n            options.forEach((option) => {\n                let optionElement = document.createElement('option');\n                optionElement.value = option;\n                optionElement.innerHTML = option;\n                console.log(\"comparing\", option, pad.visibility);\n                if (option.toLowerCase() === pad.visibility) {\n                    optionElement.selected = true;\n                }\n                select.appendChild(optionElement);\n            });\n            select.onchange = async (e) => {\n                console.log('visibility changed', e.target.value, pad);\n                pad.visibility = e.target.value.toLowerCase();\n                let profilePadKey = '/' + this.bp.me + '/' + pad.title;\n\n                await this.bp.apps.client.api.updatePad(profilePadKey, pad);\n            };\n            td.appendChild(select);\n            tr.appendChild(td);\n            */\n\n\n            // actions ( edit, delete, view )\n            td = document.createElement('td');\n            td.style.textAlign = 'right';\n\n            let viewButton = document.createElement('button');\n            viewButton.innerHTML = 'View';\n            viewButton.classList.add('view-button');\n\n\n            /* \n            let submitToAppStoreButton = document.createElement('button');\n            submitToAppStoreButton.classList.add('submit-to-app-store-button');\n            submitToAppStoreButton.innerHTML = 'Submit to App Store';\n            submitToAppStoreButton.onclick = () => {\n                alert('Submit to App Store not implemented yet');\n            }\n            td.appendChild(submitToAppStoreButton);\n            */\n\n            /*\n            let deployViaGithubActionButton = document.createElement('button');\n            deployViaGithubActionButton.classList.add('deploy-via-github-action-button');\n            deployViaGithubActionButton.innerHTML = 'Deploy via GitHub Action';\n            deployViaGithubActionButton.onclick = () => {\n                alert('Deploy via GitHub Action not implemented yet');\n            }\n            td.appendChild(deployViaGithubActionButton);\n            */\n\n            //       <button title=\"Upload Directory\" class=\"bp-file-explorer-btn upload-directory\"><i\n            //          class=\"fa-duotone fa-regular fa-folder-arrow-up\"></i></button>\n\n            /*\n            let uploadFolderButton = document.createElement('button');\n            uploadFolderButton.classList.add('upload-folder-button');\n            uploadFolderButton.innerHTML = 'Upload Folder';\n            uploadFolderButton.onclick = () => {\n                // alert('Upload Folder not implemented yet');\n\n                // console.log('upload directory clicked');\n                let input = document.createElement('input');\n                input.type = 'file';\n                input.multiple = true;\n                input.webkitdirectory = true;\n                input.directory = true;\n                input.click();\n\n                input.onchange = async (e) => {\n                    console.log('ppppppad', pad)\n                    // console.log('files selected', e.target.files);\n                    let items = e.target.files;\n                    //await this.bp.apps['file-explorer'].handleUpload(e);\n                    await this.bp.open('file-explorer', {\n                        // context: '/pads/' + pad.title,\n                        onUploadComplete: async () => {\n\n                            alert('Upload complete');\n                            // close the file explorer window\n                            await this.bp.apps['file-explorer'].close();\n                            // click the view button\n                            viewButton.click();\n                        }\n                    });\n                    alert('open complete');\n                    await this.bp.apps['file-explorer'].fileExplorerInstance.handleUpload(e, {\n                        includeRootDirectory: false,\n                        path: 'pads/' + pad.title + '/',\n                    });\n                };\n\n\n            }\n            td.appendChild(uploadFolderButton);\n            */\n\n            /*\n            let installButton = document.createElement('button');\n            installButton.classList.add('install-button');\n            installButton.innerHTML = 'Install';\n            installButton.onclick = () => {\n                // console.log('install', pad);\n                let padUrl = '/' + pad.owner + '/pads/' + pad.title;\n                // open a new window browser window\n                // create a new shortCut using an empty shell app that manages window state\n                let windowId = 'pad-' + pad.owner + '-' + pad.title;\n                let options = {\n                    title: pad.title,\n                    content: padUrl,\n                    width: 800,\n                    height: 600,\n                    id: windowId\n                }\n                bp.window(options);\n            };\n\n            td.appendChild(installButton);\n            */\n\n            let editButton = document.createElement('button');\n            editButton.classList.add('edit-button');\n            editButton.innerHTML = 'Edit';\n            editButton.onclick = () => {\n                // console.log('edit', pad);\n            }\n            td.appendChild(editButton);\n\n            let deleteButton = document.createElement('button');\n            deleteButton.innerHTML = 'Delete';\n            deleteButton.classList.add('delete-button');\n\n            td.appendChild(deleteButton);\n\n            td.appendChild(viewButton);\n            tr.appendChild(td);\n\n            // TODO: move event handler to separate function / file\n            tr.addEventListener('click', async (e) => {\n                let action;\n                if (e.target.type === 'submit') {\n                    action = e.target.innerHTML;\n                }\n                // alert('clicked ' + action);\n\n                let closestTr = $(e.target).closest('tr');\n                let title = closestTr.attr('data-title');\n                let padUrl = '/' + pad.owner + '/pads/' + pad.title;\n                let padKey = '/' + pad.owner + '/' + pad.title;\n                let relativePath = 'pads/' + pad.title;\n\n                if (action === 'View') {\n                    // console.log('open pad in new window', pad, title);\n                    // open a new window browser window\n                    // TODO: open a new browser window with options ( show url bar, but notinng else )\n                    let win = window.open(padUrl, '_blank');\n                }\n\n                if (action === 'Delete') {\n                    // confirm delete then call api\n\n                    let yesOrNo = confirm('Are you sure you want to delete ' + title + '?');\n\n                    if (yesOrNo) {\n                        // console.log('delete pad', pad, title, padKey);\n\n                        // disable all buttons\n                        $('.ui-button', closestTr).prop('disabled', true);\n                        // add disabled class to button\n                        $('.ui-button', closestTr).addClass('disabled');\n                        try {\n                            await this.bp.apps.client.api.deletePad(padKey);\n\n                        } catch (err) {\n                            console.log('error deleting pad', err);\n                        }\n\n                        try {\n\n                            await this.bp.apps.client.api.removeFile(relativePath);\n                        } catch (err) {\n                            console.log('error deleting pad file', err);\n\n                        }\n\n                        // remove the row from the table\n                        closestTr.remove();\n\n                    }\n\n                    // we need to re-render the table\n                    this.open();\n\n                }\n\n                if (action === 'Edit') {\n                    // open edit window with the pad data\n                    // console.log('edit pad', pad, title);\n                    this.bp.open('file-explorer', { context: '/' + relativePath + '/index.html' });\n                    // set focus\n                    this.bp.apps.ui.windowManager.focusWindow('file-explorer');\n                }\n\n\n            });\n\n            table.append(tr);\n        });\n\n\n\n    } else {\n        // no pads yet\n        $('.bp-pad-container', this.padWindow.content).flexHide();\n    }\n};","export default async function savePad() {\n    // at this point we need to create the Pad in the API\n\n    // check to see if pad with this name already exists\n    let padTitle = $('#padTitle').val();\n    let padKey = '/' + this.bp.me + '/' + padTitle;\n    let padDescription = $('#padDescription').val();    \n    // alert(padName)\n    let thePad;\n    console.log('sending padKey', padKey)\n    try {\n        thePad = await this.bp.apps.client.api.getPad(padKey);\n        console.log(\"got back the pad\", thePad);\n    } catch (err) {\n        console.error('error getting pad', err);\n    }\n    console.log('thePad', thePad);\n    if (!thePad) {\n        console.log('pad is available, creating pad');\n        let padData = {\n            pad_key: padTitle,\n            title: padTitle,\n            description: padDescription\n        };\n        let createdPad;\n        try {\n            createdPad = await this.bp.apps.client.api.createPad(padData);\n            console.log('created pad', createdPad);\n        } catch (err) {\n            console.error('error creating pad', err);\n        }\n        return createdPad;\n    } else {\n        console.log('pad already exists, please choose a different name');\n        throw new Error('Pad already exists');\n        return;\n    }\n\n}","import appList from '../../desktop/lib/appList.js';\n\nexport default function renderAppList(appStats = {}) {\n    const appContainer = $('.bp-pads-grid');\n    const categoryContainer = $('.bp-pads-category-list');\n    const isMobile = typeof bp !== 'undefined' && bp.isMobile && bp.isMobile();\n\n    // appsInstalled is an object that holds installed apps\n    let appsInstalled = this.bp?.settings?.apps_installed || {};\n\n    // filter out any adminOnly: true apps if not admin\n    if (!this.bp?.me?.isAdmin) {\n        Object.keys(appList).forEach(appName => {\n            if (appList[appName].adminOnly) {\n                delete appList[appName];\n            }\n        });\n    }\n\n    // Get unique categories from appList\n    let categories = new Set();\n    Object.values(appList).forEach(app => {\n        if (app.categories) {\n            app.categories.forEach(category => categories.add(category));\n        }\n    });\n\n    // Populate category buttons\n    // TODO: sort categories alphabetically\n    categories = Array.from(categories).sort();\n    categories.forEach(category => {\n        categoryContainer.append(`\n            <button class=\"bp-pads-category-btn\" data-category=\"${category}\">\n                ${category.charAt(0).toUpperCase() + category.slice(1)}\n            </button>\n        `);\n    });\n\n    // Function to render a single app card\n    function renderAppCard(name, app) {\n        const isInstalled = !!appsInstalled[name];\n        const primaryButtonText = isInstalled ? 'Open' : 'Install';\n        const primaryButtonClass = isInstalled ? 'bp-pads-btn-open' : 'bp-pads-btn-install';\n        const uninstallButton = isInstalled\n            ? `<button class=\"bp-pads-btn bp-pads-btn-uninstall\" data-app=\"${name}\">Uninstall</button>`\n            : '';\n        return `\n            <div class=\"bp-pads-app\" data-app=\"${name}\">\n                <img src=\"${app.icon}\" alt=\"${app.label} icon\" class=\"bp-pads-app-icon\">\n                <div class=\"bp-pads-app-info\">\n                    <h4 class=\"bp-pads-app-label\">${app.label}</h4>\n                    <p class=\"bp-pads-app-description\">${app.description}</p>\n                    <div class=\"bp-pads-app-actions\">\n                        <button class=\"bp-pads-btn ${primaryButtonClass}\" data-app=\"${name}\">${primaryButtonText}</button>\n                        ${uninstallButton}\n                    </div>\n                    <div class=\"bp-pads-app-metadata\">\n                        <div class=\"bp-pads-app-author\">\n                            <span class=\"bp-pads-app-author-label\">Author:</span>\n                            <span class=\"bp-pads-app-author-value\">${app.author || 'BuddyPond'}</span>\n                        </div>\n                        <div class=\"bp-pads-app-install-count\">\n                            <span class=\"bp-pads-app-install-count-label\">Downloads:</span>\n                            <span class=\"bp-pads-app-install-count-value\">${appStats[name]?.installCount || 0}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    // Function to update button to loading state\n    function setButtonLoading(button, action) {\n        const isInstall = action === 'install';\n        button.addClass('bp-pads-btn-loading');\n        button.text(isInstall ? 'Installing...' : 'Uninstalling...');\n        button.css('cursor', 'wait');\n        // Force repaint to ensure cursor updates\n        button[0].offsetHeight; // Accessing offsetHeight triggers reflow\n    }\n\n    // Function to reset button state\n    function resetButtonState(button, isInstalled) {\n        button.removeClass('bp-pads-btn-loading');\n        button.text(isInstalled ? 'Open' : 'Install');\n        button.removeClass('bp-pads-btn-install bp-pads-btn-open');\n        button.addClass(isInstalled ? 'bp-pads-btn-open' : 'bp-pads-btn-install');\n        button.css('cursor', '');\n    }\n\n    // Function to render apps based on selected category\n    function renderApps(selectedCategory = 'all') {\n        appContainer.empty(); // Clear existing apps\n        let appsToRender = Object.entries(appList);\n\n        // Filter apps by category\n        if (selectedCategory !== 'all' && selectedCategory !== 'installed') {\n            appsToRender = appsToRender.filter(([_, app]) => app.categories && app.categories.includes(selectedCategory));\n        }\n\n        if (selectedCategory === 'installed') {\n            appsToRender = appsToRender.filter(([name]) => appsInstalled[name]);\n        }\n\n        // Filter out desktop-only apps on mobile\n        if (isMobile) {\n            appsToRender = appsToRender.filter(([_, app]) => !app.desktopOnly);\n        }\n\n        // Render apps\n        // sort appsToRender by label\n        appsToRender.sort((a, b) => a[1].label.localeCompare(b[1].label));\n        appsToRender.forEach(([name, app]) => {\n            appContainer.append(renderAppCard(name, app));\n        });\n    }\n\n    // Initial render\n    let currentCategory = 'all';\n    renderApps(currentCategory);\n\n    // Handle category button clicks\n    categoryContainer.on('click', '.bp-pads-category-btn', (ev) => {\n        $('.bp-pads-category-btn').removeClass('bp-pads-category-active');\n        $(ev.target).addClass('bp-pads-category-active');\n        currentCategory = $(ev.target).data('category');\n        renderApps(currentCategory);\n        // scroll to top of app container\n        $(this.padWindow.content).scrollTop(0);\n    });\n\n    // Handle app action button clicks\n    appContainer.on('click', '.bp-pads-btn', async (ev) => {\n        const button = $(ev.target);\n        const appName = button.data('app');\n        const app = appList[appName];\n        if (!app) {\n            console.warn(`App ${appName} not found in appList`);\n            return;\n        }\n\n        const isInstalled = !!appsInstalled[appName];\n        if (button.hasClass('bp-pads-btn-install')) {\n            // Install action\n            console.log(`Stub: Installing app ${appName}`);\n            setButtonLoading(button, 'install');\n            // this.bp.apps.desktop.showLoadingProgressIndicator(); // Use existing method\n            // Simulate async operation (replace with actual addApp implementation)\n            await this.bp.apps.desktop.addApp(appName, app);\n            appsInstalled[appName] = app; // Update local state\n            resetButtonState(button, true);\n            // this.bp.apps.desktop.hideLoadingProgressIndicator();\n            // Re-render app card to show Uninstall button\n            $(`.bp-pads-app[data-app=\"${appName}\"]`).replaceWith(renderAppCard(appName, app));\n        } else if (button.hasClass('bp-pads-btn-open')) {\n            // Open action\n            console.log(`Stub: Opening app ${appName}`);\n            //if (app.onClick) {\n            try {\n                // eval(app.onClick); // Note: eval is used for simplicity; replace with safer execution\n                console.log(`Executing onClick for ${appName}`, app);\n\n                if (app.app) {\n                    // may have custom defined app name with context\n                    // for example, emulator app uses this to open with context of system\n                    this.bp.open(app.app, {\n                        context: app.context || {},\n                    });\n\n                } else {\n\n                    this.bp.open(appName);\n                }\n\n            } catch (e) {\n                console.error(`Error executing onClick for ${appName}:`, e);\n            }\n        } else if (button.hasClass('bp-pads-btn-uninstall')) {\n            // Uninstall action\n            console.log(`Stub: Uninstalling app ${appName}`);\n            setButtonLoading(button, 'uninstall');\n            // this.bp.apps.desktop.showLoadingProgressIndicator();\n            // Simulate async operation (replace with actual removeApp implementation)\n            // remove the open button immediately\n            // $(`.bp-pads-app[data-app=\"${appName}\"]`).replaceWith(renderAppCard(appName, app)); // Update UI to show loading state\n            let closestOpenButton = button.parent().find('.bp-pads-btn-open');\n            console.log(closestOpenButton)\n            closestOpenButton.remove();\n            await this.bp.apps.desktop.removeApp(appName, app);\n            delete appsInstalled[appName]; // Update local state\n            resetButtonState(button, false);\n            // this.bp.apps.desktop.hideLoadingProgressIndicator();\n            // Re-render app card to hide Uninstall button\n            $(`.bp-pads-app[data-app=\"${appName}\"]`).replaceWith(renderAppCard(appName, app));\n        }\n    });\n}"],"names":["defaultFiles","getFileType","fileName","endsWith","appList","admin","name","icon","label","onClick","adminOnly","profile","description","categories","buddylist","pad","pond","desktopOnly","minipaint","author","paint","chatWindowButton","painterro","patatap","soundrecorder","youtube","camera","piano","sampler","chalkboard","chatButton","text","image","onclick","async","ev","context","target","dataset","type","bp","open","output","coin","portfolio","mantra","minesweeper","app","options","solitaire","globe","maps","spellbook","Pad","constructor","this","data","help","init","log","html","load","slugify","importModule","slugifyDefault","appStats","apps","desktop","client","getAppsStats","err","bindUI","updateMyPads","myPads","api","getPads","console","renderPadRows","results","padWindow","ui","windowManager","createWindow","id","title","x","y","width","height","minWidth","minHeight","parent","$","content","resizable","minimizable","maximizable","closable","focusable","maximized","minimized","onClose","tabs","Tabs","onTab","tabId","call","renderAppList","focus","on","e","show","me","flexHide","flexShow","userFilesCDN","userFilesHome","config","host","attr","that","debounce","func","delay","debounceTimer","args","arguments","clearTimeout","setTimeout","apply","removeClass","value","preSlug","replace","slug","lower","replacement","remove","strict","val","updateSlug","addClass","preventDefault","prop","padError","newPad","padSaved","savePad","error","buildPad","padTitle","message","navigateToTab","showTab","maximize","editPad","prototype","length","table","empty","forEach","tr","document","createElement","setAttribute","td","innerHTML","style","fontWeight","appendChild","padUrl","owner","padLink","textAlign","viewButton","classList","add","editButton","deleteButton","addEventListener","action","closestTr","closest","padKey","relativePath","window","confirm","deletePad","removeFile","focusWindow","append","thePad","padDescription","getPad","Error","createdPad","padData","pad_key","createPad","padName","template","fileContent","Object","entries","defaultPadFiles","blob","Blob","file","File","lastModified","Date","filePath","uploadFile","uploadError","appContainer","categoryContainer","isMobile","appsInstalled","settings","apps_installed","isAdmin","keys","appName","Set","renderAppCard","isInstalled","primaryButtonText","primaryButtonClass","uninstallButton","installCount","setButtonLoading","button","isInstall","css","offsetHeight","resetButtonState","renderApps","selectedCategory","appsToRender","filter","_","includes","sort","a","b","localeCompare","values","category","Array","from","charAt","toUpperCase","slice","currentCategory","scrollTop","hasClass","addApp","replaceWith","closestOpenButton","find","removeApp","warn"],"mappings":"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"}