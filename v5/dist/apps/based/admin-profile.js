class e{constructor(e,t={}){return this.bp=e,this}async init(){return this.bp.log("Hello from Example"),await this.bp.load("/v5/apps/based/admin-profile/admin-profile.css"),this.html=await this.bp.load("/v5/apps/based/admin-profile/admin-profile.html"),"loaded Profile"}async open(e={}){let t=e.context||this.bp.me;t=t.replace(":",""),t=t.replace(" ","");let i=await this.bp.apps.client.api.getProfile(t);t==this.bp.me&&(i.localState=this.bp.apps.buddylist.data.profileState);let l=document.createElement("div"),n=document.createElement("ul");n.className="tab-list";let a=document.createElement("div");console.log("buddyProfile",i),Object.keys(i).forEach(((e,t)=>{let l=document.createElement("li"),o=document.createElement("a");o.href=`#${e}`,o.textContent="buddyPad"===e?"Buddy Profile Pad":e,l.appendChild(o),n.appendChild(l);let d=document.createElement("div");if(d.id=e,d.className="tab-content",0===t&&l.classList.add("active"),"buddyPad"===e){console.log("special iframe render here");let t=i[e],l=document.createElement("iframe");l.style.width="100%",l.style.height="400px",l.src="about:blank",l.onload=()=>{let e=l.contentDocument||l.contentWindow.document;e.open(),e.write(t.content),e.close()},d.appendChild(l)}else{let t=document.createElement("textarea");t.className="profileEditor",t.style.width="100%",t.style.height="400px",t.value=JSON.stringify(i[e],null,2),d.appendChild(t)}a.appendChild(d)})),l.appendChild(n),l.appendChild(a);let o=document.createElement("div");o.innerHTML=this.html,o.append(l),this.profileWindow?(this.profileWindow.content=l,this.profileWindow.context!==t&&(this.profileWindow.context=t,$(this.profileWindow.content).html(l.innerHTML),this.profileWindow.setTitle("Profile - "+t),new this.bp.apps.ui.Tabs("#"+this.profileWindow.id))):(this.profileWindow=this.bp.apps.ui.windowManager.createWindow({id:"profile-user",title:"Profile - "+t,x:50,y:100,width:700,height:600,minWidth:200,minHeight:200,parent:$("#desktop")[0],context:t||"default",content:o,resizable:!0,minimizable:!0,maximizable:!0,closable:!0,focusable:!0,maximized:!1,minimized:!1,onClose:()=>{this.profileWindow=null}}),new this.bp.apps.ui.Tabs("#"+this.profileWindow.id)),this.bp.apps.ui.windowManager.focusWindow(this.profileWindow)}}export{e as default};
//# sourceMappingURL=admin-profile.js.map
