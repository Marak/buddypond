{"version":3,"file":"rewards.js","sources":["../../../apps/based/rewards/rewards.js"],"sourcesContent":["export default class Rewards {\n  constructor(bp, options = {}) {\n    this.bp = bp;\n    this.options = options;\n    this.rewardInterval = null; // Placeholder for reward interval\n    return this;\n  }\n\n  async init() {\n    //this.html = await this.bp.load('/v5/apps/based/motd/motd.html');\n    //await this.bp.load('/v5/apps/based/motd/motd.css');\n    return 'loaded rewards';\n  }\n\n  async requestReward() {\n    if (this.bp.apps.buddylist.client) {\n      // console.log('requesting rewards');\n      // TODO: make bp.apps.buddylist.client.wsClient.send into a method\n      // add a mutex to avoid spamming the request\n      this.bp.apps.buddylist.client.wsClient.send(JSON.stringify({\n        action: 'rewards:request',\n        buddyname: this.bp.me,\n        qtokenid: this.bp.qtokenid,\n      }));\n    }\n  };\n\n  async open() { }\n\n}\nwindow.rollToNumber = function rollToNumber($el, value) {\n  // Format number with commas\n  const formattedValue = value.toLocaleString('en-US');\n  const digits = formattedValue.split('');\n\n  // Clear and rebuild digits\n  $el.empty();\n\n  digits.forEach((d, index) => {\n    // Handle comma separately\n    if (d === ',') {\n      $el.append('<span class=\"odometer-comma\">,</span>');\n      return;\n    }\n\n    const digitContainer = $('<div class=\"odometer-digit\"></div>');\n    const inner = $('<div class=\"odometer-digit-inner\"></div>');\n\n    for (let i = 0; i <= 9; i++) {\n      inner.append(`<span>${i}</span>`);\n    }\n\n    digitContainer.append(inner);\n    $el.append(digitContainer);\n\n    // Delay added to force DOM layout flush, staggered for each digit\n    setTimeout(() => {\n      inner.css({\n        'transition': 'transform 0.5s ease-in-out', // Smooth transition\n        'transform': `translateY(-${d * 1}em)`\n      });\n    }, 50 + index * 100); // Base delay + staggered delay per digit\n  });\n}"],"names":["Rewards","constructor","bp","options","this","rewardInterval","init","requestReward","apps","buddylist","client","wsClient","send","JSON","stringify","action","buddyname","me","qtokenid","open","window","rollToNumber","$el","value","digits","toLocaleString","split","empty","forEach","d","index","append","digitContainer","$","inner","i","setTimeout","css","transition","transform"],"mappings":"AAAe,MAAMA,EACnB,WAAAC,CAAYC,EAAIC,EAAU,IAIxB,OAHAC,KAAKF,GAAKA,EACVE,KAAKD,QAAUA,EACfC,KAAKC,eAAiB,KACfD,IACX,CAEE,UAAME,GAGJ,MAAO,gBACX,CAEE,mBAAMC,GACAH,KAAKF,GAAGM,KAAKC,UAAUC,QAIzBN,KAAKF,GAAGM,KAAKC,UAAUC,OAAOC,SAASC,KAAKC,KAAKC,UAAU,CACzDC,OAAQ,kBACRC,UAAWZ,KAAKF,GAAGe,GACnBC,SAAUd,KAAKF,GAAGgB,WAGvB,CAED,UAAMC,GAAO,EAGfC,OAAOC,aAAe,SAAsBC,EAAKC,GAE/C,MACMC,EADiBD,EAAME,eAAe,SACdC,MAAM,IAGpCJ,EAAIK,QAEJH,EAAOI,SAAQ,CAACC,EAAGC,KAEjB,GAAU,MAAND,EAEF,YADAP,EAAIS,OAAO,yCAIb,MAAMC,EAAiBC,EAAE,sCACnBC,EAAQD,EAAE,4CAEhB,IAAK,IAAIE,EAAI,EAAGA,GAAK,EAAGA,IACtBD,EAAMH,OAAO,SAASI,YAGxBH,EAAeD,OAAOG,GACtBZ,EAAIS,OAAOC,GAGXI,YAAW,KACTF,EAAMG,IAAI,CACRC,WAAc,6BACdC,UAAa,eAAmB,EAAJV,WAE7B,GAAa,IAARC,KAEZ"}