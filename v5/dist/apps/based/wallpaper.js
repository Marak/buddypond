class a{constructor(a){this.bp=a,this.canvas=null,this.label="Wallpaper",this.settings={},this.init=!1,this.width=0,this.height=0,this.wallpapers={},this.paused=!1,this.active=null,this._wallpapers={solid:{label:"Solid",src:["/v5/apps/based/wallpaper/wallpapers/solid.js"]},matrix:{label:"Matrix",src:["/v5/apps/based/wallpaper/wallpapers/matrix.js"]},nyancat:{label:"Nyan Cat",src:["/v5/apps/based/wallpaper/wallpapers/nyancat.js"]},ripples:{label:"Ripples",src:["/v5/apps/based/wallpaper/wallpapers/ripples/ripples.js"]},url:{label:"URL",src:["/v5/apps/based/wallpaper/wallpapers/url.js"]}},a.on("settings::wallpaper_color","update-wallpaper-bg-color",(a=>{this.wallpapers[this.active]&&this.wallpapers[this.active].changeColor(a)}))}async load(a,e){try{this.resizeCanvasToWindow(),this.bp.settings.wallpaper_url?this.setWallpaper(this.bp.settings.wallpaper_url):(this.active=this.bp.settings.wallpaper_name||"solid",this.start()),this.setupEventListeners(),e()}catch(a){console.error("Error loading assets:",a)}}resizeCanvasToWindow(){let a=document.getElementById("c");a.height=window.innerHeight,a.width=window.innerWidth,this.height=window.innerHeight,this.width=window.innerWidth}async start(){if(this.paused=!1,this.resizeCanvasToWindow(),this.wallpapers[this.active])this.wallpapers[this.active].start(this.bp);else{let a=this._wallpapers[this.active].src,e=await this.bp.importModule(a[0],{},!1);this.wallpapers[this.active]=new e.default("c"),this.wallpapers[this.active].start(this.bp)}}pause(){this.paused=!0,this.wallpapers[this.active].pause()}stop(){this.wallpapers[this.active]&&this.wallpapers[this.active].stop&&this.wallpapers[this.active].stop(),this.clear()}clear(){let a=document.getElementById("c");a.getContext("2d").clearRect(0,0,a.width,a.height)}loadRemoteAssets(a,e){console.log(`Loading assets: ${a.join(", ")}`),setTimeout(e,1e3)}setupEventListeners(){window.addEventListener("resize",(a=>{a.target===window&&(this.resizeCanvasToWindow(),this.wallpapers[this.active]&&this.wallpapers[this.active].resize())})),$(".pauseWallpaper").on("click",(()=>{this.paused?(this.start(),$(".pauseWallpaper").html("Pause Wallpaper")):($("#wallpaper").fadeOut("slow"),$(".pauseWallpaper").html("Resume Wallpaper"),this.pause())}))}}a.prototype.setWallpaper=function(a){if(a||(a=prompt("Enter the URL for the wallpaper")),!a)return void console.error("No URL provided for wallpaper");let e=document.getElementById("wallpaper");e.src=a,e.style.display="block",this.bp.set("wallpaper_url",a),this.wallpaperManager.stop()},a.prototype.removeWallpaper=function(){let a=document.getElementById("wallpaper");a.src="",a.style.display="none",this.bp.set("wallpaper_url",null),this.bp.apps.wallpaper.wallpaperManager.stop()};class e{constructor(a,e={}){return this.bp=a,this}async init(){const e=new a(this.bp);return e.load({},(()=>{})),this.wallpaperManager=e,this.bp.on("settings::wallpaper_name","update-wallpaper",(function(a){e.stop(),console.log(`Wallpaper changed to ${a}`),e.active=a,e.start()})),"loaded Wallpaper"}setWallpaper(a){this.wallpaperManager.setWallpaper(a)}removeWallpaper(){this.wallpaperManager.removeWallpaper()}}export{e as default};
//# sourceMappingURL=wallpaper.js.map
