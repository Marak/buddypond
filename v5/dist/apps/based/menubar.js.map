{"version":3,"file":"menubar.js","sources":["../../../apps/based/menubar/lib/defaultMenuBar.js","../../../apps/based/menubar/menubar.js"],"sourcesContent":["export default function defaultMenuBar(bp) {\n\n  // Ported from Legacy bp v4\n  let selectMusicPlaylist2 = `\n    <select name=\"selectPlaylist\" class=\"selectPlaylist float_right\">\n    <option>Select music playlist...</option>\n    <option value=\"1397230333\">Buddy House 0 ( 33 Tracks )</option>\n    <option value=\"1397493787\">Buddy House 1 ( 10 Tracks )</option>\n    <option value=\"1427128612\">Buddy House 2 ( 10 Tracks )</option>\n    </select>\n    `;\n\n\n      let selectMusicPlaylist = `\n<div class=\"dropdown-wrapper float_right select-playlist-dropdown-menu\">\n  <span class=\"icon trigger\" title=\"Select Music Playlist\">\n    <i class=\"fa-duotone fa-regular fa-music\"></i> Select Music Playlist\n  </span>\n  <ul class=\"dropdown-menu\" style=\"display: none;\">\n    <li data-value=\"1397230333\">Buddy House 0 (33 Tracks)</li>\n    <li data-value=\"1397493787\">Buddy House 1 (10 Tracks)</li>\n    <li data-value=\"1427128612\">Buddy House 2 (10 Tracks)</li>\n  </ul>\n</div>\n    `;\n\n  // change to select background / wallpaper / customize theme\n  let selectTheme = `\n    <select name=\"selectTheme\" class=\"selectTheme float_right\">\n    <option value=\"Light\">Light Theme</option>\n    <option value=\"Dark\">Dark Theme</option>\n    <option value=\"Nyan\">Nyan Theme</option>\n    <option value=\"Hacker\">Hacker Theme</option>\n    <option value=\"Water\">Water Theme</option>\n    <option value=\"Customize\">Customize...</option>\n    <!--\n    <option value=\"Customize\">EPIC MODE ( my poor browser ) </option>\n    <option value=\"Customize\">Comic Theme</option> \n    -->\n    </select>\n    `;\n\n\n\n  //        <span class=\"personalizeDesktop float_right\"><i class=\"fa-duotone fa-regular fa-desktop\" title=\"Desktop Settings\"></i>Desktop Settings</span>\n\n  let selectDesktopSettings = `\n<div class=\"dropdown-wrapper desktop-settings-dropdown-menu\">\n  <span class=\"icon trigger\" title=\"Desktop Settings\">\n    <i class=\"fa-duotone fa-regular fa-desktop\"></i> Desktop Settings\n  </span>\n  <ul class=\"dropdown-menu\" style=\"display: none;\">\n    <li data-value=\"open\">Open Desktop Settings</li>\n    <li data-value=\"matrix\">Matrix Wallpaper</li>\n    <li data-value=\"nyancat\">Nyan Cat Wallpaper</li>\n    <li data-value=\"ripples\">Ripples Wallpaper</li>\n    <li data-value=\"urlWallpaper\">Set Wallpaper to Url</li>\n  </ul>\n</div>\n    `;\n\n\n  let sourceCodeStr = `<span title=\"View Source Code\">\n    <i class=\"fa-duotone fa-regular fa-code\"></i> Source Code\n  </span>`;\n  // use fonr-awesome sun and moon icons\n  let selectLightMode = '<span class=\"selectLightMode float_right\"><i class=\"fa-duotone fa-regular fa-sun\" data-mode=\"Light\" title=\"Light Mode\"></i><i class=\"fa-duotone fa-regular fa-moon\" data-mode=\"Dark\" title=\"Dark Mode\"></i></span>';\n\n  let networkStatsStr = `\n      <span class=\"totalConnected loggedIn\">\n        <!-- <span class=\"totalConnectedCount\">0</span> Buddies Online</span> -->\n        <span class=\"desktopDisconnected loggedOut\">Disconnected</span>\n            \n    `;\n\n  let volumeStr = `\n    <div class=\"volume\">\n    <span class=\"volumeIcon volumeToggle volumeFull\">🔊</span>\n    <span class=\"volumeIcon volumeToggle volumeMuted\">🔇</span>\n    \n    <!-- <input type=\"range\" min=\"0\" max=\"100\" value=\"100\" class=\"volumeSlider\"> -->\n    </div>\n    `;\n\n  let clockStr = `\n    <span class=\"\" id=\"clock\"></span>\n    `;\n\n  let menuTemplate = [\n    {\n      label: '<span id=\"me_title\" class=\"me_title\">Welcome - You look nice today!</span>',\n      submenu: [\n        {\n          label: '<span>We are stoked to be your Buddy</span>',\n          className: 'desktop-only'\n          // click: () => api.ui.toggleDeviceSettings() \n        },\n              {\n          label: 'Buddy Apps',\n          closeMenu: true,\n          click: () => bp.open('pad')\n        },\n\n        {\n          label: 'Edit Profile',\n          closeMenu: true,\n          click: () => bp.open('profile')\n        },\n        {\n          label: '<span>Login</span>',\n          className: 'loggedOut',\n          //visible: !bp.apps.client.isLoggedIn(), // Only show if logged out\n          click: () => bp.open('buddylist')\n        },\n        {\n          label: '<span class=\"loggedIn\">Logout</span>',\n          //visible: bp.apps.client.isLoggedIn(), // Only show if logged in\n          click: () => {\n            if (bp.logout) {\n\n              bp.logout();\n            }\n            //bp.apps.client.logout();\n            // Close all chat windows and ponds\n            bp.apps.ui.windowManager.windows.forEach((window) => {\n              if (window.app === 'buddylist' && (window.type === 'buddy' || window.type === 'pond')) {\n                window.close();\n              }\n              if (window.app === 'pond') {\n                window.close();\n              }\n            });\n          }\n        }\n      ]\n    },\n    {\n      label: 'Window',\n      className: \"desktop-only\",\n      submenu: [\n        { label: 'Full Screen', click: () => bp.apps.ui.toggleFullScreen() },\n        {\n          label: 'Hide All Windows',\n          click: () => bp.apps.ui.windowManager.minimizeAllWindows()\n        },\n        /*\n        {\n            label: 'Set Active Window to Wallpaper',\n            disabled: true,\n            click: () => {\n                if (!desktop.ui.wallpaperWindow) {\n                    desktop.ui.wallpaperWindow = true;\n                    desktop.ui.removeWindowWallpaper();\n                    desktop.ui.setActiveWindowAsWallpaper();\n                    $('.setWindowAsWallpaper').html('Remove Window as Wallpaper');\n                } else {\n                    desktop.ui.wallpaperWindow = false;\n                    desktop.ui.removeWindowWallpaper();\n                    $('.setWindowAsWallpaper').html('Set Active Window to Wallpaper');\n                }\n                return false;\n            }\n        } */\n\n      ]\n    },\n    {\n      label: '<span style=\"display:flex;\">$GBP Coin Balance: <span id=\"menu-bar-coin-balance\" class=\"odometer\">0</span></span>',\n      submenu: [\n        {\n          label: 'View Coin Balance',\n          closeMenu: true,\n          click: () => bp.open('portfolio')\n        },\n        /*\n        {\n          label: 'Buy Coins',\n          click: () => bp.open('buycoins')\n        },\n        */\n        {\n          label: 'Send Coins',\n          closeMenu: true,\n          click: () => bp.open('portfolio', { context: '#portfolio-transfer' })\n        }\n      ]\n    },\n    {\n      className: 'loggedIn',\n      label: `\n              <span>Reward in: <span id=\"menu-bar-coin-reward-coindown\" class=\"countdown-date\">0:59</span></span>\n              <!-- <span class=\"loggedOut\">Login to get Coin Rewards</span> -->\n            `,\n    },\n    /*\n    {\n      label: 'Help',\n      click: () => bp.open('help')\n    },\n    */\n\n    { label: '', flex: 1, className: \"desktop-only\" }, // empty space\n\n\n    { label: selectMusicPlaylist, className: \"desktop-only\" },\n\n    // { label: selectTheme },\n    // { label: desktopSettings },\n    {\n      label: selectDesktopSettings,\n      /*\n      click: () => {\n        // open the personalize desktop window\n        bp.open('profile', { context: 'themes' });\n      }\n      */\n    },\n\n    // { label: networkStatsStr },\n    {\n      label: sourceCodeStr,\n      click: () => {\n        // open a new window to https://github.com/buddypond/buddypond\n        let url = 'https://github.com/buddypond/buddypond';\n        window.open(url, '_blank');\n      }\n    },\n    { label: selectLightMode },\n\n    {\n      label: volumeStr,\n      click: () => {\n        console.log('Volume toggle clicked');\n        bp.apps.desktop.toggleMute();\n      }\n\n    },\n    { label: clockStr }\n  ];\n\n\n  return menuTemplate;\n\n}","/* MenuBar.js - Marak Squires - BuddyPond - 2023 */\nimport defaultMenuBar from \"./lib/defaultMenuBar.js\";\n\nexport default class MenuBar {\n    constructor(bp, options = {}) {\n        this.bp = bp;\n        this.options = options;\n        this.menus = {}; // Store named menus\n        this.currentMenuData = []; // Active menu structure\n        this.menuBarElement = null; // Reference to menu DOM element\n    }\n\n    async init() {\n        await this.bp.appendCSS('/v5/apps/based/menubar/menubar.css');\n        this.bp.on('auth::logout', 'reset-menu', () => $('.me_title').html('Sign In'));\n        this.load();\n    }\n\n    load(menuData = {}, parent = document.body) {\n        this.currentMenuData = defaultMenuBar(this.bp);\n        this.renderMenu(parent);\n    }\n\n    setDefaultMenu() {\n        this.currentMenuData = defaultMenuBar(this.bp);\n        this.renderMenu();\n    }\n\n    setMenu(menuName, menuItems) {\n        if (menuName) {\n            if (menuItems) {\n                this.menus[menuName] = menuItems; // Add/update a named menu\n            } else {\n                delete this.menus[menuName]; // Remove a named menu\n            }\n        } else {\n            this.currentMenuData = menuItems || []; // Replace the entire menu\n        }\n\n        // Ensure that the most relevant menu data is used\n        const menuData = this.currentMenuData.length\n            ? this.currentMenuData\n            : Object.values(this.menus).flat();\n\n        console.log('new menuData', menuData);\n        this.renderMenu(undefined, menuItems);\n    }\n\n    renderMenu(parent = document.body, menuData = this.currentMenuData) {\n        if (this.menuBarElement) {\n            this.menuBarElement.remove();\n        }\n\n        //console.log('Rendering menu with data:', menuData);\n\n        this.menuBar = new MenuBarClass(menuData).createMenu();\n        this.menuBarElement = this.menuBar.menuBarElement;\n        // console.log('new menuBarElement', parent, this.menuBarElement);\n        parent.appendChild(this.menuBarElement);\n\n        if (this.bp.isMobile()) {\n            // $('.desktop-menu-bar').hide();\n            $('.desktop-only').remove();\n        }\n\n        // update the default values based on local storage settings\n        // TODO: we may want to move this somewhere else\n        // console.log('setting current theme', this.bp.settings.active_theme);\n        if (this.bp.settings.active_theme) {\n            $('.selectTheme', this.menuBarElement).val(this.bp.settings.active_theme);\n        } else {\n            $('.selectTheme', this.menuBarElement).val('Dark');\n        }\n        // console.log('setting audio', this.bp.settings.audio_enabled);\n        if (this.bp.settings.audio_enabled === false) {\n            $('.volumeFull').hide();\n            $('.volumeMuted').show();\n        } else {\n            $('.volumeFull').show();\n            $('.volumeMuted').hide();\n        }\n        // alert(this.bp.settings.audio_enabled);\n\n        $('.selectLightMode i', this.menuBarElement).on('click', function (e) {\n            let mode = $(e.target).data('mode');\n            //alert('set the mode to ' + mode);\n            bp.apps.themes.applyTheme(mode);\n        });\n\n        $('.icon.trigger').on('click', function (e) {\n            e.stopPropagation(); // Prevent click from bubbling to document\n            $(this).siblings('.dropdown-menu').slideToggle(200);\n        });\n\n        // Handle option selection\n        $('.desktop-settings-dropdown-menu li').on('click', (ev) => {\n            const value = $(ev.target).data('value');\n            const text = $(ev.target).text();\n            // Update the trigger text/icon if desired\n            /*\n            $(this).closest('.dropdown-wrapper').find('.icon.trigger').html(\n                `<i class=\"fa-duotone fa-regular fa-desktop\"></i> ${text}`\n            );\n            */\n            // Hide the dropdown\n            $(ev.target).parent().slideUp(200);\n            // Handle the selected value (e.g., perform an action)\n            console.log('Selected:', value);\n\n            if (!value) {\n                return;\n            }\n            if (value === 'urlWallpaper') {\n                bp.apps.wallpaper.setWallpaper();\n                return;\n            }\n            if (value === 'open') {\n                // open the desktop settings\n                bp.open('profile', { context: 'themes' });\n                console.log('Opening desktop settings', this);\n                this.menuBar.closeMobileMenu();\n                return;\n            }\n            // clear wallpaper_url if exists\n            bp.set('wallpaper_url', null);\n            bp.set('wallpaper_name', value);\n        });\n\n        $('.select-playlist-dropdown-menu li').on('click', function () {\n            const value = $(this).data('value');\n            const text = $(this).text();\n            // Update the trigger text/icon if desired\n            /*\n            $(this).closest('.dropdown-wrapper').find('.icon.trigger').html(\n                `<i class=\"fa-duotone fa-regular fa-desktop\"></i> ${text}`\n            );\n            */\n            // Hide the dropdown\n            $(this).parent().slideUp(200);\n            // Handle the selected value (e.g., perform an action)\n            console.log('Selected:', value);\n\n            $('#soundcloudiframe').remove();\n            $('#soundcloudplayer').html('');\n            /*\n            if (desktop.app.soundcloud) {\n                desktop.app.soundcloud.embeded = false;\n            }\n            desktop.ui.openWindow('soundcloud', { playlistID: $(this).val() });\n            */\n            if (bp.apps.soundcloud) {\n                bp.apps.soundcloud.soundCloudEmbeded = false; // reload\n            }\n            bp.open('soundcloud', { playlistID: value });\n\n        });\n\n\n        // Close dropdown when clicking outside\n        $(document).on('click', function (e) {\n            if (!$(e.target).closest('.dropdown-wrapper').length) {\n                $('.dropdown-menu').slideUp(200);\n            }\n        });\n\n        // TODO: could move this elsewhere\n        let countDownEl = $('#menu-bar-coin-reward-coindown');\n        // console.log('Setting countdown for menu bar coin reward', expiry, countDownEl.length);\n        // set data-ctime to the current time\n        function startCountdown() {\n            const rewardPeriod = 60 * 1000; // 60 seconds\n            const expiry = new Date(Date.now() + rewardPeriod);\n            // console.log(\"Starting countdown for menu bar coin reward\", expiry, countDownEl.length);\n\n            function restartCountdown($el) {\n                bp.apps.rewards.requestReward();\n\n                setTimeout(() => {\n                    const newExpiry = new Date(Date.now() + rewardPeriod);\n                    bp.apps.ui.countdownManager.startCountdown($el, newExpiry, restartCountdown);\n                }, 10);\n            }\n\n            bp.apps.ui.countdownManager.startCountdown(countDownEl, expiry, restartCountdown);\n        }\n\n        if (this.bp.qtokenid) {\n            // will most likely not hit this case, since the menu bar is loaded before login completes\n            startCountdown();\n        } else {\n            // in most cases we will hit this case, where login token is received after menu bar is loaded\n            $('.loggedIn').flexHide();\n            // create event listen for 'auth::login' to start the countdown\n            this.bp.on('auth::qtoken', 'start-rewards-timer', () => {\n                // console.log('Starting rewards timer after login');\n                startCountdown();\n            });\n        }\n\n    }\n}\n\nclass MenuBarClass {\n    constructor(menuTemplate, options = {}) {\n        this.menuTemplate = menuTemplate;\n        this.menuBarElement = null;\n        this.id = options.id || \"menu-bar\";\n    }\n\n    createMenu() {\n        this.menuBarElement = document.createElement(\"div\");\n        this.menuBarElement.classList.add(\"menu-bar\");\n        this.menuBarElement.classList.add(\"desktop-menu-bar\");\n        this.menuBarElement.id = this.id;\n\n        /*\n        const toggleButton = document.createElement(\"div\");\n        toggleButton.className = \"mobile-menu-toggle\";\n        toggleButton.innerHTML = \"☰\";\n        toggleButton.onclick = (e) => {\n            e.stopPropagation();\n\n            const $menu = $(this.menuBarElement);\n\n            if ($menu.hasClass(\"mobile-active\")) {\n                // Animate out (slide off left)\n                $menu.animate({ left: \"-100%\" }, 300, () => {\n                    $menu.removeClass(\"mobile-active\");\n                });\n            } else {\n                // Prepare for entry: move off-screen, then show and animate in\n                $menu\n                    .css({ left: \"-100%\", display: \"flex\" }) // ensure it's ready to animate\n                    .addClass(\"mobile-active\")\n                    .animate({ left: \"0%\" }, 300);\n            }\n        };\n\n        // this.menuBarElement.appendChild(toggleButton);\n        document.body.appendChild(toggleButton);\n        */\n\n\n        this.menuTemplate.forEach(menuItem => this.createMenuItem(menuItem));\n\n        this.menuBarElement.classList.add(\"responsive-ready\");\n\n        this.addGlobalEventListeners();\n\n        return this;\n        \n    }\n\n    createMenuItem(menuItem) {\n        const menuButton = document.createElement(\"div\");\n        menuButton.classList.add(\"menu-item\");\n        menuButton.innerHTML = menuItem.label;\n\n        if (menuItem.flex) {\n            menuButton.style.flex = menuItem.flex;\n        }\n\n        if (menuItem.className) {\n            menuButton.classList.add(menuItem.className);\n        }\n\n        if (menuItem.click) {\n            menuButton.onclick = (event) => {\n                event.stopPropagation();\n                menuItem.click();\n\n                if (menuItem.closeMenu) {\n                    this.closeMobileMenu();\n                }\n            };\n        }\n\n\n        if (menuItem.submenu) {\n            const submenuContainer = this.createSubMenu(menuItem.submenu);\n            menuButton.appendChild(submenuContainer);\n\n            // 🛠️ Handle accordion vs. hover based on screen width\n            const isMobile = window.matchMedia(\"(max-width: 1000px)\").matches;\n\n            if (isMobile) {\n                menuButton.addEventListener(\"click\", (e) => {\n                    e.stopPropagation();\n                    submenuContainer.classList.toggle(\"open\");\n                });\n            } else {\n                // desktop hover behavior\n                menuButton.addEventListener(\"mouseover\", () => submenuContainer.style.display = \"block\");\n                menuButton.addEventListener(\"mouseleave\", () => submenuContainer.style.display = \"none\");\n            }\n        }\n\n        this.menuBarElement.appendChild(menuButton);\n    }\n\n\n    createSubMenu(submenuItems) {\n        const submenuContainer = document.createElement(\"div\");\n        submenuContainer.classList.add(\"submenu\");\n\n        submenuItems.forEach(subItem => {\n            const subMenuItem = document.createElement(\"div\");\n            subMenuItem.classList.add(\"submenu-item\");\n            subMenuItem.innerHTML = subItem.label;\n\n            if (subItem.className) {\n                subMenuItem.classList.add(subItem.className);\n            }\n\n            if (subItem.click) {\n                subMenuItem.onclick = (event) => {\n                    event.stopPropagation();\n                    subItem.click();\n\n                    if (subItem.closeMenu) {\n                        this.closeMobileMenu();\n                    }\n                };\n            }\n            if (subItem.submenu) {\n                const nestedSubMenu = this.createSubMenu(subItem.submenu);\n                subMenuItem.appendChild(nestedSubMenu);\n                subMenuItem.addEventListener(\"mouseover\", () => nestedSubMenu.style.display = \"block\");\n                subMenuItem.addEventListener(\"mouseleave\", () => nestedSubMenu.style.display = \"none\");\n            }\n\n            submenuContainer.appendChild(subMenuItem);\n        });\n\n        return submenuContainer;\n    }\n\n    addGlobalEventListeners() {\n        document.addEventListener(\"click\", (event) => {\n            if (!this.menuBarElement.contains(event.target)) {\n                this.closeAllSubmenus();\n            }\n        });\n\n        document.addEventListener(\"keydown\", (event) => {\n            if (event.key === \"Escape\") {\n                this.closeAllSubmenus();\n            }\n        });\n    }\n\n    closeAllSubmenus() {\n        document.querySelectorAll(\".submenu\").forEach(submenu => submenu.style.display = \"none\");\n    }\n\n    closeMobileMenu() {\n        const $menu = $(this.menuBarElement);\n        if ($menu.hasClass(\"mobile-active\")) {\n            $menu.animate({ left: \"-100%\" }, 300, () => {\n                $menu.removeClass(\"mobile-active\");\n            });\n        }\n    }\n\n}\n"],"names":["defaultMenuBar","bp","label","submenu","className","closeMenu","click","open","logout","apps","ui","windowManager","windows","forEach","window","app","type","close","toggleFullScreen","minimizeAllWindows","context","flex","console","log","desktop","toggleMute","MenuBar","constructor","options","this","menus","currentMenuData","menuBarElement","init","appendCSS","on","$","html","load","menuData","parent","document","body","renderMenu","setDefaultMenu","setMenu","menuName","menuItems","length","Object","values","flat","undefined","remove","menuBar","MenuBarClass","createMenu","appendChild","isMobile","settings","active_theme","val","audio_enabled","hide","show","e","mode","target","data","themes","applyTheme","stopPropagation","siblings","slideToggle","ev","value","text","slideUp","closeMobileMenu","set","wallpaper","setWallpaper","soundcloud","soundCloudEmbeded","playlistID","closest","countDownEl","startCountdown","expiry","Date","now","countdownManager","restartCountdown","$el","rewards","requestReward","setTimeout","newExpiry","qtokenid","flexHide","menuTemplate","id","createElement","classList","add","menuItem","createMenuItem","addGlobalEventListeners","menuButton","innerHTML","style","onclick","event","submenuContainer","createSubMenu","matchMedia","matches","addEventListener","toggle","display","submenuItems","subItem","subMenuItem","nestedSubMenu","contains","closeAllSubmenus","key","querySelectorAll","$menu","hasClass","animate","left","removeClass"],"mappings":"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"}