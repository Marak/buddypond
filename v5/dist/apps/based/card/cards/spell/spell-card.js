var e={spells:[{name:"zalgo",label:"Zalgo",icon:"👹",description:"Corrupts text with chaotic glyphs.",cost:10,costText:"🪙3",costSymbol:"B.webp,B.webp",config:{targets:["self","buddy"],intensity:{type:"number",label:"Intensity",value:10,min:1,max:50}}},{name:"cure",label:"Cure",icon:"💊",description:"Removes a curse from the target.",cost:20,costText:"🪙4",costSymbol:"W.webp",config:{targets:["self"]}},{name:"rickroll",label:"Rickroll",icon:"🎵",description:"Plays a classic prank video.",cost:10,costText:"🪙1",costSymbol:"U.webp",config:{targets:["self"],url:{type:"text",label:"Video URL",value:"https://youtu.be/dQw4w9WgXcQ"}}},{name:"forbiddenRickRoll",label:"Forbidden Rickroll",icon:"🔒",description:"An inescapable prank video.",cost:30,costText:"🪙2",costSymbol:"B.webp,U.webp,G.webp",config:{targets:["self"]}},{name:"lightning",label:"Lightning",icon:"⚡️",description:"Strikes with a dazzling bolt.",cost:80,costText:"🪙3",costSymbol:"R.webp",config:{targets:["self","buddy","pond"],intensity:{type:"number",label:"Intensity",value:5,min:1,max:10}}},{name:"fireball",label:"Fireball",icon:"🔥",description:"Hurls a fiery projectile.",cost:80,costText:"🪙3",costSymbol:"R.webp",config:{targets:["self","buddy","pond"],power:{type:"number",label:"Power",value:5,min:1,max:10}}},{name:"earthquake",label:"Earthquake",icon:"🌍",description:"Shakes the ground beneath.",cost:80,costText:"🪙3",costSymbol:"R.webp,G.webp",config:{targets:["self","buddy","pond"],magnitude:{type:"number",label:"Magnitude",value:5,min:1,max:10}}},{name:"flood",label:"Flood",icon:"🌊",description:"Covers the area in water.",cost:80,costText:"🪙3",costSymbol:"U.webp",config:{targets:["self","buddy","pond"],depth:{type:"number",label:"Depth",value:5,min:1,max:10}}},{name:"vortex",label:"Vortex",icon:"🌪️",description:"Creates a swirling wind.",cost:80,costText:"🪙3",costSymbol:"U.webp,R.webp",config:{targets:["self","buddy","pond"],strength:{type:"number",label:"Strength",value:5,min:1,max:10}}},{name:"barrelRoll",label:"Barrel Roll",icon:"🎢",description:"Performs a barrel roll.",cost:10,costText:"🪙1",costSymbol:"U.webp, R.webp",config:{targets:["self","buddy","pond"]}},{name:"alert",label:"Alert",icon:"📢",description:"Displays a custom message.",cost:10,costText:"🪙1",costSymbol:"W.webp",config:{targets:["self","buddy"],text:{type:"text",label:"Message",value:"You have been cursed!"}}},{name:"logout",label:"Logout",icon:"🚪",description:"Forces the target to log out.",cost:250,costText:"🪙5",costSymbol:"B.webp",config:{}}],curses:[{name:"babel",label:"Babel.js",icon:"🗣️",description:"Scrambles communication.",cost:120,costText:"🪙3",costSymbol:"U.webp, B.webp",config:{targets:["self"],duration:{type:"number",label:"Curse Duration",value:1,min:1,max:5}}},{name:"riddikulus",label:"Riddikulus",icon:"😂",description:"Turns fears into something funny.",cost:60,costText:"🪙2",costSymbol:"U.webp, B.webp",config:{targets:["self"],duration:{type:"number",label:"Duration (seconds)",value:1,min:1,max:5}}},{name:"no-uploads",label:"No Uploads",icon:"🚫",description:"Prevents uploads for a duration.",cost:150,costText:"🪙5",costSymbol:"B.webp, W.webp",config:{duration:{type:"number",label:"Curse Duration",value:1,min:1,max:5}}},{name:"banhammer",label:"Banhammer",icon:"🔨",description:"Temporarily bans the target.",cost:1e3,costText:"🪙10",costSymbol:"W.webp,B.webp",config:{duration:{type:"number",label:"Ban Duration (seconds)",value:600,min:300,max:86400}}}],memes:[{name:"chicken-jockey",label:"Chicken Jockey",icon:"🐔",description:"Summons a chicken jockey.",cost:10,costText:"🪙1",costSymbol:"G.webp",config:{targets:["self","buddy","pond"],duration:{type:"number",label:"Duration (seconds)",value:5,min:1,max:10}}},{name:"hamster-dance",label:"Hamster Dance",icon:"🐹",description:"Plays a funny hamster dance sound.",cost:10,costText:"🪙1",costSymbol:"G.webp",config:{targets:["self","buddy","pond"],volume:{type:"number",label:"Volume",value:5,min:1,max:10}}},{name:"cappuccino-assassino",label:"Cappuccino Assassino",icon:"☕",description:"Summons a cappuccino assassin.",cost:10,costText:"🪙1",costSymbol:"B.webp, R.webp",config:{targets:["self","buddy","pond"],duration:{type:"number",label:"Duration (seconds)",value:5,min:1,max:10}}},{name:"peanut-butter-jelly-time",label:"Peanut Butter Jelly Time",icon:"🍞",description:"Plays a funny peanut butter jelly time sound.",cost:10,costText:"🪙1",costSymbol:"R.webp, G.webp",config:{targets:["self","buddy","pond"],volume:{type:"number",label:"Volume",value:5,min:1,max:10}}}]};async function t(t,o){const l=$(t);let a=e.spells.concat(e.memes).concat(e.curses).find((e=>e.name===o.spell));if(a&&a.costSymbol){let e=a.costSymbol.split(","),t="";e.forEach((e=>{let s=`<img src="/v5/apps/based/spellbook/assets/cost-symbols/${e.trim()}" class="spell-cost-symbol" />`;t+=s})),l.find(".card-spell-cost").html(t)}l.on("click",(e=>{e.preventDefault(),e.stopPropagation(),"spells"!==o.spellType&&"memes"!==o.spellType||s.call(this,o)}));let n=o.target;o.target===o.castedBy&&(n="myself.");let c="an Invocation";if("curses"===o.spellType&&(c="a Curse"),"memes"===o.spellType&&(c="a Meme"),l.find(".card-spell-target").text(`I cast ${c} on `+n),l.find(".card-spell-name").text(o.spellLabel),"curses"!==o.spellType&&l.find(".card-spell-duration").remove(),o.expiry){const e=l.find(".card-spell-duration .countdown-date");e.data("ctime",o.message.ctime),this.bp.apps.ui.countdownManager.startCountdown(e,o.expiry,(function(e){e.parent().text("Curse has Expired.")}))}"curses"===o.spellType&&o.castedBy===this.bp.me&&(l.find(".card-spell-cure").removeClass("hidden"),l.find(".cure-spell").on("click",(async e=>{e.preventDefault(),e.stopPropagation();let t=o.target,s=o.spell;console.log("Cure spell clicked",t,s),await this.bp.load("spellbook"),await this.bp.apps.spellbook.castSpell(o.targetType,o.target,"cure",{type:"spells"})})));const i=new Date,r=new Date(o.message.ctime),p=(i.getTime()-r.getTime())/1e3;let b=o.message,m=bp.get("processedCards")||[];if(!(m.includes(b.uuid)||p>10)){if(m.push(b.uuid),m.length>1e3&&(m=m.slice(-1e3)),bp.set("processedCards",m),"buddy"===o.targetType&&o.target===this.bp.me&&"pond"!==b.type)try{await s.call(this,o)}catch(e){console.error("Error running spell:",e)}if("pond"===o.targetType)try{await s.call(this,o)}catch(e){console.error("Error running spell:",e)}}}async function s(e){try{(await this.bp.importModule(`/v5/apps/based/spellbook/spells/${e.spell}/${e.spell}.js`,{},!1)).default.call(this)}catch(e){console.log("Error importing spell module:",e)}}export{t as default};
//# sourceMappingURL=spell-card.js.map
