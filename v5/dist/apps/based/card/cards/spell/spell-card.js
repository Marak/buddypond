var e={spells:[{name:"zalgo",label:"Zalgo",icon:"ðŸ‘¹",description:"Corrupts text with chaotic glyphs.",cost:10,costText:"ðŸª™3",costSymbol:"B.webp,B.webp",config:{targets:["self","buddy"],intensity:{type:"number",label:"Intensity",value:10,min:1,max:50}}},{name:"cure",label:"Cure",icon:"ðŸ’Š",description:"Removes a curse from the target.",cost:20,costText:"ðŸª™4",costSymbol:"W.webp",config:{targets:["self"]}},{name:"rickroll",label:"Rickroll",icon:"ðŸŽµ",description:"Plays a classic prank video.",cost:10,costText:"ðŸª™1",costSymbol:"U.webp",config:{targets:["self"],url:{type:"text",label:"Video URL",value:"https://youtu.be/dQw4w9WgXcQ"}}},{name:"forbiddenRickRoll",label:"Forbidden Rickroll",icon:"ðŸ”’",description:"An inescapable prank video.",cost:30,costText:"ðŸª™2",costSymbol:"B.webp,U.webp,G.webp",config:{targets:["self"]}},{name:"lightning",label:"Lightning",icon:"âš¡ï¸",description:"Strikes with a dazzling bolt.",cost:80,costText:"ðŸª™3",costSymbol:"R.webp",config:{targets:["self","buddy","pond"],intensity:{type:"number",label:"Intensity",value:5,min:1,max:10}}},{name:"fireball",label:"Fireball",icon:"ðŸ”¥",description:"Hurls a fiery projectile.",cost:80,costText:"ðŸª™3",costSymbol:"R.webp",config:{targets:["self","buddy","pond"],power:{type:"number",label:"Power",value:5,min:1,max:10}}},{name:"earthquake",label:"Earthquake",icon:"ðŸŒ",description:"Shakes the ground beneath.",cost:80,costText:"ðŸª™3",costSymbol:"R.webp,G.webp",config:{targets:["self","buddy","pond"],magnitude:{type:"number",label:"Magnitude",value:5,min:1,max:10}}},{name:"flood",label:"Flood",icon:"ðŸŒŠ",description:"Covers the area in water.",cost:80,costText:"ðŸª™3",costSymbol:"U.webp",config:{targets:["self","buddy","pond"],depth:{type:"number",label:"Depth",value:5,min:1,max:10}}},{name:"vortex",label:"Vortex",icon:"ðŸŒªï¸",description:"Creates a swirling wind.",cost:80,costText:"ðŸª™3",costSymbol:"U.webp,R.webp",config:{targets:["self","buddy","pond"],strength:{type:"number",label:"Strength",value:5,min:1,max:10}}},{name:"barrelRoll",label:"Barrel Roll",icon:"ðŸŽ¢",description:"Performs a barrel roll.",cost:10,costText:"ðŸª™1",costSymbol:"U.webp, R.webp",config:{targets:["self","buddy","pond"]}},{name:"death",label:"Death",icon:"ðŸ’€",description:"Causes the target to die.",cost:100,costText:"ðŸª™5",costSymbol:"B.webp,R.webp",config:{targets:["self","buddy"]}},{name:"confetti",label:"Confetti",icon:"ðŸŽ‰",description:"Covers the area in confetti.",cost:20,costText:"ðŸª™2",costSymbol:"R.webp, W.webp",config:{targets:["self","buddy","pond"],particleCount:{type:"number",label:"Particle Count",value:100,min:10,max:500},duration:{type:"number",label:"Duration (seconds)",value:5,min:1,max:10}}},{name:"rainbow",label:"Rainbow",icon:"ðŸŒˆ",description:"Creates a beautiful rainbow.",cost:30,costText:"ðŸª™2",costSymbol:"U.webp,G.webp, W.webp, R.webp",config:{targets:["self","buddy","pond"],duration:{type:"number",label:"Duration (seconds)",value:5,min:1,max:10}}},{name:"alert",label:"Alert",icon:"ðŸ“¢",description:"Displays a custom message.",cost:10,costText:"ðŸª™1",costSymbol:"W.webp",config:{targets:["self","buddy"],text:{type:"text",label:"Message",value:"You have been cursed!"}}},{name:"logout",label:"Logout",icon:"ðŸšª",description:"Forces the target to log out.",cost:250,costText:"ðŸª™5",costSymbol:"B.webp",config:{}}],curses:[{name:"babel",label:"Babel.js",icon:"ðŸ—£ï¸",description:"Scrambles communication.",cost:120,costText:"ðŸª™3",costSymbol:"U.webp, B.webp",config:{targets:["self"],duration:{type:"number",label:"Curse Duration",value:1,min:1,max:5}}},{name:"riddikulus",label:"Riddikulus",icon:"ðŸ˜‚",description:"Turns fears into something funny.",cost:60,costText:"ðŸª™2",costSymbol:"U.webp, B.webp",config:{targets:["self"],duration:{type:"number",label:"Duration (seconds)",value:1,min:1,max:5}}},{name:"no-uploads",label:"No Uploads",icon:"ðŸš«",description:"Prevents uploads for a duration.",cost:150,costText:"ðŸª™5",costSymbol:"B.webp, W.webp",config:{duration:{type:"number",label:"Curse Duration",value:1,min:1,max:5}}},{name:"banhammer",label:"Banhammer",icon:"ðŸ”¨",description:"Temporarily bans the target.",cost:1e3,costText:"ðŸª™10",costSymbol:"W.webp,B.webp",config:{duration:{type:"number",label:"Ban Duration (seconds)",value:600,min:300,max:86400}}}],memes:[{name:"chicken-jockey",label:"Chicken Jockey",icon:"ðŸ”",description:"Summons a chicken jockey.",cost:10,costText:"ðŸª™1",costSymbol:"G.webp",config:{targets:["self","buddy","pond"],duration:{type:"number",label:"Duration (seconds)",value:5,min:1,max:10}}},{name:"hamster-dance",label:"Hamster Dance",icon:"ðŸ¹",description:"Plays a funny hamster dance sound.",cost:10,costText:"ðŸª™1",costSymbol:"G.webp",config:{targets:["self","buddy","pond"],volume:{type:"number",label:"Volume",value:5,min:1,max:10}}},{name:"cappuccino-assassino",label:"Cappuccino Assassino",icon:"â˜•",description:"Summons a cappuccino assassin.",cost:10,costText:"ðŸª™1",costSymbol:"B.webp, R.webp",config:{targets:["self","buddy","pond"],duration:{type:"number",label:"Duration (seconds)",value:5,min:1,max:10}}},{name:"peanut-butter-jelly-time",label:"Peanut Butter Jelly Time",icon:"ðŸž",description:"Plays a funny peanut butter jelly time sound.",cost:10,costText:"ðŸª™1",costSymbol:"R.webp, G.webp",config:{targets:["self","buddy","pond"],volume:{type:"number",label:"Volume",value:5,min:1,max:10}}}]};async function t(t,s){const l=$(t);let a=e.spells.concat(e.memes).concat(e.curses).find((e=>e.name===s.spell));if(a&&a.costSymbol){let e=a.costSymbol.split(","),t="";e.forEach((e=>{let o=`<img src="/v5/apps/based/spellbook/assets/cost-symbols/${e.trim()}" class="spell-cost-symbol" />`;t+=o})),l.find(".card-spell-cost").html(t)}l.on("click",(e=>{e.preventDefault(),e.stopPropagation(),"spells"!==s.spellType&&"memes"!==s.spellType||o.call(this,s)}));let n=s.target;s.target===s.castedBy&&(n="myself.");let i="an Invocation";if("curses"===s.spellType&&(i="a Curse"),"memes"===s.spellType&&(i="a Meme"),l.find(".card-spell-target").text(`I cast ${i} on `+n),l.find(".card-spell-name").text(s.spellLabel),"curses"!==s.spellType&&l.find(".card-spell-duration").remove(),s.expiry){const e=l.find(".card-spell-duration .countdown-date");e.data("ctime",s.message.ctime),this.bp.apps.ui.countdownManager.startCountdown(e,s.expiry,(function(e){e.parent().text("Curse has Expired.")}))}"curses"===s.spellType&&s.castedBy===this.bp.me&&(l.find(".card-spell-cure").removeClass("hidden"),l.find(".cure-spell").on("click",(async e=>{e.preventDefault(),e.stopPropagation();let t=s.target,o=s.spell;console.log("Cure spell clicked",t,o),await this.bp.load("spellbook"),await this.bp.apps.spellbook.castSpell(s.targetType,s.target,"cure",{type:"spells"})})));const c=new Date,r=new Date(s.message.ctime),p=(c.getTime()-r.getTime())/1e3;let b=s.message,m=bp.get("processedCards")||[];if(!(m.includes(b.uuid)||p>10)){if(m.push(b.uuid),m.length>1e3&&(m=m.slice(-1e3)),bp.set("processedCards",m),"buddy"===s.targetType&&s.target===this.bp.me&&"pond"!==b.type)try{await o.call(this,s)}catch(e){console.error("Error running spell:",e)}if("pond"===s.targetType)try{await o.call(this,s)}catch(e){console.error("Error running spell:",e)}}}async function o(e){try{(await this.bp.importModule(`/v5/apps/based/spellbook/spells/${e.spell}/${e.spell}.js`,{},!1)).default.call(this)}catch(e){console.log("Error importing spell module:",e)}}export{t as default};
//# sourceMappingURL=spell-card.js.map
