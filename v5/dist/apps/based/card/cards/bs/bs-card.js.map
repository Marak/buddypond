{"version":3,"file":"bs-card.js","sources":["../../../../../../apps/based/card/cards/bs/bs-card.js"],"sourcesContent":["// TODO: this shows all bs commands\n// TODO: the bs card should probably be for running a bs command, not listing them\n// TODO: we could use the same card for both, switching on the context\n// TODO: might want to create a separate card bs-command, and not use bp-app ( for now )\n// we could add a conditional to see if the bs command is an app or a script, not that important ( possibly )\nexport default function applyData(el, data, cardClass, parent) {\n\n    // this is bs-card, no apps-card\n    const apps = this.bp.apps.desktop.apps;\n    let bs = this.bp.apps.buddyscript.parseCommand(data.command);\n    /*\n    console.log('icon', icon);\n    */\n\n    if (bs.commandData) {\n        \n    }\n    let commandData = bs.commandData?.object || {};\n\n    //console.log('commandData', commandData);\n    let icon = commandData.icon || 'fa fa-terminal';\n    let iconPath = `/desktop/assets/images/icons/icon_${icon}_64.png`\n    \n    const commands = this.bp.apps.buddyscript.commands;\n\n    const commandSet = Object.keys(commands);\n    // console.log(\"commands\", commands);\n    // console.log('commandSet', commandSet);\n\n    const $el = $(el);\n\n    let bsInput = bs.command || '';\n    // alert(action)\n    // hide the apps commands\n\n    // set .card-bs-app-image src to iconPath\n    $el.find('.card-bs-app-image').attr('src', iconPath);\n\n    // TODO: click on image should run the command\n    $el.find('.card-bs-app-image').on('click', (e) => {\n        e.stopPropagation(); // Prevent the click from propagating to the card\n        e.preventDefault(); // Prevent default action\n\n        let aimInput = parent.content.querySelector('.aim-input');\n        let sendButton = parent.content.querySelector('.aim-send-btn');\n        console.log('aimInput', aimInput, sendButton);\n        if (aimInput) {\n            aimInput.value = data.command;\n            aimInput.dispatchEvent(new Event('input', { bubbles: true })); // Trigger input event\n        }\n        if (sendButton) {\n            sendButton.click(); // Simulate button click\n        }\n    });\n\n\n    // renders a form to execute a single command\n    // replace the first \\ with /\n    bsInput = bsInput.replace(/\\\\/g, '/');\n    $el.find('.card-bs-app-text-command').text(data.command);\n\n    // add a click handler to the input\n    $el.find('.card-bs-app-submit').on('click', (e) => {\n        e.stopPropagation(); // Prevent the click from propagating to the card\n        e.preventDefault(); // Prevent default action\n\n\n        let aimInput = parent.content.querySelector('.aim-input');\n        let sendButton = parent.content.querySelector('.aim-send-btn');\n        console.log('aimInput', aimInput, sendButton);\n        if (aimInput) {\n            aimInput.value = data.command;\n            aimInput.dispatchEvent(new Event('input', { bubbles: true })); // Trigger input event\n        }\n        if (sendButton) {\n            sendButton.click(); // Simulate button click\n        }\n\n\n\n    });\n\n\n}"],"names":["applyData","el","data","cardClass","parent","this","bp","apps","desktop","bs","buddyscript","parseCommand","command","commandData","iconPath","object","icon","commands","$el","$","bsInput","find","attr","on","e","stopPropagation","preventDefault","aimInput","content","querySelector","sendButton","console","log","value","dispatchEvent","Event","bubbles","click","replace","text"],"mappings":"AAKe,SAASA,EAAUC,EAAIC,EAAMC,EAAWC,GAGtCC,KAAKC,GAAGC,KAAKC,QAAQD,KAClC,IAAIE,EAAKJ,KAAKC,GAAGC,KAAKG,YAAYC,aAAaT,EAAKU,SAKhDH,EAAGI,YAGP,IAIIC,EAAW,sCAJGL,EAAGI,aAAaE,QAAU,CAAE,GAGvBC,MAAQ,0BAGdX,KAAKC,GAAGC,KAAKG,YAAYO,SAM1C,MAAMC,EAAMC,EAAElB,GAEd,IAAImB,EAAUX,EAAGG,SAAW,GAK5BM,EAAIG,KAAK,sBAAsBC,KAAK,MAAOR,GAG3CI,EAAIG,KAAK,sBAAsBE,GAAG,SAAUC,IACxCA,EAAEC,kBACFD,EAAEE,iBAEF,IAAIC,EAAWvB,EAAOwB,QAAQC,cAAc,cACxCC,EAAa1B,EAAOwB,QAAQC,cAAc,iBAC9CE,QAAQC,IAAI,WAAYL,EAAUG,GAC9BH,IACAA,EAASM,MAAQ/B,EAAKU,QACtBe,EAASO,cAAc,IAAIC,MAAM,QAAS,CAAEC,SAAS,MAErDN,GACAA,EAAWO,WAOnBjB,EAAUA,EAAQkB,QAAQ,MAAO,KACjCpB,EAAIG,KAAK,6BAA6BkB,KAAKrC,EAAKU,SAGhDM,EAAIG,KAAK,uBAAuBE,GAAG,SAAUC,IACzCA,EAAEC,kBACFD,EAAEE,iBAGF,IAAIC,EAAWvB,EAAOwB,QAAQC,cAAc,cACxCC,EAAa1B,EAAOwB,QAAQC,cAAc,iBAC9CE,QAAQC,IAAI,WAAYL,EAAUG,GAC9BH,IACAA,EAASM,MAAQ/B,EAAKU,QACtBe,EAASO,cAAc,IAAIC,MAAM,QAAS,CAAEC,SAAS,MAErDN,GACAA,EAAWO,UAQvB"}