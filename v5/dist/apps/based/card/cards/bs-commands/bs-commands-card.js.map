{"version":3,"file":"bs-commands-card.js","sources":["../../../../../../apps/based/card/cards/bs-commands/bs-commands-card.js"],"sourcesContent":["// TODO: this shows all bs commands\n// TODO: the bs card should probably be for running a bs command, not listing them\n// TODO: we could use the same card for both, switching on the context\n// TODO: might want to create a separate card bs-command, and not use bp-app ( for now )\n// we could add a conditional to see if the bs command is an app or a script, not that important ( possibly )\nexport default function applyData(el, data, cardClass, parent) {\n\n    // this is bs-card, no apps-card\n    //const apps = this.bp.apps.desktop.apps;\n    //const commandSet = Object.keys(apps).sort();\n    let bsCommands = this.bp.apps.buddyscript.commands;\n    const commandSet = Object.keys(bsCommands);\n\n    const $el = $(el);\n    const appsCommands = $el.find('.card-bs-commands-commands');\n    console.log('commandSet', commandSet);\n    //console.log('apps', apps);\n    //let action = data.context.action || 'list-all';\n    //let bsInput = data.context.input || '';\n    // alert(action)\n\n    commandSet.sort();\n    $el.find('.card-bs-app').remove();\n    // Add command elements\n    commandSet.forEach(command => {\n        //let app = apps[command];\n        const commandText = `${command}`;\n        let _command = bsCommands[command];\n        if (!_command || _command?.object?.display === false) {\n            //console.warn(`Command ${command} not found in bsCommands`);\n            return; // Skip if command is not found\n        }\n        let commandDescription = bsCommands[command]?.object?.description || '';\n        console.log('commandText', commandText, 'commandDescription', commandDescription, bsCommands[command]);\n        //const appsText = command.appsText;\n        const commandDiv = document.createElement('div');\n        commandDiv.className = 'card-bs-commands-command';\n        commandDiv.innerHTML = `\n            <span class=\"card-bs-commands-command-text\">/${commandText}</span>\n            <span class=\"card-bs-commands-command-description\">${commandDescription}</span>\n        `;\n\n        // <span class=\"card-bs-commands-command-apps\">${appsText}</span>\n        // Add click handler for commands\n        commandDiv.addEventListener('click', () => {\n            // Stub action: Log command execution (replace with actual command execution logic)\n            // console.log(`Executing command: ${commandText}`);\n            // Optional: Trigger a visual feedback\n            commandDiv.classList.add('card-bs-commands-clicked');\n            // console.log('running command', command, parent);\n            // TODO: run bs command with chatWindow as context?\n            this.bp.apps.buddyscript.executeCommand(command, {}, {\n                chatWindow: parent,\n                contextName: parent.currentActiveContext || parent.context,\n                windowType: parent.type\n            });\n            //this.bp.open(command);\n            setTimeout(() => commandDiv.classList.remove('card-bs-commands-clicked'), 200);\n        });\n        // console.log('commandDiv', commandDiv);\n        appsCommands.append(commandDiv);\n    });\n\n    // Add close button functionality\n    $el.find('.card-bs-commands-close-btn').on('click', () => {\n        $el.hide(); // Hide the apps card (replace with your preferred close logic)\n    });\n\n}"],"names":["applyData","el","data","cardClass","parent","bsCommands","this","bp","apps","buddyscript","commands","commandSet","Object","keys","$el","$","appsCommands","find","console","log","sort","remove","forEach","command","commandText","_command","object","display","commandDescription","description","commandDiv","document","createElement","className","innerHTML","addEventListener","classList","add","executeCommand","chatWindow","contextName","currentActiveContext","context","windowType","type","setTimeout","append","on","hide"],"mappings":"AAKe,SAASA,EAAUC,EAAIC,EAAMC,EAAWC,GAKnD,IAAIC,EAAaC,KAAKC,GAAGC,KAAKC,YAAYC,SAC1C,MAAMC,EAAaC,OAAOC,KAAKR,GAEzBS,EAAMC,EAAEd,GACRe,EAAeF,EAAIG,KAAK,8BAC9BC,QAAQC,IAAI,aAAcR,GAM1BA,EAAWS,OACXN,EAAIG,KAAK,gBAAgBI,SAEzBV,EAAWW,SAAQC,IAEf,MAAMC,EAAc,GAAGD,IACvB,IAAIE,EAAWpB,EAAWkB,GAC1B,IAAKE,IAA0C,IAA9BA,GAAUC,QAAQC,QAE/B,OAEJ,IAAIC,EAAqBvB,EAAWkB,IAAUG,QAAQG,aAAe,GACrEX,QAAQC,IAAI,cAAeK,EAAa,qBAAsBI,EAAoBvB,EAAWkB,IAE7F,MAAMO,EAAaC,SAASC,cAAc,OAC1CF,EAAWG,UAAY,2BACvBH,EAAWI,UAAY,8DAC4BV,4EACMI,qBAKzDE,EAAWK,iBAAiB,SAAS,KAIjCL,EAAWM,UAAUC,IAAI,4BAGzB/B,KAAKC,GAAGC,KAAKC,YAAY6B,eAAef,EAAS,GAAI,CACjDgB,WAAYnC,EACZoC,YAAapC,EAAOqC,sBAAwBrC,EAAOsC,QACnDC,WAAYvC,EAAOwC,OAGvBC,YAAW,IAAMf,EAAWM,UAAUf,OAAO,6BAA6B,QAG9EL,EAAa8B,OAAOhB,MAIxBhB,EAAIG,KAAK,+BAA+B8B,GAAG,SAAS,KAChDjC,EAAIkC,SAGZ"}