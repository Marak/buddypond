class e{constructor(e){this.bp=e,this.handleFetchResult=this.handleFetchResult.bind(this)}handleFetchResult(e){return e.ok?e.json():e.json().then((t=>{if(t.error&&t.error.message)throw new Error(e.url+" "+e.status+" "+t.error.message)})).catch((e=>{throw this.showErrorMessage(e),e}))}showErrorMessage(e){console.log("Error:",e);const t=document.getElementById("error-message");t&&(t.textContent=e,t.style.display="block")}createCheckoutSession(e){return fetch("http://192.168.200.59/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:e})}).then(this.handleFetchResult)}setupPlanButton(e,t,s){let o=document.createElement("button");o.id=t,o.textContent="Subscribe",console.log("button",o),e.appendChild(o),console.log(t,s),o.addEventListener("click",(e=>{this.createCheckoutSession(s).then((e=>{console.log("tttt",this.stripe),this.stripe.redirectToCheckout({sessionId:e.sessionId}).catch((e=>{console.error("Redirect to checkout failed: ",e)}))})).catch((e=>{console.error("Failed to create session: ",e)}))}))}async init(){await this.bp.importModule("https://js.stripe.com/v3/",{},!1),this.stripe=Stripe(this.isLive?"pk_live_51QZ5PDGHoMV8ArsVWCUAseF6dAqUyabaC45CNJ6UoqLAbVNJp1kAC7AWUhE8HfeiJyBrF6gc139BNvV38muOhEzo00emukO4jA":"pk_test_51QZ5PDGHoMV8ArsVFfwyeXad8bjroyqlXk5FRknbzny0dlW2VlZzOPFEbuuLAfJKADctxK6rj7ARV8oRANWRkjNS00mNRDgfdt");let e="price_1QZ61XGHoMV8ArsVVW1b6WB0",t="price_456",s="price_789",o=$("#buddybux").get(0);this.setupPlanButton(o,"developer-plan-btn",e),this.setupPlanButton(o,"business-plan-btn",t),this.setupPlanButton(o,"enterprise-plan-btn",s)}}export{e as default};
//# sourceMappingURL=stripe.js.map
