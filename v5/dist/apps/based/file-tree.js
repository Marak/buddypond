class e{constructor(e,t={}){this.bp=e}async init(){await this.bp.appendCSS("/v5/apps/based/file-tree/file-tree.css")}create(e,t){return this.options={onFileSelect:t.onFileSelect||(e=>console.log("File selected:",e)),onFolderToggle:t.onFolderToggle||((e,t)=>console.log("Folder toggled:",e,t)),indent:t.indent||20},this.container="string"==typeof e?document.querySelector(e):e,this.treeRoot=document.createElement("div"),this.treeRoot.className="bp-filetree-container",this.container.appendChild(this.treeRoot),this.handleClick=this.handleClick.bind(this),this.renderItem=this.renderItem.bind(this),this.treeRoot.addEventListener("click",this.handleClick),this}handleClick(e){$(".bp-file-explorer-drag-upload").hide();const t=e.target.closest(".bp-filetree-item");if(!t)return;const n="folder"===t.dataset.type,i=t.dataset.path;if(n){const e=t.classList.toggle("bp-filetree-expanded");t.nextElementSibling.style.display=e?"block":"none",this.options.onFolderToggle(i,e)}else this.options.onFileSelect(i,t)}getFileIcon(e){const t={js:"ðŸ“„",json:"ðŸ“‹",html:"ðŸŒ",css:"ðŸŽ¨",png:"ðŸ–¼ï¸",jpg:"ðŸ–¼ï¸",pdf:"ðŸ“‘",default:"ðŸ“„"};return t[e.split(".").pop().toLowerCase()]||t.default}renderItem(e,t=0){const n=document.createElement("div");n.className="bp-filetree-item-container";const i=document.createElement("div");i.className="bp-filetree-item",i.dataset.path=e.path,i.dataset.type=e.type,i.style.paddingLeft=t*this.options.indent+"px";const o=document.createElement("span");o.className="bp-filetree-icon",o.textContent="folder"===e.type?"ðŸ“":this.getFileIcon(e.name);const l=document.createElement("span");if(l.className="bp-filetree-name",l.textContent=e.name,i.appendChild(o),i.appendChild(l),n.appendChild(i),"folder"===e.type&&Array.isArray(e.children)){const i=document.createElement("div");i.className="bp-filetree-children",i.style.display="none",e.children.forEach((e=>{i.appendChild(this.renderItem(e,t+1))})),n.appendChild(i)}return n}toggleFolder(e){const t=this.treeRoot.querySelector(`.bp-filetree-item[data-path="${e}"]`);if(!t)return;const n=t.classList.toggle("bp-filetree-expanded");t.nextElementSibling.style.display=n?"block":"none",this.options.onFolderToggle(e,n)}render(e){this.treeRoot.innerHTML="",e.forEach((e=>{this.treeRoot.appendChild(this.renderItem(e))}))}destroy(){this.treeRoot.removeEventListener("click",this.handleClick),this.container.removeChild(this.treeRoot)}}export{e as default};
//# sourceMappingURL=file-tree.js.map
