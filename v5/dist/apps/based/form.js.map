{"version":3,"file":"form.js","sources":["../../../apps/based/form/lib/Form.js","../../../apps/based/form/lib/FormManager.js","../../../apps/based/form/form.js"],"sourcesContent":["export default class Form {\n    constructor(bp, formType, formData) {\n      this.bp = bp;\n      this.formType = formType;\n      this.formData = formData;\n      this.htmlContent = '';\n      this.cssContent = '';\n      this.applyData = null; // Initially null, will be set when JS is loaded\n    }\n  \n    async load() {\n\n      // bp loader will not re-load assets if they are already loaded\n      const htmlUrl = `/v5/apps/based/form/forms/${this.formType}/${this.formType}-form.html`;\n      const cssUrl = `/v5/apps/based/form/forms/${this.formType}/${this.formType}-form.css`;\n      const jsUrl = `/v5/apps/based/form/forms/${this.formType}/${this.formType}-form.js`;\n      this.htmlContent = await this.bp.load(htmlUrl);\n      this.cssContent = await this.bp.load(cssUrl);\n      // Load the JS module as a function and assign it to this.applyData\n      const applyDataModule = await this.bp.importModule(jsUrl, {}, false); // Assumes this.bp.load can execute and return modules\n      // console.log(jsUrl, 'applyDataModule', applyDataModule);\n      this.applyData = applyDataModule.default.bind(this);\n      \n      // now we will check eaach property we just set, if any are undefined or null\n      // we will default them to render a basic form with JSON.stringify of form data\n      if (!this.htmlContent) {\n        this.htmlContent = `<div class=\"form\">${JSON.stringify(this.formData)}</div>`;\n      }\n      if (!this.cssContent) {\n        //maybe remove\n        this.cssContent = `.form { border: 1px solid black; padding: 1em; }`;\n      }\n      if (!this.applyData) {\n        this.applyData = (container, formData) => {\n          container.querySelector('.form').textContent = JSON.stringify(formData);\n        };\n      }\n\n\n    }\n  \n    render(container) {\n      const styleTag = document.createElement('style');\n      styleTag.textContent = this.cssContent;\n      container.appendChild(styleTag);\n  \n      const formContainer = document.createElement('div');\n      formContainer.innerHTML = this.htmlContent;\n      container.appendChild(formContainer);\n  \n      // Execute the dynamically loaded applyData function if available\n      if (this.applyData && typeof this.applyData === 'function') {\n        this.applyData(formContainer, this.formData);\n      }\n    }\n  }\n  ","import Form from './Form.js';\n\nexport default class FormManager {\n    constructor(bp) {\n      this.bp = bp;\n      this.forms = [];\n    }\n  \n    async loadForm(formType, formData) {\n      const form = new Form(this.bp, formType, formData);\n      await form.load();\n      this.forms.push(form);\n      return form;\n    }\n  \n    renderAll(container) {\n      this.forms.forEach(form => form.render(container));\n    }\n  }\n  ","// various \"forms\" for messages\n// message is can have a form-type, which gives it special properties\n// such as multimedia, audio, video, etc.\n// or rendering special UI elements\n// messages are usually from chat, but displaying forms can be applied to any text\nimport FormManager from './lib/FormManager.js';\n\nexport default class Form {\n  constructor(bp) {\n    this.bp = bp;\n  }\n\n  async init() {\n\n    this.formManager = new FormManager(this.bp);\n  }\n\n}"],"names":["Form$1","constructor","bp","formType","formData","this","htmlContent","cssContent","applyData","load","htmlUrl","cssUrl","jsUrl","applyDataModule","importModule","default","bind","JSON","stringify","container","querySelector","textContent","render","styleTag","document","createElement","appendChild","formContainer","innerHTML","FormManager","forms","loadForm","form","Form","push","renderAll","forEach","init","formManager"],"mappings":"AAAe,IAAAA,EAAA,MACX,WAAAC,CAAYC,EAAIC,EAAUC,GACxBC,KAAKH,GAAKA,EACVG,KAAKF,SAAWA,EAChBE,KAAKD,SAAWA,EAChBC,KAAKC,YAAc,GACnBD,KAAKE,WAAa,GAClBF,KAAKG,UAAY,IACvB,CAEI,UAAMC,GAGJ,MAAMC,EAAU,6BAA6BL,KAAKF,YAAYE,KAAKF,qBAC7DQ,EAAS,6BAA6BN,KAAKF,YAAYE,KAAKF,oBAC5DS,EAAQ,6BAA6BP,KAAKF,YAAYE,KAAKF,mBACjEE,KAAKC,kBAAoBD,KAAKH,GAAGO,KAAKC,GACtCL,KAAKE,iBAAmBF,KAAKH,GAAGO,KAAKE,GAErC,MAAME,QAAwBR,KAAKH,GAAGY,aAAaF,EAAO,CAAA,GAAI,GAE9DP,KAAKG,UAAYK,EAAgBE,QAAQC,KAAKX,MAIzCA,KAAKC,cACRD,KAAKC,YAAc,qBAAqBW,KAAKC,UAAUb,KAAKD,mBAEzDC,KAAKE,aAERF,KAAKE,WAAa,oDAEfF,KAAKG,YACRH,KAAKG,UAAY,CAACW,EAAWf,KAC3Be,EAAUC,cAAc,SAASC,YAAcJ,KAAKC,UAAUd,IAKxE,CAEI,MAAAkB,CAAOH,GACL,MAAMI,EAAWC,SAASC,cAAc,SACxCF,EAASF,YAAchB,KAAKE,WAC5BY,EAAUO,YAAYH,GAEtB,MAAMI,EAAgBH,SAASC,cAAc,OAC7CE,EAAcC,UAAYvB,KAAKC,YAC/Ba,EAAUO,YAAYC,GAGlBtB,KAAKG,WAAuC,mBAAnBH,KAAKG,WAChCH,KAAKG,UAAUmB,EAAetB,KAAKD,SAE3C,GCpDe,MAAMyB,EACjB,WAAA5B,CAAYC,GACVG,KAAKH,GAAKA,EACVG,KAAKyB,MAAQ,EACnB,CAEI,cAAMC,CAAS5B,EAAUC,GACvB,MAAM4B,EAAO,IAAIC,EAAK5B,KAAKH,GAAIC,EAAUC,GAGzC,aAFM4B,EAAKvB,OACXJ,KAAKyB,MAAMI,KAAKF,GACTA,CACb,CAEI,SAAAG,CAAUhB,GACRd,KAAKyB,MAAMM,SAAQJ,GAAQA,EAAKV,OAAOH,IAC7C,ECVe,MAAMc,EACnB,WAAAhC,CAAYC,GACVG,KAAKH,GAAKA,CACd,CAEE,UAAMmC,GAEJhC,KAAKiC,YAAc,IAAIT,EAAYxB,KAAKH,GAC5C"}