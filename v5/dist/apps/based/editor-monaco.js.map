{"version":3,"file":"editor-monaco.js","sources":["../../../apps/based/editor-monaco/editor-monaco.js"],"sourcesContent":["\nexport default class MonacoWrapper {\n    constructor(bp, options = {}) {\n        this.editor = null;\n        this.bp = bp;\n        this.options = options;\n    }\n\n    async init() {\n\n        await this.bp.appendScript('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.2/min/vs/loader.js');\n        await this.bp.appendCSS('/v5/apps/based/editor-monaco/editor-monaco.css');\n\n\n        return this;\n\n    }\n\n    async open () {\n\n        let clientWidth = document.documentElement.clientWidth;\n        let clientHeight = document.documentElement.clientHeight - 70;\n        if (!this.editorWindow) {\n            this.editorWindow = this.bp.apps.ui.windowManager.createWindow({\n                id: 'monaco-editor',\n                title: 'VSCode',\n                x: 0,\n                y: 20,\n                width: clientWidth,\n                height: clientHeight,\n                minWidth: 200,\n                minHeight: 200,\n                parent: $('#desktop')[0],\n                //context: uddyname || b'default',\n                //content: profileContent,\n                resizable: true,\n                minimizable: true,\n                maximizable: true,\n                closable: true,\n                focusable: true,\n                maximized: false,\n                minimized: false,\n                onClose: () => {\n                    this.editorWindow = null;\n                    // remove the editor\n                    this.dispose();\n\n                }\n            });\n\n            this.editorWindow.content.style.flexDirection = 'row';\n\n            this.editorHolder = document.createElement('div');\n            this.editorHolder.className = 'editor-holder';\n\n\n            //this.fileTree = document.createElement('div');\n            //this.fileTree.className = 'file-tree';\n            //this.editorWindow.content.appendChild(this.fileTree);\n            this.editorWindow.content.appendChild(this.editorHolder);\n\n\n        }\n\n        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.2/min/vs' } });\n\n        this.create(this.editorWindow.content, this.options.content || \"\");\n\n\n    }\n\n    async create(el, value = \"\") {\n        let that = this;\n\n\n        return new Promise((resolve, reject) => {\n\n            require(['vs/editor/editor.main'], function () {\n                that.editor = monaco.editor.create(el, {\n                    value: value,\n                    language: 'html',\n                    theme: 'vs-dark',\n                    automaticLayout: true,\n                });\n    \n\n                resolve(that);\n    \n            });\n    \n        });\n\n\n    }\n\n    setValue(content = \"\") {\n        if (this.editor) {\n            this.editor.setValue(content);\n        }\n    }\n\n    getValue() {\n        return this.editor ? this.editor.getValue() : \"\";\n    }\n\n    dispose() {\n        if (this.editor) {\n            this.editor.dispose();\n        }\n    }\n}"],"names":["MonacoWrapper","constructor","bp","options","this","editor","init","appendScript","appendCSS","open","clientWidth","document","documentElement","clientHeight","editorWindow","apps","ui","windowManager","createWindow","id","title","x","y","width","height","minWidth","minHeight","parent","$","resizable","minimizable","maximizable","closable","focusable","maximized","minimized","onClose","dispose","content","style","flexDirection","editorHolder","createElement","className","appendChild","require","config","paths","vs","create","el","value","that","Promise","resolve","reject","monaco","language","theme","automaticLayout","setValue","getValue"],"mappings":"AACe,MAAMA,EACjB,WAAAC,CAAYC,EAAIC,EAAU,IACtBC,KAAKC,OAAS,KACdD,KAAKF,GAAKA,EACVE,KAAKD,QAAUA,CACvB,CAEI,UAAMG,GAMF,aAJMF,KAAKF,GAAGK,aAAa,sFACrBH,KAAKF,GAAGM,UAAU,kDAGjBJ,IAEf,CAEI,UAAMK,GAEF,IAAIC,EAAcC,SAASC,gBAAgBF,YACvCG,EAAeF,SAASC,gBAAgBC,aAAe,GACtDT,KAAKU,eACNV,KAAKU,aAAeV,KAAKF,GAAGa,KAAKC,GAAGC,cAAcC,aAAa,CAC3DC,GAAI,gBACJC,MAAO,SACPC,EAAG,EACHC,EAAG,GACHC,MAAOb,EACPc,OAAQX,EACRY,SAAU,IACVC,UAAW,IACXC,OAAQC,EAAE,YAAY,GAGtBC,WAAW,EACXC,aAAa,EACbC,aAAa,EACbC,UAAU,EACVC,WAAW,EACXC,WAAW,EACXC,WAAW,EACXC,QAAS,KACLhC,KAAKU,aAAe,KAEpBV,KAAKiC,aAKbjC,KAAKU,aAAawB,QAAQC,MAAMC,cAAgB,MAEhDpC,KAAKqC,aAAe9B,SAAS+B,cAAc,OAC3CtC,KAAKqC,aAAaE,UAAY,gBAM9BvC,KAAKU,aAAawB,QAAQM,YAAYxC,KAAKqC,eAK/CI,QAAQC,OAAO,CAAEC,MAAO,CAAEC,GAAM,wEAEhC5C,KAAK6C,OAAO7C,KAAKU,aAAawB,QAASlC,KAAKD,QAAQmC,SAAW,GAGvE,CAEI,YAAMW,CAAOC,EAAIC,EAAQ,IACrB,IAAIC,EAAOhD,KAGX,OAAO,IAAIiD,SAAQ,CAACC,EAASC,KAEzBV,QAAQ,CAAC,0BAA0B,WAC/BO,EAAK/C,OAASmD,OAAOnD,OAAO4C,OAAOC,EAAI,CACnCC,MAAOA,EACPM,SAAU,OACVC,MAAO,UACPC,iBAAiB,IAIrBL,EAAQF,EAExB,MAKA,CAEI,QAAAQ,CAAStB,EAAU,IACXlC,KAAKC,QACLD,KAAKC,OAAOuD,SAAStB,EAEjC,CAEI,QAAAuB,GACI,OAAOzD,KAAKC,OAASD,KAAKC,OAAOwD,WAAa,EACtD,CAEI,OAAAxB,GACQjC,KAAKC,QACLD,KAAKC,OAAOgC,SAExB"}