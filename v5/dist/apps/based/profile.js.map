{"version":3,"file":"profile.js","sources":["../../../apps/based/profile/lib/wallpapers.js","../../../apps/based/profile/lib/theme-editor.js","../../../apps/based/profile/lib/api-keys.js","../../../apps/based/profile/lib/updateProfilePicture.js","../../../apps/based/profile/profile.js","../../../apps/based/profile/lib/bindUIEvents.js","../../../apps/based/profile/lib/user-settings.js"],"sourcesContent":["const wallpapers = {};\n\nwallpapers.legacyWallpapers = function (bp) {\n\n\n  if (bp.apps.wallpaper) {\n    renderWallpaperTypes($('.wallpaperTypes'));\n    bp.on('settings::wallpaper_color', 'update-wallpaper-color-picker', function(color){\n      $('.wallpaperOptionColor').setColor(color)\n      $('.simpleColorDisplay').html(color)\n\n      // update the color of the active wallpaper\n      let activeName = bp.apps.wallpaper.wallpaperManager.active;\n      let active = bp.apps.wallpaper.wallpaperManager.wallpapers[activeName];\n      if (active) {\n        active.changeColor(color);\n      } else {\n        console.log('cannot change color, active wallpaper not found', activeName)\n      }\n    });\n\n    function onSelect (context, hex) {\n      bp.set('wallpaper_color', '#' + hex);\n    }\n\n    function onCellEnter (context, hex) {\n      bp.set('wallpaper_color', '#' + hex);\n    }\n\n    $('.wallpaperOptionColor').simpleColor({\n      boxHeight: 20,\n      cellWidth: 16,\n      cellHeight: 16,\n      defaultColor: desktop.settings.wallpaper_color || '#008F11',\n      inputCSS: { 'border-radius': '4px', 'font-size': '4px', 'width': '10px' },\n      chooserCSS: { 'border': '1px solid #660033', 'top': '20px' },\n      displayCSS: {  },\n      displayColorCode: true,\n      livePreview: true,\n      insert: 'before',\n      onSelect: function (hex, element) {\n        onSelect(bp.apps.wallpaper.active, hex);\n      },\n      onCellEnter: function (hex, element) {\n        onCellEnter(bp.apps.wallpaper.active, hex);\n      },\n      onClose: function (element) {\n      }\n    });\n\n\n    $('input[name=wallpaper_opt]').on('input', function () {\n      let radioValue = $('input[name=wallpaper_opt]:checked').val();\n      // update desktop.settings.wallpaper_name\n      bp.set('wallpaper_name', radioValue);\n    });\n\n\n  }\n\n}\n\nfunction renderWallpaperTypes (el) {\n    for (let w in bp.apps.wallpaper.wallpaperManager._wallpapers) {\n      let _wallpaper = bp.apps.wallpaper.wallpaperManager._wallpapers[w];\n      let checked = '';\n      if (w === desktop.settings.wallpaper_name) {\n        checked = 'checked';\n      }\n      let str = `\n      <input type=\"radio\" id=\"wallPaperRadio${w}\" name=\"wallpaper_opt\" class=\"wallpaper_opt\" value=\"${w}\" ${checked}>\n      <label for=\"wallPaperRadio${w}\">${_wallpaper.label}</label>\n      <br>\n      `;\n      el.append(str);\n    }\n  }\n\n  export default wallpapers;","export default function themeEditor(themeName) {\n    let themeData = this.bp.apps.themes.themes[themeName];\n    let themeStyles = themeData.styles || {};\n    let themeStylesTable = $('.theme-styles', this.profileWindow.content);\n    themeStylesTable.html(''); // clear table\n\n    // Create a deep copy so edits don't mutate original\n    let editableTheme = JSON.parse(JSON.stringify(themeData));\n\n    for (let styleName in themeStyles) {\n        let styleValue = themeStyles[styleName];\n        let row = $('<tr></tr>');\n        let propsCell = $('<td colspan=\"2\"></td>');\n\n        propsCell.append(`<div class=\"style-block\"><div class=\"style-title\">${styleName}</div>`);\n\n        for (let prop in styleValue) {\n            let val = styleValue[prop];\n            let inputId = `input_${styleName}_${prop}`.replace(/\\W+/g, '_');\n\n            let colorInput = '';\n            if (isColorProperty(prop, val)) {\n                let safeColor = val.startsWith('#') ? val : '#ffffff';\n                colorInput = `<input type=\"color\" value=\"${safeColor}\" data-style=\"${styleName}\" data-prop=\"${prop}\" class=\"color-picker\" />`;\n            }\n\n            propsCell.append(`\n        <div class=\"prop-row\">\n            <label class=\"prop-name\">${prop}:</label>\n            <input type=\"text\" id=\"${inputId}\" value=\"${val}\" data-style=\"${styleName}\" data-prop=\"${prop}\" />\n            ${colorInput}\n        </div>\n    `);\n            //  <button class=\"remove-prop-btn\" data-style=\"${styleName}\" data-prop=\"${prop}\">âœ•</button>\n\n        }\n\n        /*\n        propsCell.append(`\n            <div class=\"prop-row\">\n                <label class=\"prop-name\">+</label>\n                <input type=\"text\" class=\"new-prop-name\" placeholder=\"property\" data-style=\"${styleName}\" />\n                <input type=\"text\" class=\"new-prop-value\" placeholder=\"value\" data-style=\"${styleName}\" />\n                <button class=\"add-prop-btn\" data-style=\"${styleName}\">Add</button>\n            </div>\n        </div>`);\n        */\n\n\n        row.append(propsCell);\n        themeStylesTable.append(row);\n    }\n\n    // ðŸ” Listen to changes and update theme live\n    themeStylesTable.on('input', 'input[type=\"text\"], input.color-picker', function (e) {\n        // set dropdown to Custom\n        $('.themeSelect', this.profileWindow.content).val('Custom');\n        let style = $(e.target).data('style');\n        let prop = $(e.target).data('prop');\n        console.log('style', style, 'prop', prop);\n        if (!style || !prop) return;\n\n        let newValue = $(e.target).val();\n        // find the closest text input and set its value\n        if ($(e.target).hasClass('color-picker')) {\n            let closestTextInput = $(e.target).closest('.prop-row').find('input[type=\"text\"]');\n            closestTextInput.val(newValue);\n            // newValue = $(e.target).val();\n        }\n        editableTheme.styles[style][prop] = newValue;\n        console.log('editableTheme.styles', editableTheme);\n        editableTheme.name = 'Custom';\n        this.bp.apps.themes.applyTheme(editableTheme); // re-apply updated theme\n    }.bind(this));\n\n    // âž• Add new property\n    themeStylesTable.on('click', '.add-prop-btn', function (e) {\n        let style = $(e.target).data('style');\n        let row = $(e.target).closest('div');\n        let propInput = row.find('.new-prop-name');\n        let valInput = row.find('.new-prop-value');\n\n        let newProp = propInput.val().trim();\n        let newVal = valInput.val().trim();\n\n        if (newProp && newVal) {\n            editableTheme.styles[style][newProp] = newVal;\n            $('.themeSelect', this.profileWindow.content).trigger('change'); // re-render\n        }\n    }.bind(this));\n\n    // âŒ Remove property\n    themeStylesTable.on('click', '.remove-prop-btn', function (e) {\n        let style = $(e.target).data('style');\n        let prop = $(e.target).data('prop');\n        delete editableTheme.styles[style][prop];\n        $('.themeSelect', this.profileWindow.content).trigger('change'); // re-render\n    }.bind(this));\n\n    console.log('themeData', themeData);\n}\n\nfunction isColorProperty(prop, value) {\n    const colorProps = [\n        'color', 'background', 'background-color', 'border-color',\n        'outline-color', 'text-decoration-color', 'column-rule-color',\n        'fill', 'stroke'\n    ];\n\n    const isColorKey = colorProps.includes(prop.toLowerCase());\n\n    const colorRegex = /^#([0-9a-f]{3}|[0-9a-f]{6})$/i\n        || /^rgba?\\(.+\\)$/i\n        || /^hsla?\\(.+\\)$/i\n        || /^[a-z]+$/i; // named colors\n\n    const isColorValue = colorRegex.test(value);\n\n    return isColorKey || isColorValue;\n}\n","export default async function apiKeys() {\n    let roles = ['deploy', 'read', 'write', 'admin'];\n\n    // Populate role checkboxes\n    const roleBox = $('#bp-api-keys-roles');\n    roles.forEach(role => {\n        const id = `bp-api-role-${role}`;\n        let checked = '';\n\n        if (role === 'deploy') {\n            checked = 'checked'; // Default to deploy role being checked\n        }\n\n        roleBox.append(`\n      <label for=\"${id}\" class=\"bp-api-keys-role-label\">\n        <input type=\"checkbox\" name=\"roles\" value=\"${role}\" id=\"${id}\" ${checked} />\n        ${role}\n      </label>\n    `);\n    });\n\n    // Handle form submission\n    $('.bp-api-keys-form').on('submit', async function (e) {\n        e.preventDefault();\n        const form = $(this);\n        const name = form.find('input[name=\"name\"]').val();\n        const expiry = form.find('input[name=\"expiry\"]').val();\n        const roles = form.find('input[name=\"roles\"]:checked')\n            .map(function () { return this.value; })\n            .get();\n\n        if (!name || roles.length === 0) {\n            alert('Please provide a name and at least one role.');\n            return false;\n        }\n\n        try {\n            const newKey = await client.addApiKey(name, roles, expiry || null);\n\n            console.log('New API key created:', newKey);\n            renderApiKeys(); // Refresh key list\n        } catch (err) {\n            alert('Failed to create API key');\n            console.error(err);\n        }\n        return false;\n    });\n\n    async function renderApiKeys() {\n        const list = $('#bp-api-keys-list');\n        list.empty();\n        const apiKeys = await client.getApiKeys();\n\n        apiKeys.forEach((key) => {\n            const keyPrefix = 'Hidden, click \"Reveal\" to show API Key';\n            const roles = Array.isArray(key.roles) ? key.roles : (key.role ? [key.role] : []);\n            const created = new Date(key.ctime || key.created_at).toLocaleString();\n            const expiry = key.expiry ? new Date(key.expiry).toLocaleDateString() : 'Never';\n            const usage = key.usage ? `${key.usage} times` : 'Not used yet';\n\n            const li = $(`\n  <li class=\"bp-api-keys-list-item\">\n    <div class=\"bp-api-keys-card\">\n      <div class=\"bp-api-keys-header\">\n        <strong class=\"bp-api-keys-name\">${key.name}</strong>\n        <button class=\"bp-api-keys-revoke\" data-id=\"${key.id}\">Revoke</button>\n      </div>\n\n      <div class=\"bp-api-keys-keybox\" data-full=\"${key.key || key.id}\">\n        <code class=\"bp-api-keys-code\">${keyPrefix}</code>\n        <div class=\"bp-api-keys-buttons\">\n          <button class=\"bp-api-keys-reveal\">Reveal</button>\n          <button class=\"bp-api-keys-copy\">Copy</button>\n          <button class=\"bp-api-keys-verify\">Verify</button>\n        </div>\n        <div class=\"bp-api-keys-status\"></div>\n      </div>\n\n      <div class=\"bp-api-keys-meta\">\n        <div><strong>Roles:</strong> ${roles.join(', ')}</div>\n        <div><strong>Created:</strong> ${created}</div>\n        <div><strong>Expiry:</strong> ${expiry}</div>\n        <div><strong>Used:</strong> <span class=\"usage-count\">${usage}</span></div>\n\n      </div>\n    </div>\n  </li>\n`);\n\n\n            list.append(li);\n        });\n\n        // Handle key reveal\n        $('.bp-api-keys-reveal').on('click', function () {\n            const box = $(this).closest('.bp-api-keys-keybox');\n            const fullKey = box.data('full');\n            box.find('code').text(fullKey);\n            $(this).remove(); // Remove the button after revealing\n        });\n\n        // Handle copy to clipboard\n        $('.bp-api-keys-copy').on('click', function () {\n            const box = $(this).closest('.bp-api-keys-keybox');\n            const fullKey = box.data('full');\n            if (navigator.clipboard) {\n                navigator.clipboard.writeText(fullKey).then(() => {\n                    $(this).text('Copied!');\n                    setTimeout(() => $(this).text('Copy'), 1500);\n                });\n            } else {\n                alert('Clipboard API not supported in this browser.');\n            }\n        });\n\n        // Handle API key verification\n        $('.bp-api-keys-verify').on('click', async function () {\n            const box = $(this).closest('.bp-api-keys-keybox');\n            const fullKey = box.data('full');\n            const statusBox = box.find('.bp-api-keys-status');\n\n            // Get roles from meta block\n            const rolesText = box.closest('.bp-api-keys-card').find('.bp-api-keys-meta')\n                .find('div:contains(\"Roles:\")').text().replace('Roles:', '').trim();\n            const roles = rolesText.split(',').map(r => r.trim()).filter(Boolean);\n\n            statusBox.text('Verifyingâ€¦');\n\n            try {\n                const result = await client.validateApiKey(fullKey, roles);\n                if (result.valid) {\n                    statusBox.text('âœ… Valid').css('color', 'green');\n                    // update usage count\n                    const usageCount = box.closest('.bp-api-keys-card').find('.usage-count');\n                    usageCount.text(result.usage + ' times' || '0 times');\n                } else {\n                    statusBox.text(`âŒ Invalid (${result.reason || 'unknown'})`).css('color', 'red');\n                }\n            } catch (err) {\n                console.error('Validation failed', err);\n                statusBox.text('âŒ Error validating key').css('color', 'red');\n            }\n        });\n\n\n        // Handle revoke\n        $('.bp-api-keys-revoke').on('click', async function () {\n            const keyId = $(this).data('id');\n            if (!confirm('Are you sure you want to revoke this API key?')) return;\n            await client.revokeApiKey(keyId);\n            renderApiKeys(); // Refresh list\n        });\n    }\n\n\n    renderApiKeys(); // Initial load\n}\n\n\nconst client = {};\n\nclient.endpoint = buddypond.apiKeysEndpoint;\n\nclient.addApiKey = async function (name, roles, expiry) {\n    return await client.apiRequest('/api-keys', 'POST', {\n        name,\n        roles,\n        expiry\n    });\n};\n\nclient.revokeApiKey = async function (keyId) {\n    return await client.apiRequest(`/api-keys/${keyId}`, 'DELETE');\n};\n\nclient.getApiKeys = async function () {\n    const keys = await client.apiRequest('/api-keys', 'GET');\n    if (Array.isArray(keys)) return keys;\n    throw new Error('Invalid API key list');\n};\n\nclient.validateApiKey = async function (key, requireRole) {\n    if (!key || !requireRole || !Array.isArray(requireRole) || requireRole.length === 0) {\n        throw new Error('Invalid key or requireRole parameter');\n    }\n    return await client.apiRequest('/api-keys/validate', 'POST', {\n        key,\n        requireRole\n    });\n};\n\n\nclient.apiRequest = async (uri, method = 'GET', data = null) => {\n\n    const options = {\n        method: method\n    };\n\n    let headers = {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        \"X-Me\": buddypond.me\n    };\n    if (buddypond.qtokenid) {\n        headers[\"Authorization\"] = `Bearer ${buddypond.qtokenid}`; // âœ… Use Authorization header\n    }\n\n\n    if (data) {\n        options.body = JSON.stringify(data);\n    }\n\n    options.headers = headers;\n\n    let url = `${client.endpoint}${uri}`;\n    console.log('admin client making api request', url, options);\n\n\n    try {\n        const response = await fetch(url, options);\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        return await response.json();\n    } catch (error) {\n        console.error('Error in API request:', error);\n        throw error;\n    }\n\n};","export default function updateProfilePicture(event, profilePictureImg) {\n  const file = event.target.files[0];\n  const profilePictureInput = event.target;\n  const statusElement = document.querySelector('.aim-profile-picture-upload-status');\n  const statusText = statusElement.querySelector('.status-text');\n\n  // Helper function to update status\n  const updateStatus = (text, state) => {\n    statusElement.classList.remove('uploading', 'success', 'error', 'hidden');\n    statusText.textContent = text;\n    statusElement.classList.add(state);\n    statusElement.style.display = 'block';\n  };\n\n  // Helper function to hide status after delay\n  const hideStatusAfterDelay = (delay = 3000) => {\n    setTimeout(() => {\n      statusElement.classList.add('hidden');\n      statusElement.style.display = 'none';\n    }, delay);\n  };\n\n  if (file) {\n    // Validate file type\n    const validImageTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/jpg', 'image/webp'];\n    if (!validImageTypes.includes(file.type)) {\n      updateStatus('Please select a valid image file (JPEG, PNG, or GIF).', 'error');\n      profilePictureInput.value = ''; // Clear the input\n      hideStatusAfterDelay();\n      return;\n    }\n\n    // Load and resize image\n    const img = new Image();\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      img.src = e.target.result;\n      img.onload = async () => {\n        // Resize image to 128x128 using Canvas\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        canvas.width = 128;\n        canvas.height = 128;\n\n        // Calculate scaling to maintain aspect ratio\n        const scale = Math.min(128 / img.width, 128 / img.height);\n        const scaledWidth = img.width * scale;\n        const scaledHeight = img.height * scale;\n        const offsetX = (128 - scaledWidth) / 2;\n        const offsetY = (128 - scaledHeight) / 2;\n\n        // Draw scaled image on canvas\n        ctx.fillStyle = 'white'; // Optional: white background for transparency\n        ctx.fillRect(0, 0, 128, 128);\n        ctx.drawImage(img, offsetX, offsetY, scaledWidth, scaledHeight);\n\n        // Convert canvas to blob (JPEG for compression)\n        try {\n          const blob = await new Promise((resolve) => {\n            canvas.toBlob(\n              (blob) => resolve(blob),\n              'image/jpeg',\n              0.8 // JPEG quality (0.8 balances size and quality)\n            );\n          });\n\n          // Validate resized file size (300KB = 300 * 1024 bytes)\n          const maxSize = 300 * 1024;\n          if (blob.size > maxSize) {\n            updateStatus('Resized image exceeds 300KB. Please choose a smaller image.', 'error');\n            profilePictureInput.value = ''; // Clear the input\n            hideStatusAfterDelay();\n            return;\n          }\n\n          // Show preview\n          const previewUrl = URL.createObjectURL(blob);\n          profilePictureImg.src = previewUrl;\n\n          // Create a new img element inside .aim-profile-picture-preview\n          const previewImg = document.createElement('img');\n          previewImg.src = previewUrl;\n          previewImg.classList.add('aim-profile-picture-img');\n          const profilePicturePreview = document.querySelector('.aim-profile-picture-preview');\n          profilePicturePreview.innerHTML = ''; // Clear previous preview\n          profilePicturePreview.appendChild(previewImg);\n\n          // Proceed with upload\n          updateStatus('Uploading...', 'uploading');\n          const resizedFile = new File([blob], file.name, {\n            type: 'image/jpeg',\n            lastModified: Date.now(),\n          });\n\n          try {\n            let onProgress = (progress) => {\n              // Assuming progress is a value between 0 and 1\n              const percentage = Math.round(progress * 100);\n              updateStatus(`Uploading: ${percentage}%`, 'uploading');\n            };\n\n\n            // prefix '/profile-pics/' to the file path\n            resizedFile.filePath = '/profile-pics/' + resizedFile.name;\n\n            console.log('Uploading file:', resizedFile);\n\n            let url;\n            try {\n              url = await buddypond.uploadFile(resizedFile, onProgress);\n              console.log('File uploaded to:', url);\n              updateStatus('Upload complete!', 'success');\n              hideStatusAfterDelay();\n\n            } catch (err) {\n              console.error('Error uploading file:', err);\n              updateStatus('Upload failed: ' + err.message, 'error');\n              return;\n            }\n\n            //let url = 'https://files.buddypond.com/Jane/profile-pics/terry-called.jpg';\n            console.log('File uploaded to:', url);\n\n            await this.bp.apps.buddylist.client.setStatus(this.bp.me, {\n              profilePicture : url\n            });\n\n\n            // set the local profile state ( for use in sending messages)\n            this.bp.apps.buddylist.data.profileState.profilePicture = url;\n\n            /*\n            // Simulate upload for testing (remove when real upload is implemented)\n            await new Promise((resolve) => setTimeout(resolve, 2000));\n            onProgress(0.5); // Simulate 50% progress\n            await new Promise((resolve) => setTimeout(resolve, 1000));\n            onProgress(1); // Simulate 100% progress\n            */\n\n\n            // Stub for uploading profile picture API call\n            // await this.bp.apps.client.api.uploadProfilePicture(resizedFile);\n          } catch (error) {\n            console.error('Upload error:', error);\n            updateStatus('Upload failed. Please try again.', 'error');\n            hideStatusAfterDelay();\n          }\n\n          // Clean up (only revoke if not needed for persistent preview)\n          // URL.revokeObjectURL(previewUrl);\n        } catch (error) {\n          console.error('Error processing image:', error);\n          updateStatus('Error processing image. Please try again.', 'error');\n          profilePictureInput.value = ''; // Clear the input\n          hideStatusAfterDelay();\n        }\n      };\n      img.onerror = () => {\n        updateStatus('Failed to load image. Please select a valid image file.', 'error');\n        profilePictureInput.value = ''; // Clear the input\n        hideStatusAfterDelay();\n      };\n    };\n    reader.readAsDataURL(file);\n  }\n}","import wallpapers from './lib/wallpapers.js';\nimport themeEditor from './lib/theme-editor.js';\nimport apiKeys from './lib/api-keys.js';\nimport bindUIEvents from './lib/bindUIEvents.js';\n// import LoadingContainer from '../ui/LoadingContainer/LoadingContainer.js';\nlet defaultFileContent = {};\n\n\nexport default class Profile {\n    constructor(bp, options = {}) {\n        this.bp = bp;\n        return this;\n    }\n\n    async init() {\n\n        // injects CSS link tag into the head of document\n        await this.bp.load('/v5/apps/based/profile/profile.css');\n        // await this.bp.load('/v5/apps/based/ui/LoadingContainer/LoadingContainer.css');\n        await this.bp.load('browser');\n        await this.bp.appendScript('/desktop/assets/js/jquery.simple-color.js');\n\n        // fetches html from the fragment and returns it as a string\n        this.html = await this.bp.load('/v5/apps/based/profile/profile.html');\n\n        return 'loaded Profile';\n    }\n\n    async open(options = {}) {\n\n        let buddyname = this.bp.me || options.context;\n        buddyname = buddyname.replace(\":\", \"\"); // remove any colons for now\n        buddyname = buddyname.replace(\" \", \"\"); // remove any spaces for now\n\n        // Create main content div and setup for tabs\n        let contentDiv = document.createElement('div');\n        contentDiv.classList.add('customProfile');\n\n        // create a new element from the html string\n        let profileContent = document.createElement('div');\n        profileContent.innerHTML = this.html;\n        //contentDiv.append($(buddyProfilePad.content).html());\n        //$(contentDiv).html(buddyProfilePad.content);\n        // $('.myProfile', profileContent).html(contentDiv);\n        //profileContent.append(contentDiv);\n\n        // Initialize tabs\n        if (!this.profileWindow) {\n            this.profileWindow = this.bp.apps.ui.windowManager.createWindow({\n                id: 'profile',\n                title: 'Profile - ' + buddyname,\n                x: 50,\n                y: 100,\n                width: 800,\n                height: 500,\n                minWidth: 200,\n                minHeight: 200,\n                parent: $('#desktop')[0],\n                icon: '/desktop/assets/images/icons/icon_profile_64.png',\n                context: buddyname || 'default',\n                content: profileContent,\n                resizable: true,\n                minimizable: true,\n                maximizable: true,\n                closable: true,\n                focusable: true,\n                maximized: false,\n                minimized: false,\n                onClose: () => {\n                    this.profileWindow = null;\n                }\n            });\n            this.profileWindow.loggedIn = true;\n            this.tabs = new this.bp.apps.ui.Tabs('.tabs-container', '#' + this.profileWindow.id); // Initialize the tab functionality\n\n            this.tabs.onTab(async (tabId) => {\n                if (this.bp.me !== 'Guest') {\n                    $('.loggedIn', this.profileWindow.content).flexShow();\n                    $('.loggedOut', this.profileWindow.content).flexHide();\n\n                } else {\n                    $('.loggedIn', this.profileWindow.content).flexHide();\n                    $('.loggedOut', this.profileWindow.content).flexShow();\n\n                }\n            });\n\n            wallpapers.legacyWallpapers(bp);\n\n            this.bindUIEvents(options);\n\n\n            if (this.bp.me !== 'Guest') {\n                $('.loggedIn', this.profileWindow.content).flexShow();\n                $('.loggedOut', this.profileWindow.content).flexHide();\n\n            } else {\n                $('.loggedIn', this.profileWindow.content).flexHide();\n                $('.loggedOut', this.profileWindow.content).flexShow();\n                // navigate to themes tag by default if not logged in\n                this.tabs.showTab('#tab-themes');\n            }\n\n\n        } else {\n            // this.profileWindow.content.innerHTML = '';\n            // If the window exists and the context has changed, re-render the content\n            this.profileWindow.content = contentDiv;\n            if (this.profileWindow.context !== buddyname) {\n                this.profileWindow.context = buddyname;\n                $(this.profileWindow.content).html(contentDiv.innerHTML);\n                this.profileWindow.setTitle('Profile - ' + buddyname);\n                new this.bp.apps.ui.Tabs('#' + this.profileWindow.id); // Re-initialize the tab functionality\n                // this.profileWindow.render(); Uncomment if there's a render method to refresh the window\n            }\n        }\n\n        $('.yourApps tbody', this.profileWindow.content).html('');\n        for (let appName in bp.settings.apps_installed) {\n            // renderProfileApp(appName, $('.yourApps')[0]);\n        }\n\n        //$('.profileContent .ctime', this.profileWindow.content).html(buddyProfile.ctime);\n        //console.log('buddyProfile', buddyProfile);\n        //$('.buddyname', this.profileWindow.content).html(buddyProfile.buddyProfile.me);\n\n        // set the liveProfileLink\n        let liveLink = this.bp.config.host + '/' + this.bp.me\n        $('.liveProfileLink', this.profileWindow.content).attr('href', liveLink);\n        $('.liveProfileLink', this.profileWindow.content).html(liveLink);\n\n        $('.loggedIn', this.profileWindow).hide();\n        // $('.loggedIn').hide();\n\n\n        return this.profileWindow;\n\n    }\n}\n\nfunction renderProfileApp(appName, container) {\n    //app = desktop.app.appstore.apps[appName]\n    let app = bp.apps.desktop.appsList[appName];\n    //console.log('renderProfileApp', appName, app);\n\n    //console.log('renderProfileApp', appName, app);\n    // don't show Profile App itself in Profile App List\n    if (appName === 'profile') {\n        return;\n    }\n    let str = `\n      <tr class=\"open-app\" data-app=\"${appName}\">\n        <td>\n          <img class=\"appStoreIcon float-left\" src=\"desktop/assets/images/icons/icon_${app.icon || appName}_64.png\" />\n        </td>\n        <td>\n         ${app.description || app.label || appName}\n        </td>\n    </tr>`;\n    let el = document.createElement('tr');\n    el.classList.add('open-app');\n    el.setAttribute('data-app', appName);\n    el.innerHTML = str;\n    container.append(el);\n    return str;\n}\n\nProfile.prototype.bindUIEvents = bindUIEvents;\nProfile.prototype.themeEditor = themeEditor;\nProfile.prototype.apiKeys = apiKeys;","import userSettings from './user-settings.js';\nimport updateProfilePicture from './updateProfilePicture.js';\n//import audioSettings from './audio-settings.js';\n//import PadEditor from '../../pad/PadEditor.js';\n\nexport default function bindUIEvents(options = {}) {\n\n    const profilePictureInput = document.getElementById('profile-picture-input');\n    const profilePictureImg = document.querySelector('.aim-profile-picture-img');\n    // const removeButton = document.querySelector('.aim-profile-picture-remove');\n\n    $('.aim-set-password-email').on('click', (e) => {\n        this.tabs.navigateToTab('#tabs-3');\n    });\n\n    // Handle file selection\n    profilePictureInput.addEventListener('change', async (event) => {\n        updateProfilePicture.call(this, event, profilePictureImg);\n    });\n    /*\n    // Handle remove button click\n    removeButton.addEventListener('click', () => {\n        // Reset to default avatar\n\n        // This is done by calling setStatus profile.profilePicture = '';\n        // await this.bp.apps.client.api.uploadProfilePicture(resizedFile);\n\n        // profilePictureImg.src = '/default-avatar.png';\n\n        // Stub for removing profile picture API call\n        // TODO: Replace with actual API call\n        console.log('Removing profile picture');\n        // Example: removeProfilePicture().then(() => {\n        //     profilePictureImg.src = '/default-avatar.png';\n        // }).catch(error => {\n        //     console.error('Remove failed:', error);\n        // });\n    });\n    */\n\n    // check if user profile has a profilePicture\n    let profilePicture = this.bp.apps.buddylist.data.profileState.profilePicture;\n    let profilePicturePreview = $('.aim-profile-picture-preview');\n\n    if (profilePicture) {\n\n        // profilePicture is a url, set the profilePicturePreview to the url\n        // create a new img element inside .aim-profile-picture-preview\n        let img = document.createElement('img');\n        img.src = profilePicture;\n        img.classList.add('aim-profile-picture-img');\n        profilePicturePreview.append(img);\n\n\n    } else {\n        const avatar = this.bp.vendor.dicebear.createAvatar(this.bp.vendor.dicebearAvatars, {\n            seed: this.bp.me, // Username as seed for consistent avatar\n            size: 128, // Avatar size in pixels\n            backgroundColor: [\"#f0f0f0\"], // Optional: Customize background\n        });\n\n        // Convert avatar to SVG string\n        const svg = avatar.toString();\n        console.log('Avatar SVG:', svg);\n\n        profilePicturePreview.html(svg);\n\n    }\n\n    $('.editProfileButton', this.profileWindow.content).on('click', () => {\n        // show the profile editor\n        $('.profileEditor', this.profileWindow.content).flexShow();\n        // hide the profile content\n        $('.customProfile', this.profileWindow.content).flexHide();\n        $('.updateProfileHtml', this.profileWindow.content).flexShow();\n        $('.cancelProfileEdit', this.profileWindow.content).flexShow();\n    });\n\n    //        $('.profileEditor', this.profileWindow.content).appendTo(this.profileWindow.content);\n\n    // $('.profileHtml', this.profileWindow.content).val(buddyProfilePad.content);\n\n    $('.cancelProfileEdit', this.profileWindow.content).on('click', () => {\n        // hide the profile editor\n        $('.profileEditor', this.profileWindow.content).flexHide();\n        // show the profile content\n        $('.customProfile', this.profileWindow.content).flexShow();\n        $('.updateProfileHtml', this.profileWindow.content).flexHide();\n        $('.cancelProfileEdit', this.profileWindow.content).flexHide();\n    });\n\n    $('.updateProfileHtml').flexHide();\n    $('.cancelProfileEdit').flexHide();\n\n    // TODO: add these back\n    //audioSettings(bp);\n    userSettings(bp);\n\n\n    let padEditorHolder = $('.pad-editor-holder', this.profileWindow.content)[0];\n    // padEditorHolder.className = 'pad-editor-holder';\n\n    /*\n    let fileExplorer = await this.bp.apps['file-explorer'].create();\n    console.log('fffff', fileExplorer.fileExplorer.container)\n    padEditorHolder.append(fileExplorer.fileExplorer.container);\n    profileContent.append(padEditorHolder);\n    */\n\n    let profileUrl = this.bp.config.host + '/' + this.bp.me;\n    // check if this.bp.config.host contains buddypond.com, if not append /index.html\n    if (this.bp.config.host.indexOf('buddypond.com') === -1) {\n        profileUrl = profileUrl + '/index.html';\n    }\n\n    if (!this.browser) {\n        this.browser = new this.bp.apps.browser.BrowserWindow(this.bp, padEditorHolder, profileUrl);\n\n    }\n\n    let yourProfile = $('#your-profile', this.profileWindow.content);\n    this.bp.on('file-explorer::update', 'update-profile-preview-if-profile-index', (data) => {\n        // check if data.path is /index.html\n        // if so, we wish to reload the browser window\n        this.browser.navigate(profileUrl);\n    });\n\n    yourProfile.append(padEditorHolder);\n\n    // TODO: navigate to tabs? this.tabs.showTab(options.context);\n    if (options.context && options.context === 'themes') {\n        $('.themesLink').click();\n    }\n\n    $('.me').html(this.bp.me);\n\n    if (options && options.type === 'settings') {\n        // if type is user-settings, show the user settings tab\n        this.tabs.showTab('#tabs-3');\n    }\n\n    if (options && options.type === 'themes') {\n        // if type is user-settings, show the user settings tab\n        this.tabs.showTab('#tabs-2');\n    }\n\n    $('.themeSelect', this.profileWindow.content).on('change', (e) => {\n        let val = $(e.target).val();\n        if (val === 'Custom') {\n            // get the custom theme styles\n            //let customTheme = this.bp.settings.custom_theme;\n            //this.bp.apps.themes.applyTheme(customTheme); // Apply selected theme\n            // do nothing\n            return;\n        }\n        this.bp.apps.themes.applyTheme(val); // Apply selected theme\n        this.themeEditor(val);\n    });\n\n    // set value of themeSelect to current theme\n    let currentTheme = this.bp.get('active_theme') || 'Light';\n    $('.themeSelect', this.profileWindow.content).val(currentTheme);\n    // trigger change to apply the theme\n    $('.themeSelect', this.profileWindow.content).trigger('change');\n\n    this.bp.on('settings::active_theme', 'update-dropdown', (data) => {\n        // Update the dropdown to reflect the new active theme\n        let activeTheme = this.bp.get('active_theme') || 'Light';\n        //$('.themeSelect', this.profileWindow.content).val(activeTheme);\n        //$('.themeSelect', this.profileWindow.content).trigger('change');\n    });\n\n    if (this.bp.me !== 'Guest') {\n        this.apiKeys();\n    }\n\n    $('.loggedIn', this.profileWindow).hide();\n    // $('.loggedIn').hide();\n\n\n\n\n}","export default async function legacyUserSettings(bp) {\n    $('.updateProfileButton').on('click', async function () {\n        let updates = {};\n        updates.email = $('.buddy_email').val();\n        updates.password = $('.buddy_password').val();\n        updates.confirmPassword = $('.confirm_buddy_password').val();\n        $('.updateProfileResponse').html('');\n        if (updates.password) {\n            if (!updates.confirmPassword || (updates.password !== updates.confirmPassword)) {\n                $('.updateProfileResponse').addClass('error');\n                $('.updateProfileResponse').html('Passwords do not match');\n                return;\n            }\n        }\n        console.log('Updating profile with', updates);\n        $('.updateProfileResponse').removeClass('error');\n        try {\n            let passwordChanged = await buddypond.updateAccount({ buddyname: bp.me, password: updates.password, email: updates.email });\n            console.log('password changed', passwordChanged);\n            // update successful\n            if (passwordChanged) {\n                $('.updateProfileResponse').html('Account updated successfully');\n            }\n        } catch (e) {\n            $('.updateProfileResponse').addClass('error');\n            $('.updateProfileResponse').html('Error: ' + e.message);\n            return;\n        }\n\n        /*\n        buddypond.updateBuddyProfile({ updates: updates }, function (err, res) {\n            if (res.error) {\n                alert(res.message);\n                return;\n            }\n            $('.updateProfileResponse').html('Updated!');\n        });\n        */\n    });\n\n    if (bp.apps.buddylist && bp.apps.buddylist.data.profileState && bp.apps.buddylist.data.profileState.email) {\n        $('.buddy_email').val(bp.apps.buddylist.data.profileState.email);\n    }\n    if (bp.apps.buddylist && bp.apps.buddylist.data.profileState && typeof bp.apps.buddylist.data.profileState.emailVerified === 'boolean') {\n        if (bp.apps.buddylist.data.profileState.emailVerified) {\n            $('.buddy_email_verified_text').html('Email Verified');\n            // $('.buddy_email_verify_button').hide();\n        } else {\n            $('.buddy_email_verified_text').html('Email Not Verified');\n            // $('.buddy_email_verify_button').show();\n        }\n    }\n\n    $('.updateProfileForm').on('submit', function (e) {\n        e.preventDefault();\n        // clear out local profile cache, this will trigger a re-render from next server update\n        // desktop.app.profileCache = {};\n        return false;\n    });\n\n    if (bp.apps.say) {\n        let voices = bp.apps.say.voices;\n        voices.forEach(function (v) {\n            $('.ttsVoice').append(`<option value=\"${v.voiceURI}\">${v.name} ${v.lang}</option>`);\n        });\n    \n    }\n\n    if (desktop.settings.tts_voice_index) {\n        $('.ttsVoice').prop('selectedIndex', desktop.settings.tts_voice_index);\n    }\n\n    $('.ttsVoice').on('change', function () {\n        //desktop.app.tts.voice = voices[$(this).prop('selectedIndex')];\n        let voice = voices[$(this).prop('selectedIndex')];\n        bp.apps.say.setVoice($(this).prop('selectedIndex'));\n        desktop.set('tts_voice', voice);\n        desktop.set('tts_voice_index', $(this).prop('selectedIndex'));\n        bp.say('Hello Beautiful');\n    });\n\n\n    $('.hideFlag').on('click', function () {\n        if ($(this).prop('checked')) {\n            desktop.set('geo_flag_hidden', true);\n        } else {\n            desktop.set('geo_flag_hidden', false);\n        }\n    });\n\n\n\n}"],"names":["wallpapers","renderWallpaperTypes","el","w","bp","apps","wallpaper","wallpaperManager","_wallpapers","_wallpaper","checked","desktop","settings","wallpaper_name","str","label","append","isColorProperty","prop","value","isColorKey","includes","toLowerCase","isColorValue","test","legacyWallpapers","onSelect","context","hex","set","onCellEnter","$","on","color","setColor","html","activeName","active","changeColor","console","log","simpleColor","boxHeight","cellWidth","cellHeight","defaultColor","wallpaper_color","inputCSS","width","chooserCSS","border","top","displayCSS","displayColorCode","livePreview","insert","element","onClose","radioValue","val","client","updateProfilePicture","event","profilePictureImg","file","target","files","profilePictureInput","statusElement","document","querySelector","statusText","updateStatus","text","state","classList","remove","textContent","add","style","display","hideStatusAfterDelay","delay","setTimeout","type","img","Image","reader","FileReader","onload","e","src","result","async","canvas","createElement","ctx","getContext","height","scale","Math","min","scaledWidth","scaledHeight","offsetX","offsetY","fillStyle","fillRect","drawImage","blob","Promise","resolve","toBlob","maxSize","size","previewUrl","URL","createObjectURL","previewImg","profilePicturePreview","innerHTML","appendChild","resizedFile","File","name","lastModified","Date","now","url","onProgress","progress","percentage","round","filePath","buddypond","uploadFile","err","error","message","this","buddylist","setStatus","me","profilePicture","data","profileState","onerror","readAsDataURL","endpoint","apiKeysEndpoint","addApiKey","roles","expiry","apiRequest","revokeApiKey","keyId","getApiKeys","keys","Array","isArray","Error","validateApiKey","key","requireRole","length","uri","method","options","headers","Accept","qtokenid","body","JSON","stringify","response","fetch","ok","status","json","Profile","constructor","init","load","appendScript","open","buddyname","replace","contentDiv","profileContent","profileWindow","content","setTitle","ui","Tabs","id","windowManager","createWindow","title","x","y","minWidth","minHeight","parent","icon","resizable","minimizable","maximizable","closable","focusable","maximized","minimized","loggedIn","tabs","onTab","tabId","flexShow","flexHide","bindUIEvents","showTab","appName","apps_installed","liveLink","config","host","attr","hide","prototype","getElementById","navigateToTab","addEventListener","call","svg","vendor","dicebear","createAvatar","dicebearAvatars","seed","backgroundColor","toString","updates","email","password","confirmPassword","addClass","removeClass","passwordChanged","updateAccount","emailVerified","preventDefault","say","voices","forEach","v","voiceURI","lang","tts_voice_index","voice","setVoice","userSettings","padEditorHolder","profileUrl","indexOf","browser","BrowserWindow","yourProfile","navigate","click","themes","applyTheme","themeEditor","currentTheme","get","trigger","apiKeys","themeName","themeData","themeStyles","styles","themeStylesTable","editableTheme","parse","styleName","styleValue","row","propsCell","inputId","colorInput","startsWith","newValue","hasClass","closest","find","bind","propInput","valInput","newProp","trim","newVal","roleBox","renderApiKeys","list","empty","role","created","ctime","created_at","toLocaleString","toLocaleDateString","usage","li","join","box","fullKey","navigator","clipboard","writeText","then","alert","statusBox","split","map","r","filter","Boolean","valid","css","reason","confirm","form","newKey"],"mappings":"AAAA,MAAMA,EAAa,CAAE,EA8DrB,SAASC,EAAsBC,GAC3B,IAAK,IAAIC,KAAKC,GAAGC,KAAKC,UAAUC,iBAAiBC,YAAa,CAC5D,IAAIC,EAAaL,GAAGC,KAAKC,UAAUC,iBAAiBC,YAAYL,GAC5DO,EAAU,GACVP,IAAMQ,QAAQC,SAASC,iBACzBH,EAAU,WAEZ,IAAII,EAAM,iDAC8BX,wDAAwDA,MAAMO,uCAC1EP,MAAMM,EAAWM,oCAG7Cb,EAAGc,OAAOF,EAChB,CACA,CC0BA,SAASG,EAAgBC,EAAMC,GAC3B,MAMMC,EANa,CACf,QAAS,aAAc,mBAAoB,eAC3C,gBAAiB,wBAAyB,oBAC1C,OAAQ,UAGkBC,SAASH,EAAKI,eAOtCC,GALa,iCACZ,kBACA,kBACA,aAEyBC,KAAKL,GAErC,OAAOC,GAAcG,CACzB,CDrHAvB,EAAWyB,iBAAmB,SAAUrB,GAGtC,GAAIA,EAAGC,KAAKC,UAAW,CAgBrB,SAASoB,EAAUC,EAASC,GAC1BxB,EAAGyB,IAAI,kBAAmB,IAAMD,EACtC,CAEI,SAASE,EAAaH,EAASC,GAC7BxB,EAAGyB,IAAI,kBAAmB,IAAMD,EACtC,CArBI3B,EAAqB8B,EAAE,oBACvB3B,EAAG4B,GAAG,4BAA6B,iCAAiC,SAASC,GAC3EF,EAAE,yBAAyBG,SAASD,GACpCF,EAAE,uBAAuBI,KAAKF,GAG9B,IAAIG,EAAahC,EAAGC,KAAKC,UAAUC,iBAAiB8B,OAChDA,EAASjC,EAAGC,KAAKC,UAAUC,iBAAiBP,WAAWoC,GACvDC,EACFA,EAAOC,YAAYL,GAEnBM,QAAQC,IAAI,kDAAmDJ,EAEvE,IAUIL,EAAE,yBAAyBU,YAAY,CACrCC,UAAW,GACXC,UAAW,GACXC,WAAY,GACZC,aAAclC,QAAQC,SAASkC,iBAAmB,UAClDC,SAAU,CAAE,gBAAiB,MAAO,YAAa,MAAOC,MAAS,QACjEC,WAAY,CAAEC,OAAU,oBAAqBC,IAAO,QACpDC,WAAY,CAAI,EAChBC,kBAAkB,EAClBC,aAAa,EACbC,OAAQ,SACR7B,SAAU,SAAUE,EAAK4B,GACvB9B,EAAStB,EAAGC,KAAKC,UAAU+B,OAAQT,EACpC,EACDE,YAAa,SAAUF,EAAK4B,GAC1B1B,EAAY1B,EAAGC,KAAKC,UAAU+B,OAAQT,EACvC,EACD6B,QAAS,SAAUD,GACzB,IAIIzB,EAAE,6BAA6BC,GAAG,SAAS,WACzC,IAAI0B,EAAa3B,EAAE,qCAAqC4B,MAExDvD,EAAGyB,IAAI,iBAAkB6B,EAC/B,GAGA,CAEA,EEmGA,MAAME,EAAS,CAAE,EC/JF,SAASC,EAAqBC,EAAOC,GAClD,MAAMC,EAAOF,EAAMG,OAAOC,MAAM,GAC1BC,EAAsBL,EAAMG,OAC5BG,EAAgBC,SAASC,cAAc,sCACvCC,EAAaH,EAAcE,cAAc,gBAGzCE,EAAe,CAACC,EAAMC,KAC1BN,EAAcO,UAAUC,OAAO,YAAa,UAAW,QAAS,UAChEL,EAAWM,YAAcJ,EACzBL,EAAcO,UAAUG,IAAIJ,GAC5BN,EAAcW,MAAMC,QAAU,SAI1BC,EAAuB,CAACC,EAAQ,OACpCC,YAAW,KACTf,EAAcO,UAAUG,IAAI,UAC5BV,EAAcW,MAAMC,QAAU,SAC7BE,IAGL,GAAIlB,EAAM,CAGR,IADwB,CAAC,aAAc,YAAa,YAAa,YAAa,cACzD3C,SAAS2C,EAAKoB,MAIjC,OAHAZ,EAAa,wDAAyD,SACtEL,EAAoBhD,MAAQ,QAC5B8D,IAKF,MAAMI,EAAM,IAAIC,MACVC,EAAS,IAAIC,WACnBD,EAAOE,OAAUC,IACfL,EAAIM,IAAMD,EAAEzB,OAAO2B,OACnBP,EAAII,OAASI,UAEX,MAAMC,EAASzB,SAAS0B,cAAc,UAChCC,EAAMF,EAAOG,WAAW,MAC9BH,EAAO9C,MAAQ,IACf8C,EAAOI,OAAS,IAGhB,MAAMC,EAAQC,KAAKC,IAAI,IAAMhB,EAAIrC,MAAO,IAAMqC,EAAIa,QAC5CI,EAAcjB,EAAIrC,MAAQmD,EAC1BI,EAAelB,EAAIa,OAASC,EAC5BK,GAAW,IAAMF,GAAe,EAChCG,GAAW,IAAMF,GAAgB,EAGvCP,EAAIU,UAAY,QAChBV,EAAIW,SAAS,EAAG,EAAG,IAAK,KACxBX,EAAIY,UAAUvB,EAAKmB,EAASC,EAASH,EAAaC,GAGlD,IACE,MAAMM,QAAa,IAAIC,SAASC,IAC9BjB,EAAOkB,QACJH,GAASE,EAAQF,IAClB,aACA,OAKEI,EAAU,OAChB,GAAIJ,EAAKK,KAAOD,EAId,OAHAzC,EAAa,8DAA+D,SAC5EL,EAAoBhD,MAAQ,QAC5B8D,IAKF,MAAMkC,EAAaC,IAAIC,gBAAgBR,GACvC9C,EAAkB4B,IAAMwB,EAGxB,MAAMG,EAAajD,SAAS0B,cAAc,OAC1CuB,EAAW3B,IAAMwB,EACjBG,EAAW3C,UAAUG,IAAI,2BACzB,MAAMyC,EAAwBlD,SAASC,cAAc,gCACrDiD,EAAsBC,UAAY,GAClCD,EAAsBE,YAAYH,GAGlC9C,EAAa,eAAgB,aAC7B,MAAMkD,EAAc,IAAIC,KAAK,CAACd,GAAO7C,EAAK4D,KAAM,CAC9CxC,KAAM,aACNyC,aAAcC,KAAKC,QAGrB,IACE,IAYIC,EAZAC,EAAcC,IAEhB,MAAMC,EAAa/B,KAAKgC,MAAiB,IAAXF,GAC9B1D,EAAa,cAAc2D,KAAe,cAK5CT,EAAYW,SAAW,iBAAmBX,EAAYE,KAEtDrF,QAAQC,IAAI,kBAAmBkF,GAG/B,IACEM,QAAYM,UAAUC,WAAWb,EAAaO,GAC9C1F,QAAQC,IAAI,oBAAqBwF,GACjCxD,EAAa,mBAAoB,WACjCS,GAED,CAAC,MAAOuD,GAGP,OAFAjG,QAAQkG,MAAM,wBAAyBD,QACvChE,EAAa,kBAAoBgE,EAAIE,QAAS,QAE5D,CAGYnG,QAAQC,IAAI,oBAAqBwF,SAE3BW,KAAKvI,GAAGC,KAAKuI,UAAUhF,OAAOiF,UAAUF,KAAKvI,GAAG0I,GAAI,CACxDC,eAAiBf,IAKnBW,KAAKvI,GAAGC,KAAKuI,UAAUI,KAAKC,aAAaF,eAAiBf,CAa3D,CAAC,MAAOS,GACPlG,QAAQkG,MAAM,gBAAiBA,GAC/BjE,EAAa,mCAAoC,SACjDS,GACZ,CAIS,CAAC,MAAOwD,GACPlG,QAAQkG,MAAM,0BAA2BA,GACzCjE,EAAa,4CAA6C,SAC1DL,EAAoBhD,MAAQ,GAC5B8D,GACV,GAEMI,EAAI6D,QAAU,KACZ1E,EAAa,0DAA2D,SACxEL,EAAoBhD,MAAQ,GAC5B8D,MAGJM,EAAO4D,cAAcnF,EACzB,CACA,CDJAJ,EAAOwF,SAAWd,UAAUe,gBAE5BzF,EAAO0F,UAAYzD,eAAgB+B,EAAM2B,EAAOC,GAC5C,aAAa5F,EAAO6F,WAAW,YAAa,OAAQ,CAChD7B,OACA2B,QACAC,UAER,EAEA5F,EAAO8F,aAAe7D,eAAgB8D,GAClC,aAAa/F,EAAO6F,WAAW,aAAaE,IAAS,SACzD,EAEA/F,EAAOgG,WAAa/D,iBAChB,MAAMgE,QAAajG,EAAO6F,WAAW,YAAa,OAClD,GAAIK,MAAMC,QAAQF,GAAO,OAAOA,EAChC,MAAM,IAAIG,MAAM,uBACpB,EAEApG,EAAOqG,eAAiBpE,eAAgBqE,EAAKC,GACzC,IAAKD,IAAQC,IAAgBL,MAAMC,QAAQI,IAAuC,IAAvBA,EAAYC,OACnE,MAAM,IAAIJ,MAAM,wCAEpB,aAAapG,EAAO6F,WAAW,qBAAsB,OAAQ,CACzDS,MACAC,eAER,EAGAvG,EAAO6F,WAAa5D,MAAOwE,EAAKC,EAAS,MAAOtB,EAAO,QAEnD,MAAMuB,EAAU,CACZD,OAAQA,GAGZ,IAAIE,EAAU,CACVC,OAAU,mBACV,eAAgB,kCAChB,OAAQnC,UAAUQ,IAElBR,UAAUoC,WACVF,EAAuB,cAAI,UAAUlC,UAAUoC,YAI/C1B,IACAuB,EAAQI,KAAOC,KAAKC,UAAU7B,IAGlCuB,EAAQC,QAAUA,EAElB,IAAIxC,EAAM,GAAGpE,EAAOwF,WAAWiB,IAC/B9H,QAAQC,IAAI,kCAAmCwF,EAAKuC,GAGpD,IACI,MAAMO,QAAiBC,MAAM/C,EAAKuC,GAClC,IAAKO,EAASE,GACV,MAAM,IAAIhB,MAAM,uBAAuBc,EAASG,UAEpD,aAAaH,EAASI,MACzB,CAAC,MAAOzC,GAEL,MADAlG,QAAQkG,MAAM,wBAAyBA,GACjCA,CACd,GE3Ne,MAAM0C,EACjB,WAAAC,CAAYhL,EAAImK,EAAU,IAEtB,OADA5B,KAAKvI,GAAKA,EACHuI,IACf,CAEI,UAAM0C,GAWF,aARM1C,KAAKvI,GAAGkL,KAAK,4CAEb3C,KAAKvI,GAAGkL,KAAK,iBACb3C,KAAKvI,GAAGmL,aAAa,6CAG3B5C,KAAKxG,WAAawG,KAAKvI,GAAGkL,KAAK,uCAExB,gBACf,CAEI,UAAME,CAAKjB,EAAU,IAEjB,IAAIkB,EAAY9C,KAAKvI,GAAG0I,IAAMyB,EAAQ5I,QACtC8J,EAAYA,EAAUC,QAAQ,IAAK,IACnCD,EAAYA,EAAUC,QAAQ,IAAK,IAGnC,IAAIC,EAAatH,SAAS0B,cAAc,OACxC4F,EAAWhH,UAAUG,IAAI,iBAGzB,IAAI8G,EAAiBvH,SAAS0B,cAAc,OAC5C6F,EAAepE,UAAYmB,KAAKxG,KAO3BwG,KAAKkD,eA4DNlD,KAAKkD,cAAcC,QAAUH,EACzBhD,KAAKkD,cAAclK,UAAY8J,IAC/B9C,KAAKkD,cAAclK,QAAU8J,EAC7B1J,EAAE4G,KAAKkD,cAAcC,SAAS3J,KAAKwJ,EAAWnE,WAC9CmB,KAAKkD,cAAcE,SAAS,aAAeN,GAC3C,IAAI9C,KAAKvI,GAAGC,KAAK2L,GAAGC,KAAK,IAAMtD,KAAKkD,cAAcK,OAhEtDvD,KAAKkD,cAAgBlD,KAAKvI,GAAGC,KAAK2L,GAAGG,cAAcC,aAAa,CAC5DF,GAAI,UACJG,MAAO,aAAeZ,EACtBa,EAAG,GACHC,EAAG,IACHvJ,MAAO,IACPkD,OAAQ,IACRsG,SAAU,IACVC,UAAW,IACXC,OAAQ3K,EAAE,YAAY,GACtB4K,KAAM,mDACNhL,QAAS8J,GAAa,UACtBK,QAASF,EACTgB,WAAW,EACXC,aAAa,EACbC,aAAa,EACbC,UAAU,EACVC,WAAW,EACXC,WAAW,EACXC,WAAW,EACXzJ,QAAS,KACLkF,KAAKkD,cAAgB,QAG7BlD,KAAKkD,cAAcsB,UAAW,EAC9BxE,KAAKyE,KAAO,IAAIzE,KAAKvI,GAAGC,KAAK2L,GAAGC,KAAK,kBAAmB,IAAMtD,KAAKkD,cAAcK,IAEjFvD,KAAKyE,KAAKC,OAAMxH,MAAOyH,IACA,UAAf3E,KAAKvI,GAAG0I,IACR/G,EAAE,YAAa4G,KAAKkD,cAAcC,SAASyB,WAC3CxL,EAAE,aAAc4G,KAAKkD,cAAcC,SAAS0B,aAG5CzL,EAAE,YAAa4G,KAAKkD,cAAcC,SAAS0B,WAC3CzL,EAAE,aAAc4G,KAAKkD,cAAcC,SAASyB,eAKpDvN,EAAWyB,iBAAiBrB,IAE5BuI,KAAK8E,aAAalD,GAGC,UAAf5B,KAAKvI,GAAG0I,IACR/G,EAAE,YAAa4G,KAAKkD,cAAcC,SAASyB,WAC3CxL,EAAE,aAAc4G,KAAKkD,cAAcC,SAAS0B,aAG5CzL,EAAE,YAAa4G,KAAKkD,cAAcC,SAAS0B,WAC3CzL,EAAE,aAAc4G,KAAKkD,cAAcC,SAASyB,WAE5C5E,KAAKyE,KAAKM,QAAQ,iBAiB1B3L,EAAE,kBAAmB4G,KAAKkD,cAAcC,SAAS3J,KAAK,IACtD,IAAK,IAAIwL,KAAWvN,GAAGQ,SAASgN,gBAShC,IAAIC,EAAWlF,KAAKvI,GAAG0N,OAAOC,KAAO,IAAMpF,KAAKvI,GAAG0I,GAQnD,OAPA/G,EAAE,mBAAoB4G,KAAKkD,cAAcC,SAASkC,KAAK,OAAQH,GAC/D9L,EAAE,mBAAoB4G,KAAKkD,cAAcC,SAAS3J,KAAK0L,GAEvD9L,EAAE,YAAa4G,KAAKkD,eAAeoC,OAI5BtF,KAAKkD,aAEpB,EA8BAV,EAAQ+C,UAAUT,aClKH,SAAsBlD,EAAU,IAE3C,MAAMpG,EAAsBE,SAAS8J,eAAe,yBAC9CpK,EAAoBM,SAASC,cAAc,4BAGjDvC,EAAE,2BAA2BC,GAAG,SAAU0D,IACtCiD,KAAKyE,KAAKgB,cAAc,cAI5BjK,EAAoBkK,iBAAiB,UAAUxI,MAAO/B,IAClDD,EAAqByK,KAAK3F,KAAM7E,EAAOC,MAwB3C,IAAIgF,EAAiBJ,KAAKvI,GAAGC,KAAKuI,UAAUI,KAAKC,aAAaF,eAC1DxB,EAAwBxF,EAAE,gCAE9B,GAAIgH,EAAgB,CAIhB,IAAI1D,EAAMhB,SAAS0B,cAAc,OACjCV,EAAIM,IAAMoD,EACV1D,EAAIV,UAAUG,IAAI,2BAClByC,EAAsBvG,OAAOqE,EAGrC,KAAW,CACH,MAOMkJ,EAPS5F,KAAKvI,GAAGoO,OAAOC,SAASC,aAAa/F,KAAKvI,GAAGoO,OAAOG,gBAAiB,CAChFC,KAAMjG,KAAKvI,GAAG0I,GACd5B,KAAM,IACN2H,gBAAiB,CAAC,aAIHC,WACnBvM,QAAQC,IAAI,cAAe+L,GAE3BhH,EAAsBpF,KAAKoM,EAEnC,CAEIxM,EAAE,qBAAsB4G,KAAKkD,cAAcC,SAAS9J,GAAG,SAAS,KAE5DD,EAAE,iBAAkB4G,KAAKkD,cAAcC,SAASyB,WAEhDxL,EAAE,iBAAkB4G,KAAKkD,cAAcC,SAAS0B,WAChDzL,EAAE,qBAAsB4G,KAAKkD,cAAcC,SAASyB,WACpDxL,EAAE,qBAAsB4G,KAAKkD,cAAcC,SAASyB,cAOxDxL,EAAE,qBAAsB4G,KAAKkD,cAAcC,SAAS9J,GAAG,SAAS,KAE5DD,EAAE,iBAAkB4G,KAAKkD,cAAcC,SAAS0B,WAEhDzL,EAAE,iBAAkB4G,KAAKkD,cAAcC,SAASyB,WAChDxL,EAAE,qBAAsB4G,KAAKkD,cAAcC,SAAS0B,WACpDzL,EAAE,qBAAsB4G,KAAKkD,cAAcC,SAAS0B,cAGxDzL,EAAE,sBAAsByL,WACxBzL,EAAE,sBAAsByL,WC5Fb3H,eAAkCzF,GAC7C2B,EAAE,wBAAwBC,GAAG,SAAS6D,iBAClC,IAAIkJ,EAAU,CAAE,EAKhB,GAJAA,EAAQC,MAAQjN,EAAE,gBAAgB4B,MAClCoL,EAAQE,SAAWlN,EAAE,mBAAmB4B,MACxCoL,EAAQG,gBAAkBnN,EAAE,2BAA2B4B,MACvD5B,EAAE,0BAA0BI,KAAK,IAC7B4M,EAAQE,YACHF,EAAQG,iBAAoBH,EAAQE,WAAaF,EAAQG,iBAG1D,OAFAnN,EAAE,0BAA0BoN,SAAS,cACrCpN,EAAE,0BAA0BI,KAAK,0BAIzCI,QAAQC,IAAI,wBAAyBuM,GACrChN,EAAE,0BAA0BqN,YAAY,SACxC,IACI,IAAIC,QAAwB/G,UAAUgH,cAAc,CAAE7D,UAAWrL,EAAG0I,GAAImG,SAAUF,EAAQE,SAAUD,MAAOD,EAAQC,QACnHzM,QAAQC,IAAI,mBAAoB6M,GAE5BA,GACAtN,EAAE,0BAA0BI,KAAK,+BAExC,CAAC,MAAOuD,GAGL,OAFA3D,EAAE,0BAA0BoN,SAAS,cACrCpN,EAAE,0BAA0BI,KAAK,UAAYuD,EAAEgD,QAE3D,CAWA,IAEQtI,EAAGC,KAAKuI,WAAaxI,EAAGC,KAAKuI,UAAUI,KAAKC,cAAgB7I,EAAGC,KAAKuI,UAAUI,KAAKC,aAAa+F,OAChGjN,EAAE,gBAAgB4B,IAAIvD,EAAGC,KAAKuI,UAAUI,KAAKC,aAAa+F,OAE1D5O,EAAGC,KAAKuI,WAAaxI,EAAGC,KAAKuI,UAAUI,KAAKC,cAA6E,kBAAtD7I,EAAGC,KAAKuI,UAAUI,KAAKC,aAAasG,gBACnGnP,EAAGC,KAAKuI,UAAUI,KAAKC,aAAasG,cACpCxN,EAAE,8BAA8BI,KAAK,kBAGrCJ,EAAE,8BAA8BI,KAAK,uBAK7CJ,EAAE,sBAAsBC,GAAG,UAAU,SAAU0D,GAI3C,OAHAA,EAAE8J,kBAGK,CACf,IAEQpP,EAAGC,KAAKoP,KACKrP,EAAGC,KAAKoP,IAAIC,OAClBC,SAAQ,SAAUC,GACrB7N,EAAE,aAAaf,OAAO,kBAAkB4O,EAAEC,aAAaD,EAAEhI,QAAQgI,EAAEE,gBAC/E,IAIQnP,QAAQC,SAASmP,iBACjBhO,EAAE,aAAab,KAAK,gBAAiBP,QAAQC,SAASmP,iBAG1DhO,EAAE,aAAaC,GAAG,UAAU,WAExB,IAAIgO,EAAQN,OAAO3N,EAAE4G,MAAMzH,KAAK,kBAChCd,EAAGC,KAAKoP,IAAIQ,SAASlO,EAAE4G,MAAMzH,KAAK,kBAClCP,QAAQkB,IAAI,YAAamO,GACzBrP,QAAQkB,IAAI,kBAAmBE,EAAE4G,MAAMzH,KAAK,kBAC5Cd,EAAGqP,IAAI,kBACf,IAGI1N,EAAE,aAAaC,GAAG,SAAS,WACnBD,EAAE4G,MAAMzH,KAAK,WACbP,QAAQkB,IAAI,mBAAmB,GAE/BlB,QAAQkB,IAAI,mBAAmB,EAE3C,GAIA,CDIIqO,CAAa9P,IAGb,IAAI+P,EAAkBpO,EAAE,qBAAsB4G,KAAKkD,cAAcC,SAAS,GAUtEsE,EAAazH,KAAKvI,GAAG0N,OAAOC,KAAO,IAAMpF,KAAKvI,GAAG0I,QAEjDH,KAAKvI,GAAG0N,OAAOC,KAAKsC,QAAQ,mBAC5BD,GAA0B,eAGzBzH,KAAK2H,UACN3H,KAAK2H,QAAU,IAAI3H,KAAKvI,GAAGC,KAAKiQ,QAAQC,cAAc5H,KAAKvI,GAAI+P,EAAiBC,IAIpF,IAAII,EAAczO,EAAE,gBAAiB4G,KAAKkD,cAAcC,SACxDnD,KAAKvI,GAAG4B,GAAG,wBAAyB,2CAA4CgH,IAG5EL,KAAK2H,QAAQG,SAASL,MAG1BI,EAAYxP,OAAOmP,GAGf5F,EAAQ5I,SAA+B,WAApB4I,EAAQ5I,SAC3BI,EAAE,eAAe2O,QAGrB3O,EAAE,OAAOI,KAAKwG,KAAKvI,GAAG0I,IAElByB,GAA4B,aAAjBA,EAAQnF,MAEnBuD,KAAKyE,KAAKM,QAAQ,WAGlBnD,GAA4B,WAAjBA,EAAQnF,MAEnBuD,KAAKyE,KAAKM,QAAQ,WAGtB3L,EAAE,eAAgB4G,KAAKkD,cAAcC,SAAS9J,GAAG,UAAW0D,IACxD,IAAI/B,EAAM5B,EAAE2D,EAAEzB,QAAQN,MACV,WAARA,IAOJgF,KAAKvI,GAAGC,KAAKsQ,OAAOC,WAAWjN,GAC/BgF,KAAKkI,YAAYlN,OAIrB,IAAImN,EAAenI,KAAKvI,GAAG2Q,IAAI,iBAAmB,QAClDhP,EAAE,eAAgB4G,KAAKkD,cAAcC,SAASnI,IAAImN,GAElD/O,EAAE,eAAgB4G,KAAKkD,cAAcC,SAASkF,QAAQ,UAEtDrI,KAAKvI,GAAG4B,GAAG,yBAA0B,mBAAoBgH,IAEnCL,KAAKvI,GAAG2Q,IAAI,mBAKf,UAAfpI,KAAKvI,GAAG0I,IACRH,KAAKsI,UAGTlP,EAAE,YAAa4G,KAAKkD,eAAeoC,MAMvC,EDdA9C,EAAQ+C,UAAU2C,YHxKH,SAAqBK,GAChC,IAAIC,EAAYxI,KAAKvI,GAAGC,KAAKsQ,OAAOA,OAAOO,GACvCE,EAAcD,EAAUE,QAAU,CAAE,EACpCC,EAAmBvP,EAAE,gBAAiB4G,KAAKkD,cAAcC,SAC7DwF,EAAiBnP,KAAK,IAGtB,IAAIoP,EAAgB3G,KAAK4G,MAAM5G,KAAKC,UAAUsG,IAE9C,IAAK,IAAIM,KAAaL,EAAa,CAC/B,IAAIM,EAAaN,EAAYK,GACzBE,EAAM5P,EAAE,aACR6P,EAAY7P,EAAE,yBAElB6P,EAAU5Q,OAAO,qDAAqDyQ,WAEtE,IAAK,IAAIvQ,KAAQwQ,EAAY,CACzB,IAAI/N,EAAM+N,EAAWxQ,GACjB2Q,EAAU,SAASJ,KAAavQ,IAAOwK,QAAQ,OAAQ,KAEvDoG,EAAa,GACjB,GAAI7Q,EAAgBC,EAAMyC,GAAM,CAE5BmO,EAAa,8BADGnO,EAAIoO,WAAW,KAAOpO,EAAM,0BACyB8N,iBAAyBvQ,4BAC9G,CAEY0Q,EAAU5Q,OAAO,0EAEUE,kDACF2Q,aAAmBlO,kBAAoB8N,iBAAyBvQ,sBACvF4Q,0BAKd,CAcQH,EAAI3Q,OAAO4Q,GACXN,EAAiBtQ,OAAO2Q,EAChC,CAGIL,EAAiBtP,GAAG,QAAS,yCAA0C,SAAU0D,GAE7E3D,EAAE,eAAgB4G,KAAKkD,cAAcC,SAASnI,IAAI,UAClD,IAAIoB,EAAQhD,EAAE2D,EAAEzB,QAAQ+E,KAAK,SACzB9H,EAAOa,EAAE2D,EAAEzB,QAAQ+E,KAAK,QAE5B,GADAzG,QAAQC,IAAI,QAASuC,EAAO,OAAQ7D,IAC/B6D,IAAU7D,EAAM,OAErB,IAAI8Q,EAAWjQ,EAAE2D,EAAEzB,QAAQN,MAE3B,GAAI5B,EAAE2D,EAAEzB,QAAQgO,SAAS,gBAAiB,CACflQ,EAAE2D,EAAEzB,QAAQiO,QAAQ,aAAaC,KAAK,sBAC5CxO,IAAIqO,EAEjC,CACQT,EAAcF,OAAOtM,GAAO7D,GAAQ8Q,EACpCzP,QAAQC,IAAI,uBAAwB+O,GACpCA,EAAc3J,KAAO,SACrBe,KAAKvI,GAAGC,KAAKsQ,OAAOC,WAAWW,EACvC,EAAMa,KAAKzJ,OAGP2I,EAAiBtP,GAAG,QAAS,gBAAiB,SAAU0D,GACpD,IAAIX,EAAQhD,EAAE2D,EAAEzB,QAAQ+E,KAAK,SACzB2I,EAAM5P,EAAE2D,EAAEzB,QAAQiO,QAAQ,OAC1BG,EAAYV,EAAIQ,KAAK,kBACrBG,EAAWX,EAAIQ,KAAK,mBAEpBI,EAAUF,EAAU1O,MAAM6O,OAC1BC,EAASH,EAAS3O,MAAM6O,OAExBD,GAAWE,IACXlB,EAAcF,OAAOtM,GAAOwN,GAAWE,EACvC1Q,EAAE,eAAgB4G,KAAKkD,cAAcC,SAASkF,QAAQ,UAElE,EAAMoB,KAAKzJ,OAGP2I,EAAiBtP,GAAG,QAAS,mBAAoB,SAAU0D,GACvD,IAAIX,EAAQhD,EAAE2D,EAAEzB,QAAQ+E,KAAK,SACzB9H,EAAOa,EAAE2D,EAAEzB,QAAQ+E,KAAK,eACrBuI,EAAcF,OAAOtM,GAAO7D,GACnCa,EAAE,eAAgB4G,KAAKkD,cAAcC,SAASkF,QAAQ,SAC9D,EAAMoB,KAAKzJ,OAEPpG,QAAQC,IAAI,YAAa2O,EAC7B,EGqEAhG,EAAQ+C,UAAU+C,QFzKHpL,iBAIX,MAAM6M,EAAU3Q,EAAE,sBA4ClB8D,eAAe8M,IACX,MAAMC,EAAO7Q,EAAE,qBACf6Q,EAAKC,eACiBjP,EAAOgG,cAErB+F,SAASzF,IACb,MACMX,EAAQO,MAAMC,QAAQG,EAAIX,OAASW,EAAIX,MAASW,EAAI4I,KAAO,CAAC5I,EAAI4I,MAAQ,GACxEC,EAAU,IAAIjL,KAAKoC,EAAI8I,OAAS9I,EAAI+I,YAAYC,iBAChD1J,EAASU,EAAIV,OAAS,IAAI1B,KAAKoC,EAAIV,QAAQ2J,qBAAuB,QAClEC,EAAQlJ,EAAIkJ,MAAQ,GAAGlJ,EAAIkJ,cAAgB,eAE3CC,EAAKtR,EAAE,gKAIkBmI,EAAItC,sEACOsC,EAAIgC,yFAGPhC,EAAIA,KAAOA,EAAIgC,2dAW3B3C,EAAM+J,KAAK,uDACTP,kDACDvJ,0EACwB4J,yDAQpDR,EAAK5R,OAAOqS,MAIhBtR,EAAE,uBAAuBC,GAAG,SAAS,WACjC,MAAMuR,EAAMxR,EAAE4G,MAAMuJ,QAAQ,uBACtBsB,EAAUD,EAAIvK,KAAK,QACzBuK,EAAIpB,KAAK,QAAQ1N,KAAK+O,GACtBzR,EAAE4G,MAAM/D,QACpB,IAGQ7C,EAAE,qBAAqBC,GAAG,SAAS,WAC/B,MACMwR,EADMzR,EAAE4G,MAAMuJ,QAAQ,uBACRlJ,KAAK,QACrByK,UAAUC,UACVD,UAAUC,UAAUC,UAAUH,GAASI,MAAK,KACxC7R,EAAE4G,MAAMlE,KAAK,WACbU,YAAW,IAAMpD,EAAE4G,MAAMlE,KAAK,SAAS,SAG3CoP,MAAM,+CAEtB,IAGQ9R,EAAE,uBAAuBC,GAAG,SAAS6D,iBACjC,MAAM0N,EAAMxR,EAAE4G,MAAMuJ,QAAQ,uBACtBsB,EAAUD,EAAIvK,KAAK,QACnB8K,EAAYP,EAAIpB,KAAK,uBAKrB5I,EAFYgK,EAAIrB,QAAQ,qBAAqBC,KAAK,qBACnDA,KAAK,0BAA0B1N,OAAOiH,QAAQ,SAAU,IAAI8G,OACzCuB,MAAM,KAAKC,KAAIC,GAAKA,EAAEzB,SAAQ0B,OAAOC,SAE7DL,EAAUrP,KAAK,cAEf,IACI,MAAMmB,QAAehC,EAAOqG,eAAeuJ,EAASjK,GACpD,GAAI3D,EAAOwO,MAAO,CACdN,EAAUrP,KAAK,WAAW4P,IAAI,QAAS,SAEpBd,EAAIrB,QAAQ,qBAAqBC,KAAK,gBAC9C1N,KAAKmB,EAAOwN,MAAQ,UAAY,UAC/D,MACoBU,EAAUrP,KAAK,cAAcmB,EAAO0O,QAAU,cAAcD,IAAI,QAAS,MAEhF,CAAC,MAAO7L,GACLjG,QAAQkG,MAAM,oBAAqBD,GACnCsL,EAAUrP,KAAK,0BAA0B4P,IAAI,QAAS,MACtE,CACA,IAIQtS,EAAE,uBAAuBC,GAAG,SAAS6D,iBACjC,MAAM8D,EAAQ5H,EAAE4G,MAAMK,KAAK,MACtBuL,QAAQ,yDACP3Q,EAAO8F,aAAaC,GAC1BgJ,IACZ,GACA,CAvJgB,CAAC,SAAU,OAAQ,QAAS,SAIlChD,SAAQmD,IACV,MAAM5G,EAAK,eAAe4G,IAC1B,IAAIpS,EAAU,GAED,WAAToS,IACApS,EAAU,WAGdgS,EAAQ1R,OAAO,uBACHkL,0FACiC4G,UAAa5G,MAAOxL,iBAC/DoS,8BAMN/Q,EAAE,qBAAqBC,GAAG,UAAU6D,eAAgBH,GAChDA,EAAE8J,iBACF,MAAMgF,EAAOzS,EAAE4G,MACTf,EAAO4M,EAAKrC,KAAK,sBAAsBxO,MACvC6F,EAASgL,EAAKrC,KAAK,wBAAwBxO,MAC3C4F,EAAQiL,EAAKrC,KAAK,+BACnB6B,KAAI,WAAc,OAAOrL,KAAKxH,KAAQ,IACtC4P,MAEL,IAAKnJ,GAAyB,IAAjB2B,EAAMa,OAEf,OADAyJ,MAAM,iDACC,EAGX,IACI,MAAMY,QAAe7Q,EAAO0F,UAAU1B,EAAM2B,EAAOC,GAAU,MAE7DjH,QAAQC,IAAI,uBAAwBiS,GACpC9B,GACH,CAAC,MAAOnK,GACLqL,MAAM,4BACNtR,QAAQkG,MAAMD,EAC1B,CACQ,OAAO,CACf,IA6GImK,GACJ"}