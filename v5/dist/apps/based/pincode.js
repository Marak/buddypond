class s{constructor(s,a={}){this.bp=s,this.options=a}async init(){return this.html=await this.bp.load("/v5/apps/based/pincode/pincode.html"),await this.bp.load("/v5/apps/based/pincode/pincode.css"),"loaded password dialog"}async open(){if(!this.opened){this.opened=!0,$(document.body).append(this.html),$(".password-form");const s=$(".email-input"),a=$(".password-main"),o=$(".password-confirm"),t=$(".form-status"),e={email:$(".email-error"),password:$(".password-error"),confirm:$(".confirm-error")};$(".save-btn").on("click",(async()=>{e.email.text(""),e.password.text(""),e.confirm.text(""),t.text(""),a.removeClass("error"),o.removeClass("error");const r=s.val().trim(),d=a.val().trim(),i=o.val().trim();if(!d)return e.password.text("Password is required."),void a.addClass("error");if(i!==d)return e.confirm.text("Passwords do not match."),void o.addClass("error");try{const s=await buddypond.updateAccount({buddyname:this.bp.me,password:d,email:r||void 0});console.log("Password set successfully",s),$(".password-overlay").hide(),bp.apps.buddylist&&bp.apps.buddylist.data.profileState&&bp.apps.buddylist.data.profileState.email&&(bp.apps.buddylist.data.profileState.email=r)}catch(s){console.error("Failed to save password:",s),t.text("Failed to update account. Please try again.")}})),$(".cancel-btn").on("click",(()=>{$(".password-overlay").hide()})),window.showPasswordDialog=()=>$(".password-overlay").show(),s.focus(),showPasswordDialog()}}}export{s as default};
//# sourceMappingURL=pincode.js.map
