let e={"index.html":'\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Welcome to Your BuddyPad</title>\n    <link rel="stylesheet" href="./style.css">\n</head>\n<body>\n    <h1>Your BuddyPad</h1>\n    <div class="welcome-section">\n        <p>Welcome to your BuddyPad, a custom page hosted on the BuddyPond CDN!</p>\n        <p><strong>About BuddyPads:</strong></p>\n        <p>BuddyPads are custom routed pages on BuddyPond, allowing you to host any static content. Each BuddyPad is stored as a virtual directory in our CDN, accessible via the <strong>Buddy Files</strong> app in the "pads" folder.</p>\n        <p><strong>How to Customize Your BuddyPad:</strong></p>\n        <ul>\n            <li><strong>This Default Pad</strong>: This page includes <code>index.html</code> (structure), <code>style.css</code> (styling), and <code>index.js</code> (interactivity). These are linked using relative paths (e.g., <code>./style.css</code>, <code>./index.js</code>).</li>\n            <li><strong>Upload Any Files</strong>: Use the <strong>Buddy Files</strong> app (navigate to the "pads" folder) to upload any static files, such as HTML, CSS, JS, images, or entire projects (e.g., React, Vue, or static sites).</li>\n            <li><strong>Flexible Structure</strong>: You\'re not limited to these default files. Create multiple files, folders, or complex project structures. The BuddyPond CDN serves your content as configured.</li>\n            <li><strong>Accessing Your Pad</strong>: Your BuddyPad is hosted at a unique URL and served directly from our CDN for fast, reliable delivery.</li>\n        </ul>\n        <p><strong>Try It Out:</strong> Click the button below to toggle the color of the boxes, demonstrating how HTML, CSS, and JS work together.</p>\n        <button id="toggleButton">Toggle Box Colors</button>\n        <div class="box-container">\n            <div class="color-box"></div>\n            <div class="color-box"></div>\n            <div class="color-box"></div>\n        </div>\n    </div>\n    <script src="./index.js"><\/script>\n</body>\n</html>\n',"style.css":"\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    background-color: #f4f4f9;\n    color: #333;\n    margin: 0;\n    padding: 20px;\n    line-height: 1.6;\n}\nh1 {\n    color: #007bff;\n    text-align: center;\n}\n.welcome-section {\n    max-width: 800px;\n    margin: 0 auto;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\nul {\n    padding-left: 20px;\n}\ncode {\n    background: #f0f0f0;\n    padding: 2px 4px;\n    border-radius: 4px;\n}\nbutton {\n    background-color: #007bff;\n    color: white;\n    padding: 10px 20px;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    display: block;\n    margin: 20px auto;\n}\nbutton:hover {\n    background-color: #0056b3;\n}\n.box-container {\n    display: flex;\n    gap: 20px;\n    justify-content: center;\n}\n.color-box {\n    width: 100px;\n    height: 100px;\n    background-color: #28a745;\n    border-radius: 10px;\n    transition: background-color 0.3s ease;\n}\n.color-box.toggled {\n    background-color: #dc3545;\n}\n","index.js":"\nconsole.log('Welcome to your BuddyPad!');\n// Example: Using querySelectorAll to add interactivity\nconst boxes = document.querySelectorAll('.color-box');\nconst toggleButton = document.getElementById('toggleButton');\n\ntoggleButton.addEventListener('click', () => {\n    boxes.forEach(box => {\n        box.classList.toggle('toggled');\n    });\n});\n"};function t(e){return e.endsWith(".html")?"text/html":e.endsWith(".css")?"text/css":e.endsWith(".js")?"application/javascript":"text/plain"}var a={admin:{name:"admin",icon:"desktop/assets/images/icons/icon_profile_64.png",label:"Admin",onClick:"bp.open('admin')",adminOnly:!0},profile:{icon:"desktop/assets/images/icons/icon_myprofile_64.png",label:"My Profile",description:"Manage your profile and settings",onClick:"bp.open('profile')",categories:["social","productivity"]},buddylist:{icon:"desktop/assets/images/icons/icon_profile_64.png",label:"BuddyList",description:"View and manage your contacts",onClick:"bp.open('buddylist')",categories:["social","community"]},pad:{icon:"desktop/assets/images/icons/icon_pad_64.png",label:"Buddy Apps",description:"Create hosted Apps for Buddy Pond",onClick:"bp.open('pad')",categories:["productivity","creative","community"],alias:["buddy-apps"]},pond:{icon:"desktop/assets/images/icons/icon_pond_64.png",label:"Ponds",description:"Explore shared content or communities",onClick:"bp.open('pond')",categories:["community","social"]},"file-explorer":{icon:"desktop/assets/images/icons/icon_file-explorer_64.png",label:"Buddy Files",description:"Browse and manage your files",onClick:"bp.open('file-explorer')",desktopOnly:!0,categories:["files","productivity"],alias:["buddy-files","files"]},"plays-doodle-jump-extra":{icon:"desktop/assets/images/icons/icon_doodle-jump-extra_64.png",label:"Doodle Jump",description:"Play Doodle Jump Extra game",onClick:"bp.open('doodle-jump-extra')",categories:["games","entertainment"],author:"Plays.org",alias:["doodle-jump"]},"plays-malpek":{icon:"desktop/assets/images/icons/icon_plays-malpek_64.png",label:"Malpek",description:"Play Malpek game",onClick:"bp.open('plays-malpek')",categories:["games","entertainment"],author:"Plays.org",alias:["malpek"]},"frvr-kittenforce":{icon:"desktop/assets/images/icons/icon_kittenforce-frvr_64.png",label:"Kitten Force",description:"Play Kitten Force FRVR game",onClick:"bp.open('frvr-kittenforce')",categories:["games","entertainment"],author:"FRVR Games",alias:["kittenforce"]},marbleblast:{icon:"desktop/assets/images/icons/icon_marbleblast_64.png",label:"Marble Blast",description:"Play the Marble Blast game",onClick:"bp.open('marbleblast')",categories:["games","entertainment"],author:"Vanilagy",alias:["marble-blast"]},"frvr-greed":{icon:"desktop/assets/images/icons/icon_frvr-greed_64.png",label:"Greed",description:"Play Greedy FRVR game",onClick:"bp.open('frvr-greed')",categories:["games","entertainment"],author:"FRVR Games",alias:["greed"]},"jutsu-caster":{icon:"desktop/assets/images/icons/icon_jutsu_64.png",label:"Jutsu Caster",description:"Cast Jutsu spells using hand gestures",onClick:"bp.open('jutsu-caster')",categories:["tools","creative","computer-vision"],author:"BuddyPond",alias:["jutsu"]},minipaint:{icon:"desktop/assets/images/icons/icon_minipaint_64.png",label:"miniPaint",author:"ViliusL",description:"Advanced image editor to create and edit images",onClick:"bp.open('minipaint')",categories:["art","creative"]},patatap:{icon:"desktop/assets/images/icons/icon_patatap_64.png",label:"Patatap",description:"Create music and animations with touch and keyboard input",onClick:"bp.open('patatap')",categories:["audio","music","creative"],author:"Jono Brandel"},"vision-harp":{icon:"desktop/assets/images/icons/icon_vision-harp_64.png",label:"Vision Harp",description:"Play music using hand gestures",onClick:"bp.open('vision-harp')",categories:["audio","computer-vision","music","creative"],author:"BuddyPond",alias:["harp"]},stickman:{icon:"desktop/assets/images/icons/icon_stickman_64.png",label:"Stickman",description:"Control a stickman using body poses",onClick:"bp.open('stickman')",categories:["creative","computer-vision","entertainment"],author:"BuddyPond",alias:["stickman"]},bubblepop:{icon:"desktop/assets/images/icons/icon_bubblepop_64.png",label:"Bubble Pop",description:"Pop bubbles and enjoy the visuals",onClick:"bp.open('bubblepop')",categories:["games","entertainment","computer-vision"],author:"BuddyPond",alias:["bubblepop"]},soundrecorder:{icon:"desktop/assets/images/icons/icon_soundrecorder_64.png",label:"Sound Recorder",author:"Isaiah Odhner",description:"Record and save audio clips",onClick:"bp.open('soundrecorder')",desktopOnly:!0,categories:["audio","creative"],alias:["recorder"]},youtube:{icon:"desktop/assets/images/icons/icon_interdimensionalcable_64.png",label:"IDC Cable",description:"Watch and browse YouTube videos",onClick:"bp.open('youtube')",categories:["entertainment","media"],alias:["idc"]},camera:{icon:"desktop/assets/images/icons/icon_camera_64.png",label:"Camera",description:"Capture photos or videos",onClick:"bp.open('camera')",categories:["media","creative"]},coin:{icon:"desktop/assets/images/icons/icon_coin_64.png",label:"Buddy Coins",description:"Manage your virtual currency",onClick:"bp.open('coin')",categories:["finance"]},"fluid-simulation":{icon:"desktop/assets/images/icons/icon_fluidsimulation_64.png",author:"Pavel Dobryakov",label:"Fluid Simulation",description:"Interact with a fluid dynamics simulation",onClick:"bp.open('fluid-simulation')",categories:["creative","entertainment"],alias:["fluids"]},sampler:{icon:"desktop/assets/images/icons/icon_midifighter_64.png",label:"Sampler",description:"Create and mix audio samples",onClick:"bp.open('sampler')",categories:["audio","music","creative"]},"audio-visual":{icon:"desktop/assets/images/icons/icon_visuals_64.png",author:"lachlanmaclean",label:"Audio Visuals",description:"Experience audio-responsive visuals",onClick:"bp.open('audio-visual')",categories:["creative","entertainment","audio"],alias:["av"]},chalkboard:{icon:"desktop/assets/images/icons/icon_chalkboard_64.png",label:"Chalkboard",description:"Draw and write on a virtual chalkboard",onClick:"bp.open('chalkboard')",categories:["art","creative"],chatWindowButton:["buddy","pond"],chatButton:{text:"Chalkboard",image:"desktop/assets/images/icons/icon_chalkboard_64.png",onclick:async e=>{let t=e.target.dataset.context,a=e.target.dataset.type;return bp.open("chalkboard",{output:a||"buddy",context:t}),!1}}},piano:{icon:"desktop/assets/images/icons/icon_piano_64.png",label:"Piano",description:"Play a virtual piano keyboard",onClick:"bp.open('piano')",desktopOnly:!0,categories:["music","creative"]},portfolio:{icon:"desktop/assets/images/icons/icon_portfolio_64.png",label:"Portfolio",description:"Track your investments and assets",onClick:"bp.open('portfolio')",categories:["finance"]},"audio-player":{icon:"desktop/assets/images/icons/icon_audio-player_64.png",label:"Audio Player",description:"Play and manage audio files",onClick:"bp.open('audio-player')",categories:["media","audio"]},paint:{icon:"desktop/assets/images/icons/icon_paint_64.png",label:"Paint",author:"Isaiah Odhner",description:"A Classic Retro Style Image Editor",onClick:"bp.open('paint')",categories:["art","creative"],chatWindowButton:["buddy","pond"]},painterro:{icon:"desktop/assets/images/icons/icon_painterro_64.png",label:"Painterro",author:"Ivan Borshchov",description:"Easy to use image editing tool",onClick:"bp.open('painterro')",categories:["art","creative"]},"frvr-basketball":{icon:"desktop/assets/images/icons/icon_basketball-frvr_64.png",label:"BasketBall",description:"Play Basketball game",onClick:"bp.open('frvr-basketball')",categories:["games","entertainment"],author:"FRVR Games",alias:["basketball"]},"frvr-bowlingo":{icon:"desktop/assets/images/icons/icon_frvr-bowlingo_64.png",label:"Bowlingo",description:"Play Bowlingo game",onClick:"bp.open('frvr-bowlingo')",categories:["games","entertainment"],author:"FRVR Games",alias:["bowling"]},mantra:{icon:"desktop/assets/images/icons/icon_mantra_64.png",label:"Mantra",description:"Play the Mantra game",categories:["games"]},minesweeper:{icon:"desktop/assets/images/icons/icon_minesweeper_64.png",label:"Minesweeper",description:"Classic Minesweeper puzzle game",categories:["games"]},"emulator-nes":{icon:"desktop/assets/images/icons/icon_nes_64.png",app:"emulator",context:"nes",label:"NES",description:"Play Nintendo Entertainment System games",options:{context:"nes"},categories:["games","emulators"]},"emulator-sega":{icon:"desktop/assets/images/icons/icon_sega_64.png",app:"emulator",context:"sega",label:"Sega",description:"Play Sega console games",options:{context:"sega"},categories:["games","emulators"]},"emulator-snes":{icon:"desktop/assets/images/icons/icon_snes_64.png",app:"emulator",context:"snes",label:"SNES",description:"Play Super Nintendo games",options:{context:"snes"},categories:["games","emulators"]},"emulator-atari2600":{icon:"desktop/assets/images/icons/icon_atari2600_64.png",app:"emulator",context:"atari2600",label:"Atari 2600",description:"Play Atari 2600 games",options:{context:"atari2600"},categories:["games","emulators"]},"emulator-n64":{icon:"desktop/assets/images/icons/icon_n64_64.png",app:"emulator",context:"n64",label:"n64",description:"Play Nintendo 64 games",options:{context:"n64"},categories:["games","emulators"]},solitaire:{icon:"desktop/assets/images/icons/icon_solitaire_64.png",label:"Solitaire",description:"Classic Solitaire card game",categories:["games"]},spellbook:{icon:"desktop/assets/images/icons/icon_spellbook_64.png",label:"Spellbook",description:"Manage scripts or commands",categories:["tools","productivity"]},globe:{icon:"desktop/assets/images/icons/icon_globe_64.png",label:"Globe",description:"Visualize global network data",categories:["tools"]},"file-viewer":{icon:"desktop/assets/images/icons/icon_file-viewer_64.png",label:"File Viewer",description:"View files in various formats",onClick:"bp.open('file-viewer')",categories:["files","productivity"]},"hacker-typer":{icon:"desktop/assets/images/icons/icon_hacker-typer_64.png",label:"Hack Typer",description:"Simulate hacking with a typing game",categories:["tools","games"]},"hex-editor":{icon:"desktop/assets/images/icons/icon_hex-editor_64.png",label:"Hex Editor",description:"Edit files in hexadecimal format",categories:["tools","productivity"]},maps:{icon:"desktop/assets/images/icons/icon_maps_64.png",label:"Maps",description:"Access mapping and navigation tools",categories:["tools"]},motd:{icon:"desktop/assets/images/icons/icon_console_64.png",label:"MOTD",description:"Message of the Day",onClick:"bp.open('motd')",categories:["social","community"],chatWindowButton:["buddy","pond"]}};class o{constructor(e,t={}){return this.bp=e,this.icon="/desktop/assets/images/icons/icon_pad_64.png",this.data={},this}async help(){return"Pads are a fun way to create and share content with others.\n\n        You may create pads here and such...etc.\n\n        Enjoy!\n\n        "}async init(){this.bp.log("Hello from Pad");let e=await this.bp.load("/v5/apps/based/pad/pad.html");await this.bp.load("/v5/apps/based/pad/pad.css");let t=await this.bp.importModule("/v5/apps/based/pad/vendor/slugify.min.js",{},!1);this.slugify=t.slugifyDefault;try{this.data.appStats=await this.bp.apps.desktop.client.getAppsStats()}catch(e){this.data.appStats={}}return this.data.appStats||(this.data.appStats={}),this.html=e,"loaded Pad"}async bindUI(){}async open(){async function e(){this.bp.me&&"Guest"!==this.bp.me&&(this.myPads=await this.bp.apps.client.api.getPads(),console.log("myPadsmyPads",this.myPads),this.renderPadRows(this.myPads.results))}this.padWindow||(this.padWindow=this.bp.apps.ui.windowManager.createWindow({id:"pad",title:"Buddy Apps",x:50,y:60,width:1e3,height:600,minWidth:200,minHeight:200,icon:this.icon,parent:$("#desktop")[0],content:this.html,resizable:!0,minimizable:!0,maximizable:!0,closable:!0,focusable:!0,maximized:!1,minimized:!1,onClose:()=>{this.padWindow=null}}),this.tabs=new this.bp.apps.ui.Tabs(".tabs-container",this.padWindow.content),this.tabs.onTab((async t=>{"#pads-home"===t&&(this.myPads=await e.call(this)),"#buddy-pads"===t&&(this.renderAppList(this.data.appStats),$(".bp-pads-search-input",this.padWindow.content).focus())})),$(".bp-pads-search-input",this.padWindow.content).on("input",(e=>{}))),$(".tab-content:first",this.padWindow.content).show(),console.log(this.myPads),this.bp.me&&"Guest"!==this.bp.me?($(".loggedOut",this.padWindow.content).flexHide(),$(".loggedIn",this.padWindow.content).flexShow()):($(".loggedOut",this.padWindow.content).flexShow(),$(".loggedIn",this.padWindow.content).flexHide());let t="https://files.buddypond.com/"+this.bp.me,a=this.bp.config.host+"/"+this.bp.me;$(".userFilesHome",this.padWindow.content).html(a),$(".userFilesHome",this.padWindow.content).attr("href",a),$(".userFilesCDN",this.padWindow.content).html(t),$(".userFilesCDN",this.padWindow.content).attr("href",t);let o=this;const n=(e,t)=>{let a;return function(){const o=this,n=arguments;clearTimeout(a),a=setTimeout((()=>e.apply(o,n)),t)}};return $(".padTitle",this.padWindow.content).on("input",n((function(e){$(this).removeClass("error"),console.log("Input changed:",e.target.value),function(e){let a=e.replace(/\s+/g,"-");a=a.replace(/-+/g,"_");let n=o.slugify(a,{lower:!0,replacement:"-",remove:/[^A-Za-z0-9_\-]/g,strict:!1});$(".padTitle",o.padWindow.content).val(n),$(".padUrl",o.padWindow.content).val(`${t}/pads/${n}`)}(e.target.value)}),250)),$(".padTitle",this.padWindow.content).on("input",(()=>{$(".status-indicator",this.padWindow.content).addClass("active").text("Generating URL...")})).on("input",n((()=>{$(".status-indicator",this.padWindow.content).removeClass("active").text(""),$(".padUrl",this.padWindow.content).val(`${a}/pads/${o.slugify($(".padTitle",o.padWindow.content).val())}`)}),250)),$(".bp-pad-form",this.padWindow.content).on("submit",(async e=>{if(e.preventDefault(),console.log("Save pad button clicked"),!$(".padTitle",this.padWindow.content).val())return void $(".padTitle",this.padWindow.content).addClass("error").attr("placeholder","Please enter a name...");$(".save-pad-button",this.padWindow.content).prop("disabled",!0),$(".save-pad-button",this.padWindow.content).addClass("disabled");let t,a,o=!1;try{a=await this.savePad(),o=!0}catch(e){console.error(e),t=e}if(o){console.log("the new pad is ",a);try{await this.buildPad(a.title)}catch(e){return void console.error("Error building pad",e)}$("#pads-upload-files",this.padWindow.content).show(),$("#pads-editor",this.padWindow.content).flexHide(),this.myPads=await this.bp.apps.client.api.getPads(),this.renderPadRows(this.myPads),$(".bp-pad-container",this.padWindow.content).flexShow();let e=$("#padTitle").val();$(".openPadButton",this.padWindow.content).attr("data-context","/"+this.bp.me+`/pads/${e}/index.html`)}else console.log("Pad not saved",t),"Pad already exists"===t.message&&($(".padTitle",this.padWindow.content).addClass("error"),$(".status-indicator",this.padWindow.content).addClass("error").text("Pad already exists"));return $(".save-pad-button",this.padWindow.content).prop("disabled",!1),$(".save-pad-button",this.padWindow.content).removeClass("disabled"),!1})),$(".create-pad-button",this.padWindow.content).on("click",(()=>{this.tabs.navigateToTab("#pads-editor")})),this.tabs.showTab("#buddy-pads"),this.padWindow.maximize(),this.padWindow}editPad(e){$(".tab-content",this.padWindow.content).flexHide(),$(".pad-code-editor",this.padWindow.content).flexShow()}}o.prototype.renderPadRows=function(e){if(e&&e.length>0){let t=$(".bp-pad-table",this.padWindow.content);t.empty(),e.forEach((e=>{let a=document.createElement("tr");a.setAttribute("data-title",e.title);let o=document.createElement("td");o.innerHTML=e.title,o.style.fontWeight="bold",o.style.minWidth="100px",a.appendChild(o),o=document.createElement("td");let n="/"+e.owner+"/pads/"+e.title,s=`<a href="${n}" target="_blank">${n}</a>`;o.innerHTML=s,a.appendChild(o),o=document.createElement("td"),o.style.textAlign="right";let i=document.createElement("button");i.innerHTML="View",i.classList.add("view-button");let p=document.createElement("button");p.classList.add("edit-button"),p.innerHTML="Edit",p.onclick=()=>{},o.appendChild(p);let l=document.createElement("button");l.innerHTML="Delete",l.classList.add("delete-button"),o.appendChild(l),o.appendChild(i),a.appendChild(o),a.addEventListener("click",(async t=>{let a;"submit"===t.target.type&&(a=t.target.innerHTML);let o=$(t.target).closest("tr"),n=o.attr("data-title"),s="/"+e.owner+"/pads/"+e.title,i="/"+e.owner+"/"+e.title,p="pads/"+e.title;if("View"===a&&window.open(s,"_blank"),"Delete"===a){if(confirm("Are you sure you want to delete "+n+"?")){$(".ui-button",o).prop("disabled",!0),$(".ui-button",o).addClass("disabled");try{await this.bp.apps.client.api.deletePad(i)}catch(e){console.log("error deleting pad",e)}try{await this.bp.apps.client.api.removeFile(p)}catch(e){console.log("error deleting pad file",e)}o.remove(),this.tabs.showTab("#pads-home")}}"Edit"===a&&(this.bp.open("file-explorer",{context:"/"+this.bp.me+"/"+p+"/index.html"}),this.bp.apps.ui.windowManager.focusWindow("file-explorer"))})),t.append(a)}))}else $(".bp-pad-container",this.padWindow.content).flexHide()},o.prototype.savePad=async function(){let e,t=$("#padTitle").val(),a="/"+this.bp.me+"/"+t,o=$("#padDescription").val();console.log("sending padKey",a);try{e=await this.bp.apps.client.api.getPad(a),console.log("got back the pad",e)}catch(e){console.error("error getting pad",e)}if(console.log("thePad",e),e)throw console.log("pad already exists, please choose a different name"),new Error("Pad already exists");{console.log("pad is available, creating pad");let e,a={pad_key:t,title:t,description:o};try{e=await this.bp.apps.client.api.createPad(a),console.log("created pad",e)}catch(e){console.error("error creating pad",e)}return e}},o.prototype.buildPad=async function(a,o="default"){this.bp.me;for(const[o,n]of Object.entries(e)){console.log(`Creating ${o}`);const e=new Blob([n],{type:t(o)}),s=new File([e],o,{type:e.type,lastModified:new Date});s.filePath="pads/"+a+`/${o}`,console.log(`Uploading ${o}...`,s);try{this.bp.apps.client.api.uploadFile(s),console.log(`${o} uploaded successfully.`)}catch(e){console.error(`Error uploading ${o}: ${e.message}`)}}},o.prototype.renderAppList=function(e={}){const t=$(".bp-pads-grid"),o=$(".bp-pads-category-list"),n="undefined"!=typeof bp&&bp.isMobile&&bp.isMobile();let s=this.bp?.settings?.apps_installed||{};this.bp?.me?.isAdmin||Object.keys(a).forEach((e=>{a[e].adminOnly&&delete a[e]}));let i=new Set;function p(t,a){const o=!!s[t],n=o?"Open":"Install",i=o?"bp-pads-btn-open":"bp-pads-btn-install",p=o?`<button class="bp-pads-btn bp-pads-btn-uninstall" data-app="${t}">Uninstall</button>`:"";return`\n            <div class="bp-pads-app" data-app="${t}">\n                <img src="${a.icon}" alt="${a.label} icon" class="bp-pads-app-icon">\n                <div class="bp-pads-app-info">\n                    <h4 class="bp-pads-app-label">${a.label}</h4>\n                    <p class="bp-pads-app-description">${a.description}</p>\n                    <div class="bp-pads-app-actions">\n                        <button class="bp-pads-btn ${i}" data-app="${t}">${n}</button>\n                        ${p}\n                    </div>\n                    <div class="bp-pads-app-metadata">\n                        <div class="bp-pads-app-author">\n                            <span class="bp-pads-app-author-label">Author:</span>\n                            <span class="bp-pads-app-author-value">${a.author||"BuddyPond"}</span>\n                        </div>\n                        <div class="bp-pads-app-install-count">\n                            <span class="bp-pads-app-install-count-label">Downloads:</span>\n                            <span class="bp-pads-app-install-count-value">${e[t]?.installCount||0}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}function l(e,t){const a="install"===t;e.addClass("bp-pads-btn-loading"),e.text(a?"Installing...":"Uninstalling..."),e.css("cursor","wait"),e[0].offsetHeight}function d(e,t){e.removeClass("bp-pads-btn-loading"),e.text(t?"Open":"Install"),e.removeClass("bp-pads-btn-install bp-pads-btn-open"),e.addClass(t?"bp-pads-btn-open":"bp-pads-btn-install"),e.css("cursor","")}function c(e="all"){t.empty();let o=Object.entries(a);"all"!==e&&"installed"!==e&&(o=o.filter((([t,a])=>a.categories&&a.categories.includes(e)))),"installed"===e&&(o=o.filter((([e])=>s[e]))),n&&(o=o.filter((([e,t])=>!t.desktopOnly))),o.sort(((e,t)=>e[1].label.localeCompare(t[1].label))),o.forEach((([e,a])=>{t.append(p(e,a))}))}Object.values(a).forEach((e=>{e.categories&&e.categories.forEach((e=>i.add(e)))})),i=Array.from(i).sort(),i.forEach((e=>{o.append(`\n            <button class="bp-pads-category-btn" data-category="${e}">\n                ${e.charAt(0).toUpperCase()+e.slice(1)}\n            </button>\n        `)}));let r="all";c(r),o.on("click",".bp-pads-category-btn",(e=>{$(".bp-pads-category-btn").removeClass("bp-pads-category-active"),$(e.target).addClass("bp-pads-category-active"),r=$(e.target).data("category"),c(r),$(this.padWindow.content).scrollTop(0)})),t.on("click",".bp-pads-btn",(async e=>{const t=$(e.target),o=t.data("app"),n=a[o];if(n){if(s[o],t.hasClass("bp-pads-btn-install"))console.log(`Stub: Installing app ${o}`),l(t,"install"),await this.bp.apps.desktop.addApp(o,n),s[o]=n,d(t,!0),$(`.bp-pads-app[data-app="${o}"]`).replaceWith(p(o,n));else if(t.hasClass("bp-pads-btn-open")){console.log(`Stub: Opening app ${o}`);try{console.log(`Executing onClick for ${o}`,n),n.app?this.bp.open(n.app,{context:n.context||{}}):this.bp.open(o)}catch(e){console.error(`Error executing onClick for ${o}:`,e)}}else if(t.hasClass("bp-pads-btn-uninstall")){console.log(`Stub: Uninstalling app ${o}`),l(t,"uninstall");let e=t.parent().find(".bp-pads-btn-open");console.log(e),e.remove(),await this.bp.apps.desktop.removeApp(o,n),delete s[o],d(t,!1),$(`.bp-pads-app[data-app="${o}"]`).replaceWith(p(o,n))}}else console.warn(`App ${o} not found in appList`)}))};export{o as default};
//# sourceMappingURL=pad.js.map
