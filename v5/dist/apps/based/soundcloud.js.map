{"version":3,"file":"soundcloud.js","sources":["../../../apps/based/soundcloud/soundcloud.js"],"sourcesContent":["export default class SoundCloud {\n    constructor(bp, options = {}) {\n        this.bp = bp;\n\n        this.soundCloudEmbeded = false;\n        this.widget = null;\n\n        return this;\n    }\n\n    async init() {\n        this.bp.log('Hello from SoundCloud');\n\n\n        // fetches html from the fragment and returns it as a string\n        this.html = await this.bp.load('/v5/apps/based/soundcloud/soundcloud.html');\n\n        return 'loaded SoundCloud';\n    }\n\n    async open(params = {}) {\n\n        let that = this;\n        if (!this.soundcloudWindow) {\n            this.soundcloudWindow = this.bp.apps.ui.windowManager.createWindow({\n                id: 'soundcloud',\n                title: 'SoundCloud',\n                x: 50,\n                y: 100,\n                width: 600,\n                height: 300,\n                minWidth: 200,\n                minHeight: 200,\n                parent: $('#desktop')[0],\n                content: this.html,\n                resizable: true,\n                minimizable: true,\n                maximizable: true,\n                closable: true,\n                focusable: true,\n                maximized: false,\n                minimized: false,\n                onClose: () => {\n                    this.soundcloudWindow = null;\n                }\n            });\n\n        }\n\n        params.playlistID = params.playlistID || '1397493787';\n        if (!this.soundCloudEmbeded) {\n          this.soundCloudEmbeded = true;\n          // TODO: create to desktop.app.loadIframe() function ?\n          let str = `\n            <iframe id=\"soundcloudiframe\" width=\"100%\" height=\"300\" scrolling=\"no\" frameborder=\"no\" allow=\"autoplay\" src=\"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/${params.playlistID}&color=%23df23e4&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true\"></iframe><div style=\"font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;\"><a href=\"https://soundcloud.com/marak\" title=\"marak\" target=\"_blank\" style=\"color: #cccccc; text-decoration: none;\">marak</a> Â· <a href=\"https://soundcloud.com/marak/sets/buddy-pond-0\" title=\"Buddy Pond 0\" target=\"_blank\" style=\"color: #cccccc; text-decoration: none;\">Buddy Pond 0</a></div>\n            `;\n          $('#soundcloudplayer').append(str);\n          $('#soundcloudiframe').on('load', function () {\n            let tag = document.createElement('script');\n            tag.onload = function () {\n              let iframeElement   = document.querySelector('#soundcloudiframe');\n              let iframeElementID = iframeElement.id;\n              that.widget = SC.Widget(iframeElement);\n              console.log('Soundcloud App', 'Embed Loaded');\n              that.widget.play();\n            };\n            tag.src = 'desktop/assets/js/soundcloud.js';\n            let firstScriptTag = document.getElementsByTagName('script')[0];\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n          });\n        }\n        \n        this.bp.apps.ui.windowManager.focusWindow(this.soundcloudWindow);\n\n    }\n}"],"names":["SoundCloud","constructor","bp","options","this","soundCloudEmbeded","widget","init","log","html","load","open","params","that","soundcloudWindow","apps","ui","windowManager","createWindow","id","title","x","y","width","height","minWidth","minHeight","parent","$","content","resizable","minimizable","maximizable","closable","focusable","maximized","minimized","onClose","playlistID","str","append","on","tag","document","createElement","onload","iframeElement","querySelector","SC","Widget","console","play","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","focusWindow"],"mappings":"AAAe,MAAMA,EACjB,WAAAC,CAAYC,EAAIC,EAAU,IAMtB,OALAC,KAAKF,GAAKA,EAEVE,KAAKC,mBAAoB,EACzBD,KAAKE,OAAS,KAEPF,IACf,CAEI,UAAMG,GAOF,OANAH,KAAKF,GAAGM,IAAI,yBAIZJ,KAAKK,WAAaL,KAAKF,GAAGQ,KAAK,6CAExB,mBACf,CAEI,UAAMC,CAAKC,EAAS,IAEhB,IAAIC,EAAOT,KA4BX,GA3BKA,KAAKU,mBACNV,KAAKU,iBAAmBV,KAAKF,GAAGa,KAAKC,GAAGC,cAAcC,aAAa,CAC/DC,GAAI,aACJC,MAAO,aACPC,EAAG,GACHC,EAAG,IACHC,MAAO,IACPC,OAAQ,IACRC,SAAU,IACVC,UAAW,IACXC,OAAQC,EAAE,YAAY,GACtBC,QAASzB,KAAKK,KACdqB,WAAW,EACXC,aAAa,EACbC,aAAa,EACbC,UAAU,EACVC,WAAW,EACXC,WAAW,EACXC,WAAW,EACXC,QAAS,KACLjC,KAAKU,iBAAmB,SAMpCF,EAAO0B,WAAa1B,EAAO0B,YAAc,cACpClC,KAAKC,kBAAmB,CAC3BD,KAAKC,mBAAoB,EAEzB,IAAIkC,EAAM,2MACoL3B,EAAO0B,0tBAErMV,EAAE,qBAAqBY,OAAOD,GAC9BX,EAAE,qBAAqBa,GAAG,QAAQ,WAChC,IAAIC,EAAMC,SAASC,cAAc,UACjCF,EAAIG,OAAS,WACX,IAAIC,EAAkBH,SAASI,cAAc,qBACvBD,EAAc3B,GACpCN,EAAKP,OAAS0C,GAAGC,OAAOH,GACxBI,QAAQ1C,IAAI,iBAAkB,gBAC9BK,EAAKP,OAAO6C,MACb,EACDT,EAAIU,IAAM,kCACV,IAAIC,EAAiBV,SAASW,qBAAqB,UAAU,GAC7DD,EAAeE,WAAWC,aAAad,EAAKW,EACxD,GACA,CAEQjD,KAAKF,GAAGa,KAAKC,GAAGC,cAAcwC,YAAYrD,KAAKU,iBAEvD"}