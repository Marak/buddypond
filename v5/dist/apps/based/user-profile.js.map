{"version":3,"file":"user-profile.js","sources":["../../../apps/based/user-profile/user-profile.js"],"sourcesContent":["export default class Profile {\n    constructor(bp, options = {}) {\n        this.bp = bp;\n        return this;\n    }\n\n    async init() {\n        this.bp.log('Hello from User Profile');\n        // we can load modules or html fragments or css files here\n        // using this.bp.load() method\n\n        // injects CSS link tag into the head of document\n        //await this.bp.load('/v5/apps/based/profile-user/profile-user.css');\n\n        // fetches html from the fragment and returns it as a string\n        //this.html = await this.bp.load('/v5/apps/based/profile-user/profile-user.html');\n\n\n        return 'loaded Profile';\n    }\n\n    async open(options = {}) {\n\n        let buddyname = options.context || this.bp.me;\n        buddyname = buddyname.replace(\":\", \"\"); // remove any colons for now\n        buddyname = buddyname.replace(\" \", \"\"); // remove any spaces for now\n\n\n\n        // create a new element from the html string\n        let profileContent = document.createElement('div');\n        profileContent.classList.add('profileContent');\n        profileContent.style.width = '100%';\n        profileContent.style.height = '100%';\n        // profileContent.innerHTML = this.html;\n\n        // url profile for user\n        let buddyHomeURL = this.bp.config.host + '/' + buddyname;\n        // create a new iframe\n        let iframe = document.createElement('iframe');\n        iframe.style.width = '100%';\n        iframe.style.height = '100%';\n        iframe.src = buddyHomeURL;\n\n        let contentDiv = document.createElement('div');\n        contentDiv.classList.add('customProfile');\n        contentDiv.style.width = '100%';\n        contentDiv.style.height = '100%';\n\n\n        contentDiv.append(iframe);\n\n        profileContent.append(contentDiv);\n\n\n        // Initialize tabs\n        if (!this.profileWindow) {\n            this.profileWindow = this.bp.apps.ui.windowManager.createWindow({\n                id: 'profile-user',\n                title: 'Profile - ' + buddyname,\n                x: 50,\n                y: 100,\n                width: 700,\n                height: 600,\n                minWidth: 200,\n                minHeight: 200,\n                parent: $('#desktop')[0],\n                context: buddyname || 'default',\n                content: profileContent,\n                resizable: true,\n                minimizable: true,\n                maximizable: true,\n                closable: true,\n                focusable: true,\n                maximized: false,\n                minimized: false,\n                onClose: () => {\n                    this.profileWindow = null;\n                }\n            });\n\n\n\n        } else {\n            // If the window exists and the context has changed, re-render the content\n            this.profileWindow.content = contentDiv;\n            if (this.profileWindow.context !== buddyname) {\n                this.profileWindow.context = buddyname;\n                // $(this.profileWindow.content).html(contentDiv.innerHTML);\n                this.profileWindow.setTitle('Profile - ' + buddyname);\n            }\n\n        }\n\n        // Focus on the newly created or updated window\n        this.bp.apps.ui.windowManager.focusWindow(this.profileWindow);\n    }\n\n\n}\n"],"names":["Profile","constructor","bp","options","this","init","log","open","buddyname","context","me","replace","profileContent","document","createElement","classList","add","style","width","height","buddyHomeURL","config","host","iframe","src","contentDiv","append","profileWindow","content","setTitle","apps","ui","windowManager","createWindow","id","title","x","y","minWidth","minHeight","parent","$","resizable","minimizable","maximizable","closable","focusable","maximized","minimized","onClose","focusWindow"],"mappings":"AAAe,MAAMA,EACjB,WAAAC,CAAYC,EAAIC,EAAU,IAEtB,OADAC,KAAKF,GAAKA,EACHE,IACf,CAEI,UAAMC,GAYF,OAXAD,KAAKF,GAAGI,IAAI,2BAWL,gBACf,CAEI,UAAMC,CAAKJ,EAAU,IAEjB,IAAIK,EAAYL,EAAQM,SAAWL,KAAKF,GAAGQ,GAC3CF,EAAYA,EAAUG,QAAQ,IAAK,IACnCH,EAAYA,EAAUG,QAAQ,IAAK,IAKnC,IAAIC,EAAiBC,SAASC,cAAc,OAC5CF,EAAeG,UAAUC,IAAI,kBAC7BJ,EAAeK,MAAMC,MAAQ,OAC7BN,EAAeK,MAAME,OAAS,OAI9B,IAAIC,EAAehB,KAAKF,GAAGmB,OAAOC,KAAO,IAAMd,EAE3Ce,EAASV,SAASC,cAAc,UACpCS,EAAON,MAAMC,MAAQ,OACrBK,EAAON,MAAME,OAAS,OACtBI,EAAOC,IAAMJ,EAEb,IAAIK,EAAaZ,SAASC,cAAc,OACxCW,EAAWV,UAAUC,IAAI,iBACzBS,EAAWR,MAAMC,MAAQ,OACzBO,EAAWR,MAAME,OAAS,OAG1BM,EAAWC,OAAOH,GAElBX,EAAec,OAAOD,GAIjBrB,KAAKuB,eA6BNvB,KAAKuB,cAAcC,QAAUH,EACzBrB,KAAKuB,cAAclB,UAAYD,IAC/BJ,KAAKuB,cAAclB,QAAUD,EAE7BJ,KAAKuB,cAAcE,SAAS,aAAerB,KAhC/CJ,KAAKuB,cAAgBvB,KAAKF,GAAG4B,KAAKC,GAAGC,cAAcC,aAAa,CAC5DC,GAAI,eACJC,MAAO,aAAe3B,EACtB4B,EAAG,GACHC,EAAG,IACHnB,MAAO,IACPC,OAAQ,IACRmB,SAAU,IACVC,UAAW,IACXC,OAAQC,EAAE,YAAY,GACtBhC,QAASD,GAAa,UACtBoB,QAAShB,EACT8B,WAAW,EACXC,aAAa,EACbC,aAAa,EACbC,UAAU,EACVC,WAAW,EACXC,WAAW,EACXC,WAAW,EACXC,QAAS,KACL7C,KAAKuB,cAAgB,QAkBjCvB,KAAKF,GAAG4B,KAAKC,GAAGC,cAAckB,YAAY9C,KAAKuB,cACvD"}